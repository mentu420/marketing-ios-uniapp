if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(vue,shared){"use strict";const ON_SHOW="onShow",ON_LOAD="onLoad",ON_UNLOAD="onUnload",ON_PULL_DOWN_REFRESH="onPullDownRefresh",ON_SHARE_TIMELINE="onShareTimeline",ON_SHARE_APP_MESSAGE="onShareAppMessage";function formatAppLog(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}function resolveEasycom(e,t){return shared.isString(e)?t:e}const createHook=e=>(t,a=vue.getCurrentInstance())=>{!vue.isInSSRComponentSetup&&vue.injectHook(e,t,a)},onShow=createHook(ON_SHOW),onLoad=createHook(ON_LOAD),onUnload=createHook(ON_UNLOAD),onPullDownRefresh=createHook(ON_PULL_DOWN_REFRESH),onShareTimeline=createHook(ON_SHARE_TIMELINE),onShareAppMessage=createHook(ON_SHARE_APP_MESSAGE),_sfc_main$L={__name:"m-image",props:{src:{type:String,default:null},lazyLoad:{type:Boolean,default:!0},mode:{type:String,default:"scaleToFill"},showMenuByLongpress:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},width:{type:String,default:"320px"},height:{type:String,default:"240px"}},emits:["load","error"],setup(e,{emit:t}){const a=e,n=vue.ref(!1),i=e=>{n.value=!0,t("error",e)};return(s,o)=>(vue.openBlock(),vue.createElementBlock("view",{clas:"inline-block flex items-center justify-center",style:vue.normalizeStyle({width:a.width,height:a.height})},[n.value?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"flex h-full items-center justify-center bg-gray-100"},[vue.createElementVNode("text",{class:"text-xs text-gray-500"},"加载失败")])):(vue.openBlock(),vue.createElementBlock("image",{key:0,style:vue.normalizeStyle({width:a.width,height:a.height}),src:e.src,mode:e.mode,draggable:e.draggable,"lazy-load":e.lazyLoad,"show-menu-by-longpress":e.showMenuByLongpress,onLoad:o[0]||(o[0]=e=>t("load",e)),onError:i},null,44,["src","mode","draggable","lazy-load","show-menu-by-longpress"]))],4))}},_export_sfc=(e,t)=>{const a=e.__vccOpts||e;for(const[n,i]of t)a[n]=i;return a},_sfc_main$K={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:e,type:t,size:a,absolute:n}=this;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+a,n?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let e=this.width/2,t=10;this.isDot&&(e=5,t=5);const a=`${-e+this.offset[0]}px`,n=`${-t+this.offset[1]}px`,i={rightTop:{right:a,top:n},rightBottom:{right:a,bottom:n},leftBottom:{left:a,bottom:n},leftTop:{left:a,top:n}},s=i[this.absolute];return s||i.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:e,text:t,maxNum:a}=this;return e?"":Number(t)>a?`${a}+`:t}},methods:{onClick(){this.$emit("click")}}};function _sfc_render$p(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-badge--x"},[vue.renderSlot(e.$slots,"default",{},void 0,!0),a.text?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:vue.normalizeClass([s.classNames,"uni-badge"]),style:vue.normalizeStyle([s.positionStyle,a.customStyle,s.dotStyle]),onClick:t[0]||(t[0]=e=>s.onClick())},vue.toDisplayString(s.displayValue),7)):vue.createCommentVNode("v-if",!0)])}const __easycom_1$3=_export_sfc(_sfc_main$K,[["render",_sfc_render$p],["__scopeId","data-v-330c5106"]]),_sfc_main$J={name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}};function _sfc_render$o(e,t,a,n,i,s){return i.width?(vue.openBlock(),vue.createElementBlock("view",{key:0,style:vue.normalizeStyle("width:"+i.width+";"+(i.square?"height:"+i.width:"")),class:"uni-grid-item"},[vue.createElementVNode("view",{class:vue.normalizeClass([{"uni-grid-item--border":i.showBorder,"uni-grid-item--border-top":i.showBorder&&a.index<i.column,"uni-highlight":i.highlight},"uni-grid-item__box"]),style:vue.normalizeStyle({"border-right-color":i.borderColor,"border-bottom-color":i.borderColor,"border-top-color":i.borderColor}),onClick:t[0]||(t[0]=(...e)=>s._onClick&&s._onClick(...e))},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],6)],4)):vue.createCommentVNode("v-if",!0)}const __easycom_2$2=_export_sfc(_sfc_main$J,[["render",_sfc_render$o],["__scopeId","data-v-bdb941a1"]]),_sfc_main$I={name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,a)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}};function _sfc_render$n(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-grid-wrap"},[vue.createElementVNode("view",{id:i.elId,ref:"uni-grid",class:vue.normalizeClass(["uni-grid",{"uni-grid--border":a.showBorder}]),style:vue.normalizeStyle({"border-left-color":a.borderColor})},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],14,["id"])])}const __easycom_3$2=_export_sfc(_sfc_main$I,[["render",_sfc_render$n],["__scopeId","data-v-a5fa020b"]]),_sfc_main$H={props:{dates:{type:Array,default:()=>[]},cellHeight:{type:Number,default:75},dateActiveColor:{type:String,default:"#FE6601"},markColor:{type:String,default:"#e5e5e5"},swiperMode:{type:String,default:"open"},markDays:{type:Array,default:()=>[]}},emits:["chooseDate"],computed:{isMark(){return e=>this.markDays.some((t=>{const a=new Date(t);return"cur"==e.type&&e.year==a.getFullYear()&&e.month==a.getMonth()+1&&e.date==a.getDate()}))},itemStyles(){return e=>({height:this.cellHeight+"rpx",width:this.cellHeight+"rpx",color:"open"===this.swiperMode?"cur"===e.type?"#2C2C2C":"#959595":"#2C2C2C",backgroundColor:e.isSelected?this.dateActiveColor:this.isMark(e)?this.markColor:""})}},methods:{chooseDate(e,t){this.$emit("chooseDate",e,t)}}};function _sfc_render$m(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createCommentVNode(" 日期显示 "),vue.createElementVNode("view",{class:"date_box"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.dates,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:"calendar_date__box"},[vue.createElementVNode("view",{class:vue.normalizeClass(["calendar_date",{isSelected:e.isSelected}]),style:vue.normalizeStyle(s.itemStyles(e)),onClick:a=>s.chooseDate(e,t)},[vue.createElementVNode("view",{class:"calendar_date__number"},vue.toDisplayString(e.date),1),e.isToday?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"calendar_date__isToday",style:vue.normalizeStyle({backgroundColor:a.dateActiveColor})},null,4)):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:"calendar_date__cricle"})],14,["onClick"])])))),128))])],2112)}const DateBox=_export_sfc(_sfc_main$H,[["render",_sfc_render$m],["__scopeId","data-v-6c6fd48e"]]);function parseTime(e,t){if(0===arguments.length)return null;if(!e)return"";e.toString().indexOf("-")>0&&(e=e.replace(/-/g,"/"));const a=t||"{y}-{m}-{d} {h}:{i}:{s}";let n;"object"==typeof e?n=e:("string"==typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"==typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));const i={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{([ymdhisa])+}/g,((e,t)=>{const a=i[t];return"a"===t?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}))}function deepClone(e){if(!e&&"object"!=typeof e)throw new Error("error arguments","deepClone");const t="[object Array]"===Object.prototype.toString.call(e)?[]:{};return Object.keys(e).forEach((a=>{e[a]&&"object"==typeof e[a]?t[a]=deepClone(e[a]):t[a]=e[a]})),t}const _sfc_main$G={name:"ZsyCalendar",components:{DateBox:DateBox},props:{duration:{type:Number,default:300},cellHeight:{type:Number,default:75},dateActiveColor:{type:String,default:"#007aff"},sundayIndex:{type:Number,default:6},mode:{type:String,default:"open"},changeSetDefault:{type:Boolean,default:!0},markDays:{type:Array,default:()=>[]}},emits:["change"],data(){return{today:parseTime(new Date,"{y}-{m}-{d}"),selectedDate:null,week:[],current:1,shrinkCurrent:1,calendarSwiperDates:[],calendarSwiperShrinkDates:[],dateActive:-1,swiperByClick:!1,shrinkSwiperByClick:!1,swiperMode:this.mode,dateCache:{},emitTimer:null,dateClick:!1}},computed:{getAssignDateInfo(){return(e,t)=>{var a;return 1*(null==(a=e?this.today:this.selectedDate)?void 0:a.split("-")[t])}},showBackToTodayBtn(){return this.getAssignDateInfo(!1,0)!==this.getAssignDateInfo(!0,0)||this.getAssignDateInfo(!1,1)!==this.getAssignDateInfo(!0,1)},swiperHeight(){return e=>{const t=(this.calendarSwiperDates[this.current]||[]).length/7*(this.cellHeight+20)+"rpx",a=this.cellHeight+20+"rpx";return"open"===e?t:a}}},watch:{current(e,t){0!==e||2!==t?(2!==e||0!==t)&&e>t?this.swiperChange(1):this.swiperChange(-1):this.swiperChange(1)},shrinkCurrent(e,t){0!==e||2!==t?(2!==e||0!==t)&&e>t?this.shrinkSwiperChange(1):this.shrinkSwiperChange(-1):this.shrinkSwiperChange(1)},swiperMode(e){"close"===e&&this.initCalendarShrinkSwiperDates()},selectedDate:{deep:!0,handler(e,t){e&&(null===t||this.dateClick)?(this.emitDate(),this.dateClick=!1):(null!==this.emitTimer&&clearTimeout(this.emitTimer),this.emitTimer=setTimeout((()=>{this.emitDate()}),this.duration+200))}}},mounted(){this.init()},methods:{init(){null===this.selectedDate&&(this.selectedDate=this.today),this.initWeek(),this.initCalendarSwiperDates(),"close"===this.swiperMode&&this.initCalendarShrinkSwiperDates()},initWeek(){const e=["日","一","二","三","四","五","六"],t=this.sundayIndex<0?0:this.sundayIndex>=e.length?e.length-1:this.sundayIndex;e.unshift(...e.slice(-t)),e.length=7,this.week=e},initCalendarSwiperDates(e){const t=this.getAssignDateInfo(!1,0),a=this.getAssignDateInfo(!1,1),n=this.generateCalendar(t,a),i=this.generateCalendar(1===a?t-1:t,1===a?12:a-1),s=this.generateCalendar(12===a?t+1:t,12===a?1:a+1);0===this.current?this.calendarSwiperDates=[n,s,i]:1===this.current?this.calendarSwiperDates=[i,n,s]:2===this.current&&(this.calendarSwiperDates=[s,i,n]),this.swiperByClick=!1,e&&e()},generateCalendar(e,t){let a=[];if(this.dateCache[`${e}-${t}`])a=deepClone(this.dateCache[`${e}-${t}`]);else{const n=new Date(e,t,0).getDate(),i=["一","二","三","四","五","六","日"][new Date(e,t-1,0).getDay()],s=this.week.indexOf(i);if(0!==s){const n=new Date(e,t-1,0).getDate();for(let i=0;i<s;i++){const s={year:1===t?e-1:e,month:1===t?12:t-1,date:n-i,type:"prev"};this.theDateIsToday(s),a.unshift(s)}}for(let r=1;r<=n;r++){const n={year:e,month:t,date:r,isSelected:!1,isToday:!1,type:"cur"};this.theDateIsToday(n),a.push(n)}const o=a.length%7;if(0!==o)for(let r=1;r<=7-o;r++){const n={year:12===t?e+1:e,month:12===t?1:t+1,date:r,type:"next"};this.theDateIsToday(n),a.push(n)}this.dateCache[`${e}-${t}`]=deepClone(a)}if(e===this.getAssignDateInfo(!1,0)&&t===this.getAssignDateInfo(!1,1))for(let n=0,i=a.length;n<i;n++)if("cur"===a[n].type&&a[n].date===this.getAssignDateInfo(!1,2)){a[n].isSelected=!0,this.dateActive=n;break}return a},theDateIsToday(e){e.year+"-"+e.month+"-"+e.date==this.getAssignDateInfo(!0,0)+"-"+this.getAssignDateInfo(!0,1)+"-"+this.getAssignDateInfo(!0,2)&&(e.isToday=!0)},initCalendarShrinkSwiperDates(e){let t=null;const a=Math.floor(this.dateActive/7);if(!e||-1===e&&0!==a&&"cur"===this.calendarSwiperDates[this.current][7*(a-1)].type||1===e&&a+1!==this.calendarSwiperDates[this.current].length/7){const a=this.calendarSwiperDates[this.current];t=Math.floor(a.map((e=>"cur"===e.type?e.date:-1)).indexOf(this.getAssignDateInfo(!1,2))/7),e&&(this.calendarSwiperDates[this.current][this.dateActive].isSelected=!1,this.dateActive=7*t,this.calendarSwiperDates[this.current][this.dateActive].isSelected=!0)}else{this.calendarSwiperDates[this.current][this.dateActive].isSelected=!1;let a=this.current+e;a=a>2?0:a<0?2:a,this.current=a;const n=this.calendarSwiperDates[this.current];t=Math.floor(n.map((e=>"cur"===e.type?e.date:-1)).indexOf(this.getAssignDateInfo(!1,2))/7),this.dateActive=7*t,this.calendarSwiperDates[this.current][this.dateActive].isSelected=!0}const n=this.generateShrinkCalendar(0,t),i=this.generateShrinkCalendar(-1,t),s=this.generateShrinkCalendar(1,t);0===this.shrinkCurrent?this.calendarSwiperShrinkDates=[n,s,i]:1===this.shrinkCurrent?this.calendarSwiperShrinkDates=[i,n,s]:2===this.shrinkCurrent&&(this.calendarSwiperShrinkDates=[s,i,n])},generateShrinkCalendar(e,t){if(0===e)return this.calendarSwiperDates[this.current].slice(7*t,7*(t+1));if(-1===e){if(0===t){const e=0===this.current?2:this.current-1,t=this.calendarSwiperDates[e],a=t.length/7;return"prev"===this.calendarSwiperDates[this.current][0].type?t.slice(7*(a-2),7*(a-1)):t.slice(7*(a-1))}return this.calendarSwiperDates[this.current].slice(7*(t-1),7*t)}if(1===e){if(t===this.calendarSwiperDates[this.current].length/7-1){const e=2===this.current?0:this.current+1,t=this.calendarSwiperDates[e];return t.length,"next"===this.calendarSwiperDates[this.current][this.calendarSwiperDates[this.current].length-1].type?t.slice(7,14):t.slice(0,7)}return this.calendarSwiperDates[this.current].slice(7*(t+1),7*(t+2))}},swiperChange(e){this.swiperByClick||"open"!==this.swiperMode||this.getPrevOrNextDate(e),setTimeout((()=>{this.initCalendarSwiperDates((()=>{"close"===this.swiperMode&&this.initCalendarShrinkSwiperDates()}))}),"open"===this.swiperMode?this.duration:0)},shrinkSwiperChange(e){this.getPrevOrNextStartDate(e),setTimeout((()=>{this.initCalendarShrinkSwiperDates(e)}),this.duration)},getPrevOrNextDate(e){const t=this.getAssignDateInfo(!1,0);let a=this.getAssignDateInfo(!1,1);a+=e;const n=this.getAssignDateInfo(!1,2),i=new Date(t,a,0).getDate(),s=this.changeSetDefault?1:n>i?i:n;this.selectedDate=parseTime(new Date(t,a-1,s),"{y}-{m}-{d}")},getPrevOrNextStartDate(e){const t=this.calendarSwiperShrinkDates[this.shrinkCurrent][0];this.selectedDate=parseTime(new Date(t.year,t.month-1,t.date),"{y}-{m}-{d}")},goToDate(e=this.today){try{if(e.split("-").length<2||e.split("-").length>3)throw"参数有误";2===e.split("-").length&&(e+="-01")}catch(t){throw Error("请检查参数是否符合规范")}this.selectedDate=e,this.initCalendarSwiperDates((()=>{this.initCalendarShrinkSwiperDates()}))},chooseDate(e,t){if(e.isSelected)return!1;if("cur"!==e.type)return"prev"===e.type?this.current=0===this.current?2:this.current-1:this.current=2===this.current?0:this.current+1,this.selectedDate=parseTime(new Date(e.year,e.month-1,e.date),"{y}-{m}-{d}"),this.swiperByClick=!0,!1;this.calendarSwiperDates[this.current][this.dateActive].isSelected=!1,this.dateActive=t;const a=this.calendarSwiperDates[this.current][this.dateActive];a.isSelected=!0,this.selectedDate=parseTime(new Date(a.year,a.month-1,a.date),"{y}-{m}-{d}"),this.dateClick=!0},chooseShrinkDate(e,t){if(e.isSelected)return!1;if(this.dateClick=!0,"cur"!==e.type)return"prev"===e.type?this.current=0===this.current?2:this.current-1:this.current=2===this.current?0:this.current+1,this.dateActive=t,this.selectedDate=parseTime(new Date(e.year,e.month-1,e.date),"{y}-{m}-{d}"),!1;const a=7*Math.floor(this.dateActive/7);this.calendarSwiperDates[this.current][this.dateActive].isSelected=!1,this.dateActive=t+a;const n=this.calendarSwiperDates[this.current][this.dateActive];n.isSelected=!0,this.selectedDate=parseTime(new Date(n.year,n.month-1,n.date),"{y}-{m}-{d}")},emitDate(){if(0==this.calendarSwiperDates.length)return;const{year:e,month:t,date:a}=this.calendarSwiperDates[this.current][this.dateActive],n={selectedDate:this.selectedDate,year:e,month:t,date:a};this.$emit("change",n)}}};function _sfc_render$l(e,t,a,n,i,s){const o=vue.resolveComponent("DateBox");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createCommentVNode(" 日历滚动插件 "),vue.createElementVNode("view",{class:"zsy_calendar"},[vue.createCommentVNode(" 日历顶部信息 "),vue.renderSlot(e.$slots,"header",{date:i.selectedDate},(()=>[vue.createElementVNode("view",{class:"calendar_info"},[vue.createElementVNode("text",{class:"title"},"每日记录"),vue.createElementVNode("text",{class:"desc"}," ("+vue.toDisplayString(s.getAssignDateInfo(!1,0)===s.getAssignDateInfo(!0,0)?"":s.getAssignDateInfo(!1,0)+"年")+vue.toDisplayString(s.getAssignDateInfo(!1,1))+"月) ",1),vue.withDirectives(vue.createElementVNode("text",{class:"backToToday",style:vue.normalizeStyle({color:a.dateActiveColor}),onClick:t[0]||(t[0]=e=>s.goToDate())}," 回到今天 ",4),[[vue.vShow,s.showBackToTodayBtn]])])]),!0),vue.createCommentVNode(" 日历周数 "),vue.createElementVNode("view",{class:"calendar_week"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.week,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:"calendar_week__item"},vue.toDisplayString(e),1)))),128))]),vue.createCommentVNode(" 日历轮播 "),vue.createElementVNode("view",{class:"calendar_swiper"},[vue.createCommentVNode(" 展开情况下的日历轮播 "),"open"===i.swiperMode?(vue.openBlock(),vue.createElementBlock("swiper",{key:"normalSwiper",circular:"",style:vue.normalizeStyle({height:s.swiperHeight("open")}),current:i.current,duration:a.duration,"skip-hidden-item-layout":!0,onChange:t[1]||(t[1]=e=>i.current=e.detail.current)},[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(3,((e,t)=>vue.createElementVNode("swiper-item",{key:t,class:"swiper-item"},[vue.createVNode(o,{"mark-days":a.markDays,dates:i.calendarSwiperDates[t],"cell-height":a.cellHeight,"date-active-color":a.dateActiveColor,"swiper-mode":i.swiperMode,onChooseDate:s.chooseDate},null,8,["mark-days","dates","cell-height","date-active-color","swiper-mode","onChooseDate"])]))),64))],44,["current","duration"])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createCommentVNode(" 收缩情况下的日历轮播 "),vue.createElementVNode("swiper",{key:"shrinkSwiper",circular:"",style:vue.normalizeStyle({height:s.swiperHeight("close")}),current:i.shrinkCurrent,duration:a.duration,"skip-hidden-item-layout":!0,onChange:t[2]||(t[2]=e=>i.shrinkCurrent=e.detail.current)},[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(3,((e,t)=>vue.createElementVNode("swiper-item",{key:t,class:"swiper-item"},[vue.createVNode(o,{"mark-days":a.markDays,dates:i.calendarSwiperShrinkDates[t],"cell-height":a.cellHeight,"date-active-color":a.dateActiveColor,"swiper-mode":i.swiperMode,onChooseDate:s.chooseShrinkDate},null,8,["mark-days","dates","cell-height","date-active-color","swiper-mode","onChooseDate"])]))),64))],44,["current","duration"])],2112))]),vue.createCommentVNode(" 日历切换模式 "),vue.createElementVNode("view",{class:"calendar_toggle",onClick:t[3]||(t[3]=e=>i.swiperMode="open"===i.swiperMode?"close":"open")},[vue.createElementVNode("view",{class:vue.normalizeClass(["icon",{down:"close"===i.swiperMode}])},null,2)])])],2112)}const __easycom_4$3=_export_sfc(_sfc_main$G,[["render",_sfc_render$l],["__scopeId","data-v-cdd50c00"]]),icons={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},getVal=e=>"number"==typeof e||/^[0-9]*$/g.test(e)?e+"px":e,_sfc_main$F={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:()=>({icons:icons.glyphs}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?unescape(`%u${e.unicode}`):""},iconSize(){return getVal(this.size)}},methods:{_onClick(){this.$emit("click")}}};function _sfc_render$k(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("text",{style:vue.normalizeStyle({color:a.color,"font-size":s.iconSize}),class:vue.normalizeClass(["uni-icons",["uniui-"+a.type,a.customPrefix,a.customPrefix?a.type:""]]),onClick:t[0]||(t[0]=(...e)=>s._onClick&&s._onClick(...e))},null,6)}const __easycom_0$3=_export_sfc(_sfc_main$F,[["render",_sfc_render$k],["__scopeId","data-v-fd626ef1"]]),_sfc_main$E={name:"UniSection",emits:["click"],props:{type:{type:String,default:""},title:{type:String,required:!0,default:""},titleFontSize:{type:String,default:"14px"},titleColor:{type:String,default:"#333"},subTitle:{type:String,default:""},subTitleFontSize:{type:String,default:"12px"},subTitleColor:{type:String,default:"#999"},padding:{type:[Boolean,String],default:!1}},computed:{_padding(){return"string"==typeof this.padding?this.padding:this.padding?"10px":""}},watch:{title(e){uni.report&&""!==e&&uni.report("title",e)}},methods:{onClick(){this.$emit("click")}}};function _sfc_render$j(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-section"},[vue.createElementVNode("view",{class:"uni-section-header",onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e))},[a.type?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["uni-section-header__decoration",a.type])},null,2)):vue.renderSlot(e.$slots,"decoration",{key:1},void 0,!0),vue.createElementVNode("view",{class:"uni-section-header__content"},[vue.createElementVNode("text",{style:vue.normalizeStyle({"font-size":a.titleFontSize,color:a.titleColor}),class:vue.normalizeClass(["uni-section__content-title",{distraction:!a.subTitle}])},vue.toDisplayString(a.title),7),a.subTitle?(vue.openBlock(),vue.createElementBlock("text",{key:0,style:vue.normalizeStyle({"font-size":a.subTitleFontSize,color:a.subTitleColor}),class:"uni-section-header__content-sub"},vue.toDisplayString(a.subTitle),5)):vue.createCommentVNode("v-if",!0)]),vue.createElementVNode("view",{class:"uni-section-header__slot-right"},[vue.renderSlot(e.$slots,"right",{},void 0,!0)])]),vue.createElementVNode("view",{class:"uni-section-content",style:vue.normalizeStyle({padding:s._padding})},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],4)])}const __easycom_1$2=_export_sfc(_sfc_main$E,[["render",_sfc_render$j],["__scopeId","data-v-b442413a"]]),version="3.7.5",VERSION=version,_hasatob="function"==typeof atob,_hasbtoa="function"==typeof btoa,_hasBuffer="function"==typeof Buffer,_TD="function"==typeof TextDecoder?new TextDecoder:void 0,_TE="function"==typeof TextEncoder?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(e=>{let t={};return e.forEach(((e,a)=>t[e]=a)),t})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),_mkUriSafe=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),_tidyB64=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=e=>{let t,a,n,i,s="";const o=e.length%3;for(let r=0;r<e.length;){if((a=e.charCodeAt(r++))>255||(n=e.charCodeAt(r++))>255||(i=e.charCodeAt(r++))>255)throw new TypeError("invalid character found");t=a<<16|n<<8|i,s+=b64chs[t>>18&63]+b64chs[t>>12&63]+b64chs[t>>6&63]+b64chs[63&t]}return o?s.slice(0,o-3)+"===".substring(o):s},_btoa=_hasbtoa?e=>btoa(e):_hasBuffer?e=>Buffer.from(e,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let a=0,n=e.length;a<n;a+=4096)t.push(_fromCC.apply(null,e.subarray(a,a+4096)));return _btoa(t.join(""))},fromUint8Array=(e,t=!1)=>t?_mkUriSafe(_fromUint8Array(e)):_fromUint8Array(e),cb_utob=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?_fromCC(192|t>>>6)+_fromCC(128|63&t):_fromCC(224|t>>>12&15)+_fromCC(128|t>>>6&63)+_fromCC(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return _fromCC(240|t>>>18&7)+_fromCC(128|t>>>12&63)+_fromCC(128|t>>>6&63)+_fromCC(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=e=>e.replace(re_utob,cb_utob),_encode=_hasBuffer?e=>Buffer.from(e,"utf8").toString("base64"):_TE?e=>_fromUint8Array(_TE.encode(e)):e=>_btoa(utob(e)),encode=(e,t=!1)=>t?_mkUriSafe(_encode(e)):_encode(e),encodeURI$1=e=>encode(e,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return _fromCC(55296+(t>>>10))+_fromCC(56320+(1023&t));case 3:return _fromCC((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return _fromCC((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=e=>e.replace(re_btou,cb_btou),atobPolyfill=e=>{if(e=e.replace(/\s+/g,""),!b64re.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,a,n,i="";for(let s=0;s<e.length;)t=b64tab[e.charAt(s++)]<<18|b64tab[e.charAt(s++)]<<12|(a=b64tab[e.charAt(s++)])<<6|(n=b64tab[e.charAt(s++)]),i+=64===a?_fromCC(t>>16&255):64===n?_fromCC(t>>16&255,t>>8&255):_fromCC(t>>16&255,t>>8&255,255&t);return i},_atob=_hasatob?e=>atob(_tidyB64(e)):_hasBuffer?e=>Buffer.from(e,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?e=>_U8Afrom(Buffer.from(e,"base64")):e=>_U8Afrom(_atob(e).split("").map((e=>e.charCodeAt(0)))),toUint8Array=e=>_toUint8Array(_unURI(e)),_decode=_hasBuffer?e=>Buffer.from(e,"base64").toString("utf8"):_TD?e=>_TD.decode(_toUint8Array(e)):e=>btou(_atob(e)),_unURI=e=>_tidyB64(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),decode=e=>_decode(_unURI(e)),isValid=e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},_noEnum=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,_noEnum(t));e("fromBase64",(function(){return decode(this)})),e("toBase64",(function(e){return encode(this,e)})),e("toBase64URI",(function(){return encode(this,!0)})),e("toBase64URL",(function(){return encode(this,!0)})),e("toUint8Array",(function(){return toUint8Array(this)}))},extendUint8Array=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,_noEnum(t));e("toBase64",(function(e){return fromUint8Array(this,e)})),e("toBase64URI",(function(){return fromUint8Array(this,!0)})),e("toBase64URL",(function(){return fromUint8Array(this,!0)}))},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version:version,VERSION:VERSION,atob:_atob,atobPolyfill:atobPolyfill,btoa:_btoa,btoaPolyfill:btoaPolyfill,fromBase64:decode,toBase64:encode,encode:encode,encodeURI:encodeURI$1,encodeURL:encodeURI$1,utob:utob,btou:btou,decode:decode,isValid:isValid,fromUint8Array:fromUint8Array,toUint8Array:toUint8Array,extendString:extendString,extendUint8Array:extendUint8Array,extendBuiltins:extendBuiltins};var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},md5Exports$1={},md5$3={get exports(){return md5Exports$1},set exports(e){md5Exports$1=e}},module2;module2=md5$3,function(e){function t(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function a(e,a,n,i,s,o){return t((r=t(t(a,e),t(i,o)))<<(l=s)|r>>>32-l,n);var r,l}function n(e,t,n,i,s,o,r){return a(t&n|~t&i,e,t,s,o,r)}function i(e,t,n,i,s,o,r){return a(t&i|n&~i,e,t,s,o,r)}function s(e,t,n,i,s,o,r){return a(t^n^i,e,t,s,o,r)}function o(e,t,n,i,s,o,r){return a(n^(t|~i),e,t,s,o,r)}function r(e,a){var r,l,c,u,d;e[a>>5]|=128<<a%32,e[14+(a+64>>>9<<4)]=a;var h=1732584193,m=-271733879,p=-1732584194,f=271733878;for(r=0;r<e.length;r+=16)l=h,c=m,u=p,d=f,h=n(h,m,p,f,e[r],7,-680876936),f=n(f,h,m,p,e[r+1],12,-389564586),p=n(p,f,h,m,e[r+2],17,606105819),m=n(m,p,f,h,e[r+3],22,-1044525330),h=n(h,m,p,f,e[r+4],7,-176418897),f=n(f,h,m,p,e[r+5],12,1200080426),p=n(p,f,h,m,e[r+6],17,-1473231341),m=n(m,p,f,h,e[r+7],22,-45705983),h=n(h,m,p,f,e[r+8],7,1770035416),f=n(f,h,m,p,e[r+9],12,-1958414417),p=n(p,f,h,m,e[r+10],17,-42063),m=n(m,p,f,h,e[r+11],22,-1990404162),h=n(h,m,p,f,e[r+12],7,1804603682),f=n(f,h,m,p,e[r+13],12,-40341101),p=n(p,f,h,m,e[r+14],17,-1502002290),h=i(h,m=n(m,p,f,h,e[r+15],22,1236535329),p,f,e[r+1],5,-165796510),f=i(f,h,m,p,e[r+6],9,-1069501632),p=i(p,f,h,m,e[r+11],14,643717713),m=i(m,p,f,h,e[r],20,-373897302),h=i(h,m,p,f,e[r+5],5,-701558691),f=i(f,h,m,p,e[r+10],9,38016083),p=i(p,f,h,m,e[r+15],14,-660478335),m=i(m,p,f,h,e[r+4],20,-405537848),h=i(h,m,p,f,e[r+9],5,568446438),f=i(f,h,m,p,e[r+14],9,-1019803690),p=i(p,f,h,m,e[r+3],14,-187363961),m=i(m,p,f,h,e[r+8],20,1163531501),h=i(h,m,p,f,e[r+13],5,-1444681467),f=i(f,h,m,p,e[r+2],9,-51403784),p=i(p,f,h,m,e[r+7],14,1735328473),h=s(h,m=i(m,p,f,h,e[r+12],20,-1926607734),p,f,e[r+5],4,-378558),f=s(f,h,m,p,e[r+8],11,-2022574463),p=s(p,f,h,m,e[r+11],16,1839030562),m=s(m,p,f,h,e[r+14],23,-35309556),h=s(h,m,p,f,e[r+1],4,-1530992060),f=s(f,h,m,p,e[r+4],11,1272893353),p=s(p,f,h,m,e[r+7],16,-155497632),m=s(m,p,f,h,e[r+10],23,-1094730640),h=s(h,m,p,f,e[r+13],4,681279174),f=s(f,h,m,p,e[r],11,-358537222),p=s(p,f,h,m,e[r+3],16,-722521979),m=s(m,p,f,h,e[r+6],23,76029189),h=s(h,m,p,f,e[r+9],4,-640364487),f=s(f,h,m,p,e[r+12],11,-421815835),p=s(p,f,h,m,e[r+15],16,530742520),h=o(h,m=s(m,p,f,h,e[r+2],23,-995338651),p,f,e[r],6,-198630844),f=o(f,h,m,p,e[r+7],10,1126891415),p=o(p,f,h,m,e[r+14],15,-1416354905),m=o(m,p,f,h,e[r+5],21,-57434055),h=o(h,m,p,f,e[r+12],6,1700485571),f=o(f,h,m,p,e[r+3],10,-1894986606),p=o(p,f,h,m,e[r+10],15,-1051523),m=o(m,p,f,h,e[r+1],21,-2054922799),h=o(h,m,p,f,e[r+8],6,1873313359),f=o(f,h,m,p,e[r+15],10,-30611744),p=o(p,f,h,m,e[r+6],15,-1560198380),m=o(m,p,f,h,e[r+13],21,1309151649),h=o(h,m,p,f,e[r+4],6,-145523070),f=o(f,h,m,p,e[r+11],10,-1120210379),p=o(p,f,h,m,e[r+2],15,718787259),m=o(m,p,f,h,e[r+9],21,-343485551),h=t(h,l),m=t(m,c),p=t(p,u),f=t(f,d);return[h,m,p,f]}function l(e){var t,a="",n=32*e.length;for(t=0;t<n;t+=8)a+=String.fromCharCode(e[t>>5]>>>t%32&255);return a}function c(e){var t,a=[];for(a[(e.length>>2)-1]=void 0,t=0;t<a.length;t+=1)a[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)a[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return a}function u(e){var t,a,n="0123456789abcdef",i="";for(a=0;a<e.length;a+=1)t=e.charCodeAt(a),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function d(e){return unescape(encodeURIComponent(e))}function h(e){return function(e){return l(r(c(e),8*e.length))}(d(e))}function m(e,t){return function(e,t){var a,n,i=c(e),s=[],o=[];for(s[15]=o[15]=void 0,i.length>16&&(i=r(i,8*e.length)),a=0;a<16;a+=1)s[a]=909522486^i[a],o[a]=1549556828^i[a];return n=r(s.concat(c(t)),512+8*t.length),l(r(o.concat(n),640))}(d(e),d(t))}function p(e,t,a){return t?a?m(t,e):u(m(t,e)):a?h(e):u(h(e))}module2.exports?module2.exports=p:e.md5=p}(commonjsGlobal);const md5$2=md5Exports$1;var dayjs_minExports={},dayjs_min={get exports(){return dayjs_minExports},set exports(e){dayjs_minExports=e}};!function(e,t){e.exports=function(){var e=1e3,t=6e4,a=36e5,n="millisecond",i="second",s="minute",o="hour",r="day",l="week",c="month",u="quarter",d="year",h="date",m="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},g=function(e,t,a){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(a)+e},y={s:g,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),n=Math.floor(a/60),i=a%60;return(t<=0?"+":"-")+g(n,2,"0")+":"+g(i,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var n=12*(a.year()-t.year())+(a.month()-t.month()),i=t.clone().add(n,c),s=a-i<0,o=t.clone().add(n+(s?-1:1),c);return+(-(n+(a-i)/(s?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:r,D:h,h:o,m:s,s:i,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",w={};w[_]=v;var k=function(e){return e instanceof E},b=function e(t,a,n){var i;if(!t)return _;if("string"==typeof t){var s=t.toLowerCase();w[s]&&(i=s),a&&(w[s]=a,i=s);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var r=t.name;w[r]=t,i=r}return!n&&i&&(_=i),i||!n&&_},S=function(e,t){if(k(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new E(a)},x=y;x.l=b,x.i=k,x.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function v(e){this.$L=b(e.locale,null,!0),this.parse(e)}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,s=(n[7]||"0").substring(0,3);return a?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return x},g.isValid=function(){return!(this.$d.toString()===m)},g.isSame=function(e,t){var a=S(e);return this.startOf(t)<=a&&a<=this.endOf(t)},g.isAfter=function(e,t){return S(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<S(e)},g.$g=function(e,t,a){return x.u(e)?this[t]:this.set(a,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var a=this,n=!!x.u(t)||t,u=x.p(e),m=function(e,t){var i=x.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return n?i:i.endOf(r)},p=function(e,t){return x.w(a.toDate()[e].apply(a.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},f=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return n?m(1,0):m(31,11);case c:return n?m(1,v):m(0,v+1);case l:var _=this.$locale().weekStart||0,w=(f<_?f+7:f)-_;return m(n?g-w:g+(6-w),v);case r:case h:return p(y+"Hours",0);case o:return p(y+"Minutes",1);case s:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var a,l=x.p(e),u="set"+(this.$u?"UTC":""),m=(a={},a[r]=u+"Date",a[h]=u+"Date",a[c]=u+"Month",a[d]=u+"FullYear",a[o]=u+"Hours",a[s]=u+"Minutes",a[i]=u+"Seconds",a[n]=u+"Milliseconds",a)[l],p=l===r?this.$D+(t-this.$W):t;if(l===c||l===d){var f=this.clone().set(h,1);f.$d[m](p),f.init(),this.$d=f.set(h,Math.min(this.$D,f.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[x.p(e)]()},g.add=function(n,u){var h,m=this;n=Number(n);var p=x.p(u),f=function(e){var t=S(m);return x.w(t.date(t.date()+Math.round(e*n)),m)};if(p===c)return this.set(c,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===r)return f(1);if(p===l)return f(7);var v=(h={},h[s]=t,h[o]=a,h[i]=e,h)[p]||1,g=this.$d.getTime()+n*v;return x.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||m;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),s=this.$H,o=this.$m,r=this.$M,l=a.weekdays,c=a.months,u=function(e,a,i,s){return e&&(e[a]||e(t,n))||i[a].slice(0,s)},d=function(e){return x.s(s%12||12,e,"0")},h=a.meridiem||function(e,t,a){var n=e<12?"AM":"PM";return a?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:x.s(r+1,2,"0"),MMM:u(a.monthsShort,r,c,3),MMMM:u(c,r),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:u(a.weekdaysMin,this.$W,l,2),ddd:u(a.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:x.s(s,2,"0"),h:d(1),hh:d(2),a:h(s,o,!0),A:h(s,o,!1),m:String(o),mm:x.s(o,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:i};return n.replace(f,(function(e,t){return t||p[e]||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,h,m){var p,f=x.p(h),v=S(n),g=(v.utcOffset()-this.utcOffset())*t,y=this-v,_=x.m(this,v);return _=(p={},p[d]=_/12,p[c]=_,p[u]=_/3,p[l]=(y-g)/6048e5,p[r]=(y-g)/864e5,p[o]=y/a,p[s]=y/t,p[i]=y/e,p)[f]||y,m?_:x.a(_)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return w[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),n=b(e,t,!0);return n&&(a.$L=n),a},g.clone=function(){return x.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),C=E.prototype;return S.prototype=C,[["$ms",n],["$s",i],["$m",s],["$H",o],["$W",r],["$M",c],["$y",d],["$D",h]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,E,S),e.$i=!0),S},S.locale=b,S.isDayjs=k,S.unix=function(e){return S(1e3*e)},S.en=w[_],S.Ls=w,S.p={},S}()}(dayjs_min);const dayjs=dayjs_minExports;var utils={};!function(t){var a={};a.hexTable=new Array(256);for(var n=0;n<256;++n)a.hexTable[n]="%"+((n<16?"0":"")+n.toString(16)).toUpperCase();t.arrayToObject=function(e,t){for(var a=t.plainObjects?Object.create(null):{},n=0,i=e.length;n<i;++n)void 0!==e[n]&&(a[n]=e[n]);return a},t.merge=function(e,a,n){if(!a)return e;if("object"!=typeof a)return Array.isArray(e)?e.push(a):"object"==typeof e?e[a]=!0:e=[e,a],e;if("object"!=typeof e)return e=[e].concat(a);Array.isArray(e)&&!Array.isArray(a)&&(e=t.arrayToObject(e,n));for(var i=Object.keys(a),s=0,o=i.length;s<o;++s){var r=i[s],l=a[r];Object.prototype.hasOwnProperty.call(e,r)?e[r]=t.merge(e[r],l,n):e[r]=l}return e},t.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},t.encode=function(e){if(0===e.length)return e;"string"!=typeof e&&(e=""+e);for(var t="",n=0,i=e.length;n<i;++n){var s=e.charCodeAt(n);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?t+=e[n]:s<128?t+=a.hexTable[s]:s<2048?t+=a.hexTable[192|s>>6]+a.hexTable[128|63&s]:s<55296||s>=57344?t+=a.hexTable[224|s>>12]+a.hexTable[128|s>>6&63]+a.hexTable[128|63&s]:(++n,s=65536+((1023&s)<<10|1023&e.charCodeAt(n)),t+=a.hexTable[240|s>>18]+a.hexTable[128|s>>12&63]+a.hexTable[128|s>>6&63]+a.hexTable[128|63&s])}return t},t.compact=function(e,a){if("object"!=typeof e||null===e)return e;var n=(a=a||[]).indexOf(e);if(-1!==n)return a[n];if(a.push(e),Array.isArray(e)){for(var i=[],s=0,o=e.length;s<o;++s)void 0!==e[s]&&i.push(e[s]);return i}var r=Object.keys(e);for(s=0,o=r.length;s<o;++s){var l=r[s];e[l]=t.compact(e[l],a)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}(utils);var Utils$1=utils,internals$1={delimiter:"&",arrayPrefixGenerators:{brackets:function(e,t){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e,t){return e}},strictNullHandling:!1,skipNulls:!1,encode:!0,stringify:function(e,t,a,n,i,s,o,r){if("function"==typeof o)e=o(t,e);else if(Utils$1.isBuffer(e))e=e.toString();else if(e instanceof Date)e=e.toISOString();else if(null===e){if(n)return s?Utils$1.encode(t):t;e=""}if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return s?[Utils$1.encode(t)+"="+Utils$1.encode(e)]:[t+"="+e];var l,c=[];if(void 0===e)return c;if(Array.isArray(o))l=o;else{var u=Object.keys(e);l=r?u.sort(r):u}for(var d=0,h=l.length;d<h;++d){var m=l[d];i&&null===e[m]||(c=Array.isArray(e)?c.concat(internals$1.stringify(e[m],a(t,m),a,n,i,s,o)):c.concat(internals$1.stringify(e[m],t+"["+m+"]",a,n,i,s,o)))}return c}},stringify=function(e,t){var a,n,i=void 0===(t=t||{}).delimiter?internals$1.delimiter:t.delimiter,s="boolean"==typeof t.strictNullHandling?t.strictNullHandling:internals$1.strictNullHandling,o="boolean"==typeof t.skipNulls?t.skipNulls:internals$1.skipNulls,r="boolean"==typeof t.encode?t.encode:internals$1.encode,l="function"==typeof t.sort?t.sort:null;"function"==typeof t.filter?e=(n=t.filter)("",e):Array.isArray(t.filter)&&(a=n=t.filter);var c,u=[];if("object"!=typeof e||null===e)return"";c=t.arrayFormat in internals$1.arrayPrefixGenerators?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":"indices";var d=internals$1.arrayPrefixGenerators[c];a||(a=Object.keys(e)),l&&a.sort(l);for(var h=0,m=a.length;h<m;++h){var p=a[h];o&&null===e[p]||(u=u.concat(internals$1.stringify(e[p],p,d,s,o,r,n,l)))}return u.join(i)},Utils=utils,internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,parseValues:function(e,t){for(var a={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0,s=n.length;i<s;++i){var o,r,l=n[i],c=-1===l.indexOf("]=")?l.indexOf("="):l.indexOf("]=")+1;-1===c?(o=Utils.decode(l),r=t.strictNullHandling?null:""):(o=Utils.decode(l.slice(0,c)),r=Utils.decode(l.slice(c+1))),Object.prototype.hasOwnProperty.call(a,o)?a[o]=[].concat(a[o]).concat(r):a[o]=r}return a},parseObject:function(e,t,a){if(!e.length)return t;var n,i=e.shift();if("[]"===i)n=(n=[]).concat(internals.parseObject(e,t,a));else{n=a.plainObjects?Object.create(null):{};var s="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,o=parseInt(s,10),r=""+o;!isNaN(o)&&i!==s&&r===s&&o>=0&&a.parseArrays&&o<=a.arrayLimit?(n=[])[o]=internals.parseObject(e,t,a):n[s]=internals.parseObject(e,t,a)}return n},parseKeys:function(e,t,a){if(e){a.allowDots&&(e=e.replace(/\.([^\.\[]+)/g,"[$1]"));var n=/(\[[^\[\]]*\])/g,i=/^([^\[\]]*)/.exec(e),s=[];if(i[1]){if(!a.plainObjects&&Object.prototype.hasOwnProperty(i[1])&&!a.allowPrototypes)return;s.push(i[1])}for(var o=0;null!==(i=n.exec(e))&&o<a.depth;)++o,(a.plainObjects||!Object.prototype.hasOwnProperty(i[1].replace(/\[|\]/g,""))||a.allowPrototypes)&&s.push(i[1]);return i&&s.push("["+e.slice(i.index)+"]"),internals.parseObject(s,t,a)}}},parse$1=function(e,t){if((t=t||{}).delimiter="string"==typeof t.delimiter||Utils.isRegExp(t.delimiter)?t.delimiter:internals.delimiter,t.depth="number"==typeof t.depth?t.depth:internals.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:internals.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.allowDots="boolean"==typeof t.allowDots?t.allowDots:internals.allowDots,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:internals.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:internals.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:internals.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:internals.strictNullHandling,""===e||null==e)return t.plainObjects?Object.create(null):{};for(var a="string"==typeof e?internals.parseValues(e,t):e,n=t.plainObjects?Object.create(null):{},i=Object.keys(a),s=0,o=i.length;s<o;++s){var r=i[s],l=internals.parseKeys(r,a[r],t);n=Utils.merge(n,l,t)}return Utils.compact(n)},Stringify=stringify,Parse=parse$1,lib={stringify:Stringify,parse:Parse},isVue2=!1;
/*!
    * pinia v2.0.23
    * (c) 2022 Eduardo San Martin Morote
    * @license MIT
    */
let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var MutationType,MutationType2;function createPinia(){const e=vue.effectScope(!0),t=e.run((()=>vue.ref({})));let a=[],n=[];const i=vue.markRaw({install(e){setActivePinia(i),i._a=e,e.provide(piniaSymbol,i),e.config.globalProperties.$pinia=i,n.forEach((e=>a.push(e))),n=[]},use(e){return this._a||isVue2?a.push(e):n.push(e),this},_p:a,_a:null,_e:e,_s:new Map,state:t});return i}MutationType2=MutationType||(MutationType={}),MutationType2.direct="direct",MutationType2.patchObject="patch object",MutationType2.patchFunction="patch function";const noop=()=>{};function addSubscription(e,t,a,n=noop){e.push(t);const i=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),n())};return!a&&vue.getCurrentInstance()&&vue.onUnmounted(i),i}function triggerSubscriptions(e,...t){e.slice().forEach((e=>{e(...t)}))}function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map&&t.forEach(((t,a)=>e.set(a,t))),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const a in t){if(!t.hasOwnProperty(a))continue;const n=t[a],i=e[a];isPlainObject(i)&&isPlainObject(n)&&e.hasOwnProperty(a)&&!vue.isRef(n)&&!vue.isReactive(n)?e[a]=mergeReactiveObjects(i,n):e[a]=n}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign:assign}=Object;function isComputed(e){return!(!vue.isRef(e)||!e.effect)}function createOptionsStore(e,t,a,n){const{state:i,actions:s,getters:o}=t,r=a.state.value[e];let l;return l=createSetupStore(e,(function(){r||(a.state.value[e]=i?i():{});const t=vue.toRefs(a.state.value[e]);return assign(t,s,Object.keys(o||{}).reduce(((t,n)=>(t[n]=vue.markRaw(vue.computed((()=>{setActivePinia(a);const t=a._s.get(e);return o[n].call(t,t)}))),t)),{}))}),t,a,n,!0),l.$reset=function(){const e=i?i():{};this.$patch((t=>{assign(t,e)}))},l}function createSetupStore(e,t,a={},n,i,s){let o;const r=assign({actions:{}},a),l={deep:!0};let c,u,d,h=vue.markRaw([]),m=vue.markRaw([]);const p=n.state.value[e];let f;function v(t){let a;c=u=!1,"function"==typeof t?(t(n.state.value[e]),a={type:MutationType.patchFunction,storeId:e,events:d}):(mergeReactiveObjects(n.state.value[e],t),a={type:MutationType.patchObject,payload:t,storeId:e,events:d});const i=f=Symbol();vue.nextTick().then((()=>{f===i&&(c=!0)})),u=!0,triggerSubscriptions(h,a,n.state.value[e])}s||p||(n.state.value[e]={}),vue.ref({});const g=noop;function y(t,a){return function(){setActivePinia(n);const i=Array.from(arguments),s=[],o=[];let r;triggerSubscriptions(m,{args:i,name:t,store:w,after:function(e){s.push(e)},onError:function(e){o.push(e)}});try{r=a.apply(this&&this.$id===e?this:w,i)}catch(l){throw triggerSubscriptions(o,l),l}return r instanceof Promise?r.then((e=>(triggerSubscriptions(s,e),e))).catch((e=>(triggerSubscriptions(o,e),Promise.reject(e)))):(triggerSubscriptions(s,r),r)}}const _={_p:n,$id:e,$onAction:addSubscription.bind(null,m),$patch:v,$reset:g,$subscribe(t,a={}){const i=addSubscription(h,t,a.detached,(()=>s())),s=o.run((()=>vue.watch((()=>n.state.value[e]),(n=>{("sync"===a.flush?u:c)&&t({storeId:e,type:MutationType.direct,events:d},n)}),assign({},l,a))));return i},$dispose:function(){o.stop(),h=[],m=[],n._s.delete(e)}},w=vue.reactive(_);n._s.set(e,w);const k=n._e.run((()=>(o=vue.effectScope(),o.run((()=>t())))));for(const b in k){const t=k[b];if(vue.isRef(t)&&!isComputed(t)||vue.isReactive(t))s||(p&&shouldHydrate(t)&&(vue.isRef(t)?t.value=p[b]:mergeReactiveObjects(t,p[b])),n.state.value[e][b]=t);else if("function"==typeof t){const e=y(b,t);k[b]=e,r.actions[b]=t}}return assign(w,k),assign(vue.toRaw(w),k),Object.defineProperty(w,"$state",{get:()=>n.state.value[e],set:e=>{v((t=>{assign(t,e)}))}}),n._p.forEach((e=>{assign(w,o.run((()=>e({store:w,app:n._a,pinia:n,options:r}))))})),p&&s&&a.hydrate&&a.hydrate(w.$state,p),c=!0,u=!0,w}function defineStore(e,t,a){let n,i;const s="function"==typeof t;function o(e,a){const o=vue.getCurrentInstance();(e=e||o&&vue.inject(piniaSymbol))&&setActivePinia(e),(e=activePinia)._s.has(n)||(s?createSetupStore(n,t,i,e):createOptionsStore(n,i,e));return e._s.get(n)}return"string"==typeof e?(n=e,i=s?a:t):(i=e,n=e.id),o.$id=n,o}const getOrdinary=e=>http({url:"/user/accountlogin/ordinary",method:"POST",data:{...e,systemCode:"40"},header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"}},{withToken:!1}),getUserData=e=>http({url:"/user/account/getUserInfoByAccountPwd",method:"POST",data:{...e,systemCode:"40"},header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"}},{withToken:!1}),getUserInfo=e=>http({url:"/cdapi/app/userinfo",data:e},{withUserId:!0}),saveLastTime=e=>http({url:"/cdapi/app/update/lastlogintime",data:e}),getDealerShopList=e=>http({url:"/cdapi/shop/dealerShoplist",data:e}),getEmployeeInfo=e=>http({url:"/datasync/app/employee/getEmployeeInfo",data:e},{withToken:!1}),setEmployeeAccount=e=>http({url:"/datasync/app/employee/createOrBinding",data:e,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"}},{withToken:!1}),getUserPhone=e=>http({url:"/cdapi/app/abridge/user",data:e},{withToken:!1}),getPositionList=e=>http({url:"/cdapi/position/getPositionMap",data:e}),udpateUserInfo=e=>http({url:"/cdapi/app/user/update",data:e,method:"POST"}),getAppVersion=e=>http({url:"/consumer-admin/api/appEditionLog/list",data:e}),getCredentials=e=>http({url:"/consumer-admin/api/train/repository/v1/getroster",data:e}),updateUserInfo=e=>http({url:"/cdapi/app/user/update",data:e,method:"POST"}),getDealerBrandDetail=e=>http({url:"/cdapi/shop/brand/detailList",data:e}),getShopList=e=>http({url:"/cd-sys-web/v1/api/writeofforder/shopList",data:e}),getShopSideList=e=>http({url:"/cd-sys-web/v1/api/writeofforder/channelSideList",data:e}),editUserPassword=e=>http({url:"/cdapi/app/updatePwd",data:e,method:"POST",header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"}},{withToken:!1}),fetchSms=e=>http({url:"/cdapi/app/send",data:e,method:"POST",header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"}},{withToken:!1}),showModal=(e,{showCancel:t,title:a,...n}={})=>new Promise(((i,s)=>uni.showModal({showCancel:!0===t,title:a||"提示",...n,content:e,success(e){if(e.confirm)return i(e);s(e)},fail:s})));function mergingStep(e){let t=null;return function(...a){if(t)return t;const n=e.apply(this,a);return n instanceof Promise?(t=n,t.then((function(){t=null})).catch((function(){t=null})),t):n}}const platKey=e=>`MP_MARKETING-${e}`,isJSON=e=>/^{(.?)+}$/.test(e)||/^\[(.?)+\]$/.test(e),getStorage=(e,t=!0)=>{const a=uni.getStorageSync(t?platKey(e):e);if(isJSON(a))try{return JSON.parse(a)}catch(n){return a}return a},removeStorage=(e,t=!0)=>{uni.removeStorageSync(t?platKey(e):e)},setStorage=(e,t,a=!0)=>{e&&uni.setStorageSync(a?platKey(e):e,"object"==typeof t?JSON.stringify(t):t)},userStore=defineStore("counter",(()=>{const{VITE_APP_STORAGE_TOKEN:e}={VITE_APP_APP_NAME:"营销助手小程序",VITE_APP_NAME:"MP_MARKETING",VITE_APP_APP_ID:"wx5e25b4d85e98c0f6",VITE_APP_CLIENT_CODE:"40",VITE_APP_API_VERSION:"1.0.0",VITE_APP_STORAGE_TOKEN:"USER_TOKEN",VITE_APP_JINDIE_APP_ID:"wx32c5229c3b159178",VITE_APP_WEB_BASE_URL:"https://chandao.derucci.com:6443/web/marketing_h5",VITE_APP_CLOUD_BASE_URL:"https://cloud.derucci.com:7443",VITE_APP_SENSORS_URL:"http://sc.derucci.com:9106/sa?project=default",VITE_USER_NODE_ENV:"production",VITE_ROOT_DIR:"/Users/mac/Documents/workspace/gitlab/mp-derucci-marketing",BASE_URL:"/",MODE:"development",DEV:!1,PROD:!0},t=()=>getStorage(e),a=()=>removeStorage(e),n=vue.ref([{id:0,codes:["Dealer Boss","Professional Manager"]},{id:1,codes:["Store Manager","Virtual Store Manager"]},{id:2,codes:["Sleep Consultant","KIS Test Position Type"]},{id:3,codes:["Marketing Supervisor"]},{id:5,codes:["Regional Manager","Market Manager"]}]),i=vue.ref(null),s=vue.ref(null),o=e=>i.value=e,r=mergingStep((async(e={})=>{const{reload:a=!1}=e;if(i.value&&!a)return i.value;const{id:s}=t(),{code:r,data:l}=await getUserInfo({virtualStore:1,userId:s});return 0!=r?{}:(o((e=>{const{positionList:t,crmAccount:a,type:i}=e;if(0==t.length&&0==a&&1==i)return{...e,powers:[4]};const s=t.map((e=>{const t=n.value.find((t=>t.codes.includes(e.positionType))),a=t?t.id:4;return{...e,power:a}})),o=[...new Set(s.map((e=>e.power)))];return{...e,positionList:s,powers:o}})(l)),i.value)})),l=mergingStep((async e=>{const{code:t,data:a}=await getDealerShopList({positionStatus:1,...e});if(0==t)return s.value=a.map((e=>({...e,dealerCode:"Dealer"===e.type?e.shopNo:e.dealerNo}))),s.value}));return{userInfo:i,dealerList:s,userPowerList:n,setUserInfo:o,useUserInfoSync:r,useDealerInfoSync:l,useUserPowerSync:async()=>{var e;const t=i.value?i.value:await r();return null==(e=t.positionList.find((e=>e.crmId==t.primaryPositionId)))?void 0:e.power},useGetToken:t,useSetToken:t=>setStorage(e,t),useRemoveToken:a,useClearUserStore:()=>{i.value=null,s.value=null,a()}}})),NOT_AUTH_URL_LIST=["^/pages/common/.*","^/pages/login/.*"],TABBAR_URL_LIST=["/pages/tabbar/workPage","/pages/tabbar/studyPage","/pages/tabbar/discoveryPage","/pages/tabbar/mePage"],LOGIN_PAGE="/pages/login/loginPage",WEB_PAGE="/pages/common/webviewPage",equalPath=(e,t)=>(e=e.split("?")[0],t=t.split("?")[0],e.replace(/^\//,"")===t.replace(/^\//,"")),checkIsWebURL=e=>0===e.indexOf("http"),checkWithAuthUrl=e=>{const[t]=e.split("?");return!NOT_AUTH_URL_LIST.some((e=>new RegExp(e).test(t)))},checkTabbarUrl=e=>TABBAR_URL_LIST.some((t=>equalPath(t,e))),navigateTo=async(e,t="navigateTo",a=!0)=>{const n=checkIsWebURL(e.url),{useGetToken:i}=userStore();if(n)return uni.navigateTo({url:`${WEB_PAGE}?url=${encodeURIComponent(JSON.stringify(e.url))}`});const[s,o]=e.url.split("?"),r=Object.assign({},lib.parse(o),e.query||{});return e.url=Object.keys(r).length>0?`${s}?${lib.stringify(r)}`:s,!i()&&checkWithAuthUrl(s)&&a?(await showModal("进入该页面需要授权用户信息",{showCancel:!0}),toLoginWithRedirect(e.url)):checkTabbarUrl(s)?uni.switchTab(e):uni[t](e)},toLoginWithRedirect=e=>{const t=getCurrentPages(),a=t[t.length-1];if(equalPath(a.route,LOGIN_PAGE))return;const n=e||a.$page.fullPath;uni.navigateTo({url:`${LOGIN_PAGE}?redirect=${encodeURIComponent(n)}`})},navigatorToH5=async({path:e,query:t})=>{const{useUserInfoSync:a,useGetToken:n}=userStore(),i=n(),s=lib.stringify({...t,user_token:encodeURIComponent(JSON.stringify({id:i.id,token:i.token}))});navigateTo({url:`https://chandao.derucci.com:6443/web/marketing_h5/#${e}?${s}`})},logout=(e=null,t=!0)=>{const{useClearUserStore:a}=userStore();if(e&&showModal(e),a(),removeStorage("closeExchangeSign"),removeStorage("studyNoticeClose"),!t)return;const n=getCurrentPages(),i=n[n.length-1];formatAppLog("log","at utils/navigate.js:123","currentPage",i),equalPath(i.route,LOGIN_PAGE)||navigateTo({url:LOGIN_PAGE},"reLaunch",!1)},findMsg=e=>{if("object"==typeof e)for(let t in e){if(t.toLowerCase().includes("msg"))return e[t];if("object"!=typeof e[t])continue;const a=findMsg(e[t]);if(a)return a}else if(["string","number"].includes(typeof e))return e};class Request{constructor(){this.baseURL="",this.loadingtaskQueueCount=0,this.interceptors={request:null,response:null}}setConfig(e){this.baseURL=e.baseURL||this.baseURL}interceptorsRequest(e){this.interceptors.request=e}interceptorsResponse(e){this.interceptors.response=e}toggleLoading({isShowNavbarLoading:e,isShowLoading:t},a=!0){a?(t&&uni.showLoading({mask:!0}),(e||t)&&(this.loadingtaskQueueCount+=1)):((e||t)&&(this.loadingtaskQueueCount-=1),t&&uni.hideLoading())}async request(e,t){const{baseURL:a,interceptors:n}=this,{baseURL:i,url:s,...o}=e,{isShowNavbarLoading:r=!0,isShowLoading:l=!1,isShowError:c=!0,isShowSuccess:u=!1}=t;let d=s;/^http/.test(s)||(d=`${i||a}${d}`);let h={url:d,...o};this.toggleLoading({isShowNavbarLoading:r,isShowLoading:l},!0);try{n&&n.request&&(h=await n.request(h,{customOptions:t,requestOptions:e}));let a=await uni.request(h);n&&n.response&&(a=await n.response(a,{requestOptions:e,customOptions:t}));const i=findMsg(a);return u&&i&&uni.showToast({title:i,icon:"none"}),a}catch(m){const e=findMsg(m);return c&&e&&showModal(e),Promise.reject(m)}finally{this.toggleLoading({isShowNavbarLoading:r,isShowLoading:l},!1)}}}const{VITE_APP_CLIENT_CODE:VITE_APP_CLIENT_CODE}={VITE_APP_APP_NAME:"营销助手小程序",VITE_APP_NAME:"MP_MARKETING",VITE_APP_APP_ID:"wx5e25b4d85e98c0f6",VITE_APP_CLIENT_CODE:"40",VITE_APP_API_VERSION:"1.0.0",VITE_APP_STORAGE_TOKEN:"USER_TOKEN",VITE_APP_JINDIE_APP_ID:"wx32c5229c3b159178",VITE_APP_WEB_BASE_URL:"https://chandao.derucci.com:6443/web/marketing_h5",VITE_APP_CLOUD_BASE_URL:"https://cloud.derucci.com:7443",VITE_APP_SENSORS_URL:"http://sc.derucci.com:9106/sa?project=default",VITE_USER_NODE_ENV:"production",VITE_ROOT_DIR:"/Users/mac/Documents/workspace/gitlab/mp-derucci-marketing",BASE_URL:"/",MODE:"development",DEV:!1,PROD:!0},fetchSettoken=mergingStep((async(e,t={})=>{const{useSetToken:a}=userStore(),n=await http({url:"/user/accountlogin/settoken",method:"POST",data:{...e,systemCode:VITE_APP_CLIENT_CODE},header:{"content-type":"application/x-www-form-urlencoded"}},{withToken:!1,responseType:"data",...t});return a(n),n})),getToken=async()=>{const{useGetToken:e}=userStore();let t=e();return t&&dayjs(t.tokenDeadline).isBefore(dayjs())&&(t=await fetchSettoken({userId:null==t?void 0:t.id})),t.token},getSign=async(e=!0)=>{const{useClearUserStore:t}=userStore();let a="";if(e&&(a=await getToken(),!a))throw t(),toLoginWithRedirect(),new Error("未授权用户");const n={...a?{api_token:a}:{},api_client_code:"40",api_version:"1.0.0",api_timestamp:`${Date.now()}`};let i=lib.stringify(n);return n.api_sign=md5$2(i).toUpperCase(),n},commonRequest=new Request;commonRequest.setConfig({baseURL:"https://cloud.derucci.com:7443"}),commonRequest.interceptors.request=async(e,{customOptions:t,requestOptions:a})=>{var n;const{useUserInfoSync:i,useGetToken:s,useRemoveToken:o}=userStore(),{withToken:r=!0,withDefaultData:l=!1,withUserId:c=!1,withUserInfoFn:u=null}=t;return l&&(e.data={appId:"wx5e25b4d85e98c0f6",appType:"WECHAT_MINI_PROGRAM",...e.data}),c&&(e.data={userId:null==(n=s())?void 0:n.id,...e.data}),u&&(e.data={...u(await i()),...e.data}),e.header={...e.header,...await getSign(r)},e},commonRequest.interceptors.response=async(e,{customOptions:t,requestOptions:a})=>{var n,i,s,o;let{responseType:r="body",withRetryCount:l=2}=t;if(200===e.statusCode){if(0===(null==(n=null==e?void 0:e.data)?void 0:n.code))switch(r){case"body":return null==e?void 0:e.data;case"data":return null==(i=null==e?void 0:e.data)?void 0:i.data;default:return e}return(101===(null==(s=null==e?void 0:e.data)?void 0:s.code)||102===(null==(o=null==e?void 0:e.data)?void 0:o.code))&&l>0?(--l,await fetchSettoken({},{withUserId:!0}),http(a,{...t,withRetryCount:l})):Promise.reject(e)}let c="";switch(e.statusCode){case 404:c="资源不存在";break;case 500:c="服务器错误";break;default:c="未知错误"}return Promise.reject(`${c}，请联系管理员`)};const http=(e,t={})=>commonRequest.request(e,t),sendSms=e=>http({url:"/consumer-admin-sms/consumermanage/sms/send",data:e,method:"POST"},{withToken:!1}),validatorSmsCode=e=>http({url:"/consumer-admin-sms/consumermanage/sms/verifySnsCode",data:e,method:"POST"},{withToken:!1}),getNoticeRecord=e=>http({url:"/cd-sys-web/v3/app/notice/reading/list",data:e},{withUserId:!0}),getOpenId=e=>http({url:"/consumer-admin/v1/api/wxuser/getOpenId",data:e,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"}}),getTrainPayOrder=e=>http({url:"/cdapi/apply/pay",data:e,method:"POST"}),getLivePayOrder=e=>http({url:"/cdapi/livehistorypay/pay",data:e,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"}}),getMaterialList=e=>http({url:"/consumermanage/material/listpage",data:{pageSize:1,system_code:40,type:1,enable:0,...e}}),getWorkAchievement=(e,t)=>http({url:"/cd-sys-web/v3/app/workbench",data:e},t),getWorkPlan=(e,t)=>http({url:"/cd-sys-web/v3/app/workplan/workplanlist",data:e},t),getGoodsVerification=e=>http({url:"/cd-sys-web/v1/api/writeofforder/list",data:e}),getCardDetail=e=>http({url:"/cd-sys-web/goodsWriteOffMember/cardRoll",data:e,header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"}}),writeOff=e=>http({url:"/cd-sys-web/v1/api/writeofforder/writeoff",method:"post",data:e}),writeOffCard=e=>http({url:"/cd-sys-web/goodsWriteOffMember/save",data:e,method:"post"}),getBusinessReportForm=e=>http({url:"/cd-sys-web/v3/app/workbench/opportunitystatistic",data:e,method:"post"}),checkFeedbackReply=e=>http({headers:{"Cache-Control":"no-cache"},url:`/consumermanage/appessay/terminalFeedbackCheckIsNotView/${e}`,data:{timestamp:+new Date}});class Calendar{constructor({date:e,selected:t,startDate:a,endDate:n,range:i}={}){this.date=this.getDate(new Date),this.selected=t||[],this.startDate=a,this.endDate=n,this.range=i,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(e){this.selectDate=this.getDate(e),this._getWeek(this.selectDate.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}resetSatrtDate(e){this.startDate=e}resetEndDate(e){this.endDate=e}getDate(e,t=0,a="day"){e||(e=new Date),"object"!=typeof e&&(e=e.replace(/-/g,"/"));const n=new Date(e);switch(a){case"day":n.setDate(n.getDate()+t);break;case"month":31===n.getDate()?n.setDate(n.getDate()+t):n.setMonth(n.getMonth()+t);break;case"year":n.setFullYear(n.getFullYear()+t)}const i=n.getFullYear(),s=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,o=n.getDate()<10?"0"+n.getDate():n.getDate();return{fullDate:i+"-"+s+"-"+o,year:i,month:s,date:o,day:n.getDay()}}_getLastMonthDays(e,t){let a=[];for(let n=e;n>0;n--){const e=new Date(t.year,t.month-1,1-n).getDate();a.push({date:e,month:t.month-1,disable:!0})}return a}_currentMonthDys(e,t){let a=[],n=this.date.fullDate;for(let i=1;i<=e;i++){let e=t.year+"-"+(t.month,t.month+"-")+(i<10?"0"+i:i),s=n===e,o=this.selected&&this.selected.find((t=>{if(this.dateEqual(e,t.date))return t})),r=!0,l=!0;this.startDate&&(r=this.dateCompare(this.startDate,e)),this.endDate&&(l=this.dateCompare(e,this.endDate));let c=this.multipleStatus.data,u=!1,d=-1;this.range&&(c&&(d=c.findIndex((t=>this.dateEqual(t,e)))),-1!==d&&(u=!0));let h={fullDate:e,year:t.year,date:i,multiple:!!this.range&&u,beforeMultiple:this.isLogicBefore(e,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(e,this.multipleStatus.before,this.multipleStatus.after),month:t.month,disable:!(r&&l),isDay:s,userChecked:!1};o&&(h.extraInfo=o),a.push(h)}return a}_getNextMonthDays(e,t){let a=[];for(let n=1;n<e+1;n++)a.push({date:n,month:Number(t.month)+1,disable:!0});return a}getInfo(e){e||(e=new Date);return this.canlender.find((t=>t.fullDate===this.getDate(e).fullDate))}dateCompare(e,t){return(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/")))}dateEqual(e,t){return e=new Date(e.replace("-","/").replace("-","/")),t=new Date(t.replace("-","/").replace("-","/")),e.getTime()-t.getTime()==0}isLogicBefore(e,t,a){let n=t;return t&&a&&(n=this.dateCompare(t,a)?t:a),this.dateEqual(n,e)}isLogicAfter(e,t,a){let n=a;return t&&a&&(n=this.dateCompare(t,a)?a:t),this.dateEqual(n,e)}geDateAll(e,t){var a=[],n=e.split("-"),i=t.split("-"),s=new Date;s.setFullYear(n[0],n[1]-1,n[2]);var o=new Date;o.setFullYear(i[0],i[1]-1,i[2]);for(var r=s.getTime()-864e5,l=o.getTime()-864e5,c=r;c<=l;)c+=864e5,a.push(this.getDate(new Date(parseInt(c))).fullDate);return a}setMultiple(e){let{before:t,after:a}=this.multipleStatus;if(this.range){if(t&&a){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else t?(this.multipleStatus.after=e,this.dateCompare(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.lastHover=!1);this._getWeek(e)}}setHoverMultiple(e){let{before:t,after:a}=this.multipleStatus;this.range&&(this.lastHover||(t?(this.multipleStatus.after=e,this.dateCompare(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this._getWeek(e)))}setDefaultMultiple(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(this.dateCompare(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this._getWeek(t)):(this.multipleStatus.data=this.geDateAll(t,e),this._getWeek(e)))}_getWeek(e){const{fullDate:t,year:a,month:n,date:i,day:s}=this.getDate(e);let o=new Date(a,n-1,1).getDay(),r=new Date(a,n,0).getDate(),l={lastMonthDays:this._getLastMonthDays(o,this.getDate(e)),currentMonthDys:this._currentMonthDys(r,this.getDate(e)),nextMonthDays:[],weeks:[]},c=[];const u=42-(l.lastMonthDays.length+l.currentMonthDys.length);l.nextMonthDays=this._getNextMonthDays(u,this.getDate(e)),c=c.concat(l.lastMonthDays,l.currentMonthDys,l.nextMonthDays);let d={};for(let h=0;h<c.length;h++)h%7==0&&(d[parseInt(h/7)]=new Array(7)),d[parseInt(h/7)][h%7]=c[h];this.canlender=c,this.weeks=d}}const _sfc_main$D={props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1},checkHover:{type:Boolean,default:!1}},methods:{choiceDate(e){this.$emit("change",e)},handleMousemove(e){this.$emit("handleMouse",e)}}};function _sfc_render$i(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":a.weeks.disable,"uni-calendar-item--before-checked-x":a.weeks.beforeMultiple,"uni-calendar-item--multiple":a.weeks.multiple,"uni-calendar-item--after-checked-x":a.weeks.afterMultiple}]),onClick:t[0]||(t[0]=e=>s.choiceDate(a.weeks)),onMouseenter:t[1]||(t[1]=e=>s.handleMousemove(a.weeks))},[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-calendar-item__weeks-box-item",{"uni-calendar-item--checked":a.calendar.fullDate===a.weeks.fullDate&&(a.calendar.userChecked||!a.checkHover),"uni-calendar-item--checked-range-text":a.checkHover,"uni-calendar-item--before-checked":a.weeks.beforeMultiple,"uni-calendar-item--multiple":a.weeks.multiple,"uni-calendar-item--after-checked":a.weeks.afterMultiple,"uni-calendar-item--disable":a.weeks.disable}])},[a.selected&&a.weeks.extraInfo?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"uni-calendar-item__weeks-box-circle"})):vue.createCommentVNode("v-if",!0),vue.createElementVNode("text",{class:"uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text"},vue.toDisplayString(a.weeks.date),1)],2),vue.createElementVNode("view",{class:vue.normalizeClass({"uni-calendar-item--isDay":a.weeks.isDay})},null,2)],34)}const calendarItem=_export_sfc(_sfc_main$D,[["render",_sfc_render$i],["__scopeId","data-v-65c14ba2"]]),isObject=e=>null!==e&&"object"==typeof e,defaultDelimiters=["{","}"];class BaseFormatter{constructor(){this._caches=Object.create(null)}interpolate(e,t,a=defaultDelimiters){if(!t)return[e];let n=this._caches[e];return n||(n=parse(e,a),this._caches[e]=n),compile(n,t)}}const RE_TOKEN_LIST_VALUE=/^(?:\d)+/,RE_TOKEN_NAMED_VALUE=/^(?:\w)+/;function parse(e,[t,a]){const n=[];let i=0,s="";for(;i<e.length;){let o=e[i++];if(o===t){s&&n.push({type:"text",value:s}),s="";let t="";for(o=e[i++];void 0!==o&&o!==a;)t+=o,o=e[i++];const r=o===a,l=RE_TOKEN_LIST_VALUE.test(t)?"list":r&&RE_TOKEN_NAMED_VALUE.test(t)?"named":"unknown";n.push({value:t,type:l})}else s+=o}return s&&n.push({type:"text",value:s}),n}function compile(e,t){const a=[];let n=0;const i=Array.isArray(t)?"list":isObject(t)?"named":"unknown";if("unknown"===i)return a;for(;n<e.length;){const s=e[n];switch(s.type){case"text":a.push(s.value);break;case"list":a.push(t[parseInt(s.value,10)]);break;case"named":"named"===i&&a.push(t[s.value])}n++}return a}const LOCALE_ZH_HANS="zh-Hans",LOCALE_ZH_HANT="zh-Hant",LOCALE_EN="en",LOCALE_FR="fr",LOCALE_ES="es",hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty.call(e,t),defaultFormatter=new BaseFormatter;function include(e,t){return!!t.find((t=>-1!==e.indexOf(t)))}function startsWith(e,t){return t.find((t=>0===e.indexOf(t)))}function normalizeLocale(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return LOCALE_ZH_HANS;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?LOCALE_ZH_HANS:e.indexOf("-hant")>-1||include(e,["-tw","-hk","-mo","-cht"])?LOCALE_ZH_HANT:LOCALE_ZH_HANS;let a=[LOCALE_EN,LOCALE_FR,LOCALE_ES];t&&Object.keys(t).length>0&&(a=Object.keys(t));const n=startsWith(e,a);return n||void 0}class I18n{constructor({locale:e,fallbackLocale:t,messages:a,watcher:n,formater:i}){this.locale=LOCALE_EN,this.fallbackLocale=LOCALE_EN,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=i||defaultFormatter,this.messages=a||{},this.setLocale(e||LOCALE_EN),n&&this.watchLocale(n)}setLocale(e){const t=this.locale;this.locale=normalizeLocale(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,a=!0){const n=this.messages[e];n?a?Object.assign(n,t):Object.keys(t).forEach((e=>{hasOwn(n,e)||(n[e]=t[e])})):this.messages[e]=t}f(e,t,a){return this.formater.interpolate(e,t,a).join("")}t(e,t,a){let n=this.message;return"string"==typeof t?(t=normalizeLocale(t,this.messages))&&(n=this.messages[t]):a=t,hasOwn(n,e)?this.formater.interpolate(n[e],a).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function watchAppLocale(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}function getDefaultLocale(){return"undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():LOCALE_EN}function initVueI18n(e,t={},a,n){"string"!=typeof e&&([e,t]=[t,e]),"string"!=typeof e&&(e=getDefaultLocale()),"string"!=typeof a&&(a="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||LOCALE_EN);const i=new I18n({locale:e,fallbackLocale:a,messages:t,watcher:n});let s=(e,t)=>{if("function"!=typeof getApp)s=function(e,t){return i.t(e,t)};else{let e=!1;s=function(t,a){const n=getApp().$vm;return n&&(n.$locale,e||(e=!0,watchAppLocale(n,i))),i.t(t,a)}}return s(e,t)};return{i18n:i,f:(e,t,a)=>i.f(e,t,a),t:(e,t)=>s(e,t),add:(e,t,a=!0)=>i.add(e,t,a),watch:e=>i.watchLocale(e),getLocale:()=>i.getLocale(),setLocale:e=>i.setLocale(e)}}const en$3={"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select datetime","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-datetime-picker.year":"-","uni-datetime-picker.month":"","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN","uni-calender.confirm":"confirm"},zhHans$3={"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"确认"},zhHant$3={"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"確認"},messages$3={en:en$3,"zh-Hans":zhHans$3,"zh-Hant":zhHant$3},{t:t$6}=initVueI18n(messages$3),_sfc_main$C={name:"UniDatetimePicker",components:{},data:()=>({indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:{},dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{value:{handler(e,t){e?(this.parseValue(this.fixIosDateFormat(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e){"date"===e?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):"time"===e?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e){this.parseDatetimeRange(this.fixIosDateFormat(e),"start")},immediate:!0},end:{handler(e){this.parseDatetimeRange(this.fixIosDateFormat(e),"end")},immediate:!0},months(e){this.checkValue("month",this.month,e)},days(e){this.checkValue("day",this.day,e)},hours(e){this.checkValue("hour",this.hour,e)},minutes(e){this.checkValue("minute",this.minute,e)},seconds(e){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){return"datetime"===this.type?this.currentDateIsStart?this.startHour:0:"time"===this.type?this.startHour:void 0},maxHour(){return"datetime"===this.type?this.currentDateIsEnd?this.endHour:23:"time"===this.type?this.endHour:void 0},minMinute(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0:"time"===this.type?this.hour===this.startHour?this.startMinute:0:void 0},maxMinute(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59:"time"===this.type?this.hour===this.endHour?this.endMinute:59:void 0},minSecond(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:"time"===this.type?this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:void 0},maxSecond(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:"time"===this.type?this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:void 0},selectTimeText:()=>t$6("uni-datetime-picker.selectTime"),okText:()=>t$6("uni-datetime-picker.ok"),clearText:()=>t$6("uni-datetime-picker.clear"),cancelText:()=>t$6("uni-datetime-picker.cancel")},mounted(){},methods:{lessThanTen:e=>e<10?"0"+e:e,parseTimeType(e){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e,t,a){let n=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),a=this.superTimeStamp(a),n=t&&a?e<t?new Date(t):e>a?new Date(a):new Date(e):t&&!a?t<=e?new Date(e):new Date(t):!t&&a?e<=a?new Date(e):new Date(a):new Date(e),n},superTimeStamp(e){let t="";if("time"===this.type&&e&&"string"==typeof e){const e=new Date;t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "}return Number(e)&&NaN!==typeof e&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e){if(e){if("time"===this.type&&"string"==typeof e)this.parseTimeType(e);else{let t=null;t=new Date(e),"time"!==this.type&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),"date"!==this.type&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)}},parseDatetimeRange(e,t){if(!e)return"start"===t&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),void("end"===t&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59));if("time"===this.type){const a=e.split(":");this[t+"Hour"]=Number(a[0]),this[t+"Minute"]=Number(a[1]),this[t+"Second"]=Number(a[2])}else{if(!e)return void("start"===t?this.startYear=this.year-60:this.endYear=this.year+60);Number(e)&&NaN!==Number(e)&&(e=parseInt(e));const a=/[0-9]:[0-9]/;"datetime"!==this.type||"end"!==t||"string"!=typeof e||a.test(e)||(e+=" 23:59:59");const n=new Date(e);this[t+"Year"]=n.getFullYear(),this[t+"Month"]=n.getMonth()+1,this[t+"Day"]=n.getDate(),"datetime"===this.type&&(this[t+"Hour"]=n.getHours(),this[t+"Minute"]=n.getMinutes(),this[t+"Second"]=n.getSeconds())}},getCurrentRange(e){const t=[];for(let a=this["min"+this.capitalize(e)];a<=this["max"+this.capitalize(e)];a++)t.push(a);return t},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),checkValue(e,t,a){-1===a.indexOf(t)&&(this[e]=a[0])},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),fixIosDateFormat:e=>("string"==typeof e&&(e=e.replace(/-/g,"/")),e),createTimeStamp(e){if(e)return"number"==typeof e?e:(e=e.replace(/-/g,"/"),"date"===this.type&&(e+=" 00:00:00"),Date.parse(e))},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),"date"===this.type?e:"time"===this.type?t:e+" "+t},initTime(e=!0){this.time=this.createDomSting(),e&&("timestamp"===this.returnType&&"time"!==this.type?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time)))},bindDateChange(e){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return;const e=this.fixIosDateFormat(this.value);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}};function _sfc_render$h(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-datetime-picker"},[vue.createElementVNode("view",{onClick:t[0]||(t[0]=(...e)=>s.initTimePicker&&s.initTimePicker(...e))},[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-datetime-picker-timebox-pointer",{"uni-datetime-picker-disabled":a.disabled,"uni-datetime-picker-timebox":a.border}])},[vue.createElementVNode("text",{class:"uni-datetime-picker-text"},vue.toDisplayString(i.time),1),i.time?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-datetime-picker-time"},[vue.createElementVNode("text",{class:"uni-datetime-picker-text"},vue.toDisplayString(s.selectTimeText),1)]))],2)]),!0)]),i.visible?(vue.openBlock(),vue.createElementBlock("view",{key:0,id:"mask",class:"uni-datetime-picker-mask",onClick:t[1]||(t[1]=(...e)=>s.tiggerTimePicker&&s.tiggerTimePicker(...e))})):vue.createCommentVNode("v-if",!0),i.visible?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:vue.normalizeClass(["uni-datetime-picker-popup",[i.dateShow&&i.timeShow?"":"fix-nvue-height"]]),style:vue.normalizeStyle(i.fixNvueBug)},[vue.createElementVNode("view",{class:"uni-title"},[vue.createElementVNode("text",{class:"uni-datetime-picker-text"},vue.toDisplayString(s.selectTimeText),1)]),i.dateShow?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-datetime-picker__container-box"},[vue.createElementVNode("picker-view",{class:"uni-datetime-picker-view","indicator-style":i.indicatorStyle,value:s.ymd,onChange:t[2]||(t[2]=(...e)=>s.bindDateChange&&s.bindDateChange(...e))},[vue.createElementVNode("picker-view-column",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.years,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-datetime-picker-item",key:t},[vue.createElementVNode("text",{class:"uni-datetime-picker-item"},vue.toDisplayString(s.lessThanTen(e)),1)])))),128))]),vue.createElementVNode("picker-view-column",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.months,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-datetime-picker-item",key:t},[vue.createElementVNode("text",{class:"uni-datetime-picker-item"},vue.toDisplayString(s.lessThanTen(e)),1)])))),128))]),vue.createElementVNode("picker-view-column",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.days,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-datetime-picker-item",key:t},[vue.createElementVNode("text",{class:"uni-datetime-picker-item"},vue.toDisplayString(s.lessThanTen(e)),1)])))),128))])],40,["indicator-style","value"]),vue.createCommentVNode(" 兼容 nvue 不支持伪类 "),vue.createElementVNode("text",{class:"uni-datetime-picker-sign sign-left"},"-"),vue.createElementVNode("text",{class:"uni-datetime-picker-sign sign-right"},"-")])):vue.createCommentVNode("v-if",!0),i.timeShow?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-datetime-picker__container-box"},[vue.createElementVNode("picker-view",{class:vue.normalizeClass(["uni-datetime-picker-view",[a.hideSecond?"time-hide-second":""]]),"indicator-style":i.indicatorStyle,value:s.hms,onChange:t[3]||(t[3]=(...e)=>s.bindTimeChange&&s.bindTimeChange(...e))},[vue.createElementVNode("picker-view-column",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.hours,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-datetime-picker-item",key:t},[vue.createElementVNode("text",{class:"uni-datetime-picker-item"},vue.toDisplayString(s.lessThanTen(e)),1)])))),128))]),vue.createElementVNode("picker-view-column",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.minutes,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-datetime-picker-item",key:t},[vue.createElementVNode("text",{class:"uni-datetime-picker-item"},vue.toDisplayString(s.lessThanTen(e)),1)])))),128))]),a.hideSecond?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("picker-view-column",{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.seconds,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-datetime-picker-item",key:t},[vue.createElementVNode("text",{class:"uni-datetime-picker-item"},vue.toDisplayString(s.lessThanTen(e)),1)])))),128))]))],42,["indicator-style","value"]),vue.createCommentVNode(" 兼容 nvue 不支持伪类 "),vue.createElementVNode("text",{class:vue.normalizeClass(["uni-datetime-picker-sign",[a.hideSecond?"sign-center":"sign-left"]])},":",2),a.hideSecond?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"uni-datetime-picker-sign sign-right"},":"))])):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:"uni-datetime-picker-btn"},[vue.createElementVNode("view",{onClick:t[4]||(t[4]=(...e)=>s.clearTime&&s.clearTime(...e))},[vue.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},vue.toDisplayString(s.clearText),1)]),vue.createElementVNode("view",{class:"uni-datetime-picker-btn-group"},[vue.createElementVNode("view",{class:"uni-datetime-picker-cancel",onClick:t[5]||(t[5]=(...e)=>s.tiggerTimePicker&&s.tiggerTimePicker(...e))},[vue.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},vue.toDisplayString(s.cancelText),1)]),vue.createElementVNode("view",{onClick:t[6]||(t[6]=(...e)=>s.setTime&&s.setTime(...e))},[vue.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},vue.toDisplayString(s.okText),1)])])])],6)):vue.createCommentVNode("v-if",!0)])}const timePicker=_export_sfc(_sfc_main$C,[["render",_sfc_render$h],["__scopeId","data-v-3e54df44"]]),{t:t$5}=initVueI18n(messages$3),_sfc_main$B={components:{calendarItem:calendarItem,timePicker:timePicker},props:{date:{type:String,default:""},defTime:{type:[String,Object],default:""},selectableTimes:{type:[Object],default:()=>({})},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1},startDate:{type:String,default:""},endDate:{type:String,default:""},range:{type:Boolean,default:!1},typeHasTime:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},left:{type:Boolean,default:!0},right:{type:Boolean,default:!0},checkHover:{type:Boolean,default:!0},hideSecond:{type:[Boolean],default:!1},pleStatus:{type:Object,default:()=>({before:"",after:"",data:[],fulldate:""})}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:"",aniMaskShow:!1,firstEnter:!0,time:"",timeRange:{startTime:"",endTime:""},tempSingleDate:"",tempRange:{before:"",after:""}}),watch:{date:{immediate:!0,handler(e,t){this.range||(this.tempSingleDate=e,setTimeout((()=>{this.init(e)}),100))}},defTime:{immediate:!0,handler(e,t){this.range?(this.timeRange.startTime=e.start,this.timeRange.endTime=e.end):this.time=e}},startDate(e){this.cale.resetSatrtDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},endDate(e){this.cale.resetEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},selected(e){this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks},pleStatus:{immediate:!0,handler(e,t){const{before:a,after:n,fulldate:i,which:s}=e;this.tempRange.before=a,this.tempRange.after=n,setTimeout((()=>{if(i)if(this.cale.setHoverMultiple(i),a&&n){if(this.cale.lastHover=!0,this.rangeWithinMonth(n,a))return;this.setDate(a)}else this.cale.setMultiple(i),this.setDate(this.nowDate.fullDate),this.calendar.fullDate="",this.cale.lastHover=!1;else this.cale.setDefaultMultiple(a,n),"left"===s?(this.setDate(a),this.weeks=this.cale.weeks):(this.setDate(n),this.weeks=this.cale.weeks),this.cale.lastHover=!0}),16)}}},computed:{reactStartTime(){return(this.range?this.tempRange.before:this.calendar.fullDate)===this.startDate?this.selectableTimes.start:""},reactEndTime(){return(this.range?this.tempRange.after:this.calendar.fullDate)===this.endDate?this.selectableTimes.end:""},selectDateText:()=>t$5("uni-datetime-picker.selectDate"),startDateText(){return this.startPlaceholder||t$5("uni-datetime-picker.startDate")},endDateText(){return this.endPlaceholder||t$5("uni-datetime-picker.endDate")},okText:()=>t$5("uni-datetime-picker.ok"),yearText:()=>t$5("uni-datetime-picker.year"),monthText:()=>t$5("uni-datetime-picker.month"),MONText:()=>t$5("uni-calender.MON"),TUEText:()=>t$5("uni-calender.TUE"),WEDText:()=>t$5("uni-calender.WED"),THUText:()=>t$5("uni-calender.THU"),FRIText:()=>t$5("uni-calender.FRI"),SATText:()=>t$5("uni-calender.SAT"),SUNText:()=>t$5("uni-calender.SUN"),confirmText:()=>t$5("uni-calender.confirm")},created(){this.cale=new Calendar({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range}),this.init(this.date)},methods:{leaveCale(){this.firstEnter=!0},handleMouse(e){if(e.disable)return;if(this.cale.lastHover)return;let{before:t,after:a}=this.cale.multipleStatus;t&&(this.calendar=e,this.cale.setHoverMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.firstEnter&&(this.$emit("firstEnterCale",this.cale.multipleStatus),this.firstEnter=!1))},rangeWithinMonth(e,t){const[a,n]=e.split("-"),[i,s]=t.split("-");return a===i&&n===s},clean(){this.close()},maskClick(){this.$emit("maskClose")},clearCalender(){this.range?(this.timeRange.startTime="",this.timeRange.endTime="",this.tempRange.before="",this.tempRange.after="",this.cale.multipleStatus.before="",this.cale.multipleStatus.after="",this.cale.multipleStatus.data=[],this.cale.lastHover=!1):(this.time="",this.tempSingleDate=""),this.calendar.fullDate="",this.setDate()},bindDateChange(e){const t=e.detail.value+"-1";this.init(t)},init(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.calendar=this.cale.getInfo(e)},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(){this.insert&&this.setEmit("change")},monthSwitch(){let{year:e,month:t}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(t)})},setEmit(e){let{year:t,month:a,date:n,fullDate:i,lunar:s,extraInfo:o}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:t,month:a,date:n,time:this.time,timeRange:this.timeRange,fulldate:i,lunar:s,extraInfo:o||{}})},choiceDate(e){if(e.disable)return;this.calendar=e,this.calendar.userChecked=!0,this.cale.setMultiple(this.calendar.fullDate,!0),this.weeks=this.cale.weeks,this.tempSingleDate=this.calendar.fullDate,this.cale.multipleStatus.before;const t=new Date(this.cale.multipleStatus.before).getTime(),a=new Date(this.cale.multipleStatus.after).getTime();t>a&&a?(this.tempRange.before=this.cale.multipleStatus.after,this.tempRange.after=this.cale.multipleStatus.before):(this.tempRange.before=this.cale.multipleStatus.before,this.tempRange.after=this.cale.multipleStatus.after),this.change()},backtoday(){let e=this.cale.getDate(new Date).fullDate;this.init(e),this.change()},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),pre(){const e=this.cale.getDate(this.nowDate.fullDate,-1,"month").fullDate;this.setDate(e),this.monthSwitch()},next(){const e=this.cale.getDate(this.nowDate.fullDate,1,"month").fullDate;this.setDate(e),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}};function _sfc_render$g(e,t,a,n,i,s){const o=vue.resolveComponent("calendar-item"),r=vue.resolveComponent("time-picker"),l=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-calendar",onMouseleave:t[9]||(t[9]=(...e)=>s.leaveCale&&s.leaveCale(...e))},[!a.insert&&i.show?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["uni-calendar__mask",{"uni-calendar--mask-show":i.aniMaskShow}]),onClick:t[0]||(t[0]=e=>{s.clean(),s.maskClick()})},null,2)):vue.createCommentVNode("v-if",!0),a.insert||i.show?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:vue.normalizeClass(["uni-calendar__content",{"uni-calendar--fixed":!a.insert,"uni-calendar--ani-show":i.aniMaskShow,"uni-calendar__content-mobile":i.aniMaskShow}])},[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-calendar__header",{"uni-calendar__header-mobile":!a.insert}])},[a.left?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-calendar__header-btn-box",onClick:t[1]||(t[1]=vue.withModifiers(((...e)=>s.pre&&s.pre(...e)),["stop"]))},[vue.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--left"})])):vue.createCommentVNode("v-if",!0),vue.createElementVNode("picker",{mode:"date",value:a.date,fields:"month",onChange:t[2]||(t[2]=(...e)=>s.bindDateChange&&s.bindDateChange(...e))},[vue.createElementVNode("text",{class:"uni-calendar__header-text"},vue.toDisplayString((i.nowDate.year||"")+s.yearText+(i.nowDate.month||"")+s.monthText),1)],40,["value"]),a.right?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-calendar__header-btn-box",onClick:t[3]||(t[3]=vue.withModifiers(((...e)=>s.next&&s.next(...e)),["stop"]))},[vue.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--right"})])):vue.createCommentVNode("v-if",!0),a.insert?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"dialog-close",onClick:t[4]||(t[4]=(...e)=>s.clean&&s.clean(...e))},[vue.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),vue.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})])),vue.createCommentVNode(' <text class="uni-calendar__backtoday" @click="backtoday">回到今天</text> ')],2),vue.createElementVNode("view",{class:"uni-calendar__box"},[a.showMonth?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-calendar__box-bg"},[vue.createElementVNode("text",{class:"uni-calendar__box-bg-text"},vue.toDisplayString(i.nowDate.month),1)])):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:"uni-calendar__weeks",style:{"padding-bottom":"7px"}},[vue.createElementVNode("view",{class:"uni-calendar__weeks-day"},[vue.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},vue.toDisplayString(s.SUNText),1)]),vue.createElementVNode("view",{class:"uni-calendar__weeks-day"},[vue.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},vue.toDisplayString(s.MONText),1)]),vue.createElementVNode("view",{class:"uni-calendar__weeks-day"},[vue.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},vue.toDisplayString(s.TUEText),1)]),vue.createElementVNode("view",{class:"uni-calendar__weeks-day"},[vue.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},vue.toDisplayString(s.WEDText),1)]),vue.createElementVNode("view",{class:"uni-calendar__weeks-day"},[vue.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},vue.toDisplayString(s.THUText),1)]),vue.createElementVNode("view",{class:"uni-calendar__weeks-day"},[vue.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},vue.toDisplayString(s.FRIText),1)]),vue.createElementVNode("view",{class:"uni-calendar__weeks-day"},[vue.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},vue.toDisplayString(s.SATText),1)])]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.weeks,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-calendar__weeks",key:t},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"uni-calendar__weeks-item",key:t},[vue.createVNode(o,{class:"uni-calendar-item--hook",weeks:e,calendar:i.calendar,selected:a.selected,lunar:a.lunar,checkHover:a.range,onChange:s.choiceDate,onHandleMouse:s.handleMouse},null,8,["weeks","calendar","selected","lunar","checkHover","onChange","onHandleMouse"])])))),128))])))),128))]),a.insert||a.range||!a.typeHasTime?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-date-changed uni-calendar--fixed-top",style:{padding:"0 80px"}},[vue.createElementVNode("view",{class:"uni-date-changed--time-date"},vue.toDisplayString(i.tempSingleDate?i.tempSingleDate:s.selectDateText),1),vue.createVNode(r,{type:"time",start:s.reactStartTime,end:s.reactEndTime,modelValue:i.time,"onUpdate:modelValue":t[5]||(t[5]=e=>i.time=e),disabled:!i.tempSingleDate,border:!1,"hide-second":a.hideSecond,class:"time-picker-style"},null,8,["start","end","modelValue","disabled","hide-second"])])),!a.insert&&a.range&&a.typeHasTime?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-date-changed uni-calendar--fixed-top"},[vue.createElementVNode("view",{class:"uni-date-changed--time-start"},[vue.createElementVNode("view",{class:"uni-date-changed--time-date"},vue.toDisplayString(i.tempRange.before?i.tempRange.before:s.startDateText),1),vue.createVNode(r,{type:"time",start:s.reactStartTime,modelValue:i.timeRange.startTime,"onUpdate:modelValue":t[6]||(t[6]=e=>i.timeRange.startTime=e),border:!1,"hide-second":a.hideSecond,disabled:!i.tempRange.before,class:"time-picker-style"},null,8,["start","modelValue","hide-second","disabled"])]),vue.createVNode(l,{type:"arrowthinright",color:"#999",style:{"line-height":"50px"}}),vue.createElementVNode("view",{class:"uni-date-changed--time-end"},[vue.createElementVNode("view",{class:"uni-date-changed--time-date"},vue.toDisplayString(i.tempRange.after?i.tempRange.after:s.endDateText),1),vue.createVNode(r,{type:"time",end:s.reactEndTime,modelValue:i.timeRange.endTime,"onUpdate:modelValue":t[7]||(t[7]=e=>i.timeRange.endTime=e),border:!1,"hide-second":a.hideSecond,disabled:!i.tempRange.after,class:"time-picker-style"},null,8,["end","modelValue","hide-second","disabled"])])])):vue.createCommentVNode("v-if",!0),a.insert?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"uni-date-changed uni-date-btn--ok"},[vue.createCommentVNode(' <view class="uni-calendar__header-btn-box">\n\t\t\t\t\t<text class="uni-calendar__button-text uni-calendar--fixed-width">{{okText}}</text>\n\t\t\t\t</view> '),vue.createElementVNode("view",{class:"uni-datetime-picker--btn",onClick:t[8]||(t[8]=(...e)=>s.confirm&&s.confirm(...e))},vue.toDisplayString(s.confirmText),1)]))],2)):vue.createCommentVNode("v-if",!0)],32)}const calendar=_export_sfc(_sfc_main$B,[["render",_sfc_render$g],["__scopeId","data-v-1355c710"]]),{t:t$4}=initVueI18n(messages$3),_sfc_main$A={name:"UniDatetimePicker",options:{virtualHost:!0},components:{calendar:calendar,timePicker:timePicker},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},data:()=>({isRange:!1,hasTime:!1,mobileRange:!1,singleVal:"",tempSingleDate:"",defSingleDate:"",time:"",caleRange:{startDate:"",startTime:"",endDate:"",endTime:""},range:{startDate:"",endDate:""},tempRange:{startDate:"",startTime:"",endDate:"",endTime:""},startMultipleStatus:{before:"",after:"",data:[],fulldate:""},endMultipleStatus:{before:"",after:"",data:[],fulldate:""},visible:!1,popup:!1,popover:null,isEmitValue:!1,isPhone:!1,isFirstShow:!0}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number,Array,Date],default:""},modelValue:{type:[String,Number,Array,Date],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},placeholder:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},rangeSeparator:{type:String,default:"-"},border:{type:[Boolean],default:!0},disabled:{type:[Boolean],default:!1},clearIcon:{type:[Boolean],default:!0},hideSecond:{type:[Boolean],default:!1}},watch:{type:{immediate:!0,handler(e,t){-1!==e.indexOf("time")?this.hasTime=!0:this.hasTime=!1,-1!==e.indexOf("range")?this.isRange=!0:this.isRange=!1}},modelValue:{immediate:!0,handler(e,t){this.isEmitValue?this.isEmitValue=!1:this.initPicker(e)}},start:{immediate:!0,handler(e,t){if(!e)return;const{defDate:a,defTime:n}=this.parseDate(e);this.caleRange.startDate=a,this.hasTime&&(this.caleRange.startTime=n)}},end:{immediate:!0,handler(e,t){if(!e)return;const{defDate:a,defTime:n}=this.parseDate(e);this.caleRange.endDate=a,this.hasTime&&(this.caleRange.endTime=n)}}},computed:{reactStartTime(){return(this.isRange?this.tempRange.startDate:this.tempSingleDate)===this.caleRange.startDate?this.caleRange.startTime:""},reactEndTime(){return(this.isRange?this.tempRange.endDate:this.tempSingleDate)===this.caleRange.endDate?this.caleRange.endTime:""},reactMobDefTime(){const e={start:this.tempRange.startTime,end:this.tempRange.endTime};return this.isRange?e:this.time},mobSelectableTime(){return{start:this.caleRange.startTime,end:this.caleRange.endTime}},datePopupWidth(){return this.isRange?653:301},singlePlaceholderText(){return this.placeholder||("date"===this.type?this.selectDateText:t$4("uni-datetime-picker.selectDateTime"))},startPlaceholderText(){return this.startPlaceholder||this.startDateText},endPlaceholderText(){return this.endPlaceholder||this.endDateText},selectDateText:()=>t$4("uni-datetime-picker.selectDate"),selectTimeText:()=>t$4("uni-datetime-picker.selectTime"),startDateText(){return this.startPlaceholder||t$4("uni-datetime-picker.startDate")},startTimeText:()=>t$4("uni-datetime-picker.startTime"),endDateText(){return this.endPlaceholder||t$4("uni-datetime-picker.endDate")},endTimeText:()=>t$4("uni-datetime-picker.endTime"),okText:()=>t$4("uni-datetime-picker.ok"),clearText:()=>t$4("uni-datetime-picker.clear"),showClearIcon(){const{clearIcon:e,disabled:t,singleVal:a,range:n}=this;return e&&!t&&(a||n.startDate&&n.endDate)}},created(){},mounted(){this.platform()},methods:{initPicker(e){if(!e||Array.isArray(e)&&!e.length)this.$nextTick((()=>{this.clear(!1)}));else if(Array.isArray(e)||this.isRange){const[t,a]=e;if(!t&&!a)return;const n=this.parseDate(t),i=this.parseDate(a),s=n.defDate,o=i.defDate;this.range.startDate=this.tempRange.startDate=s,this.range.endDate=this.tempRange.endDate=o,this.hasTime&&(this.range.startDate=n.defDate+" "+n.defTime,this.range.endDate=i.defDate+" "+i.defTime,this.tempRange.startTime=n.defTime,this.tempRange.endTime=i.defTime);const r={before:n.defDate,after:i.defDate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,r,{which:"right"}),this.endMultipleStatus=Object.assign({},this.endMultipleStatus,r,{which:"left"})}else{const{defDate:t,defTime:a}=this.parseDate(e);this.singleVal=t,this.tempSingleDate=t,this.defSingleDate=t,this.hasTime&&(this.singleVal=t+" "+a,this.time=a)}},updateLeftCale(e){const t=this.$refs.left;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.left.nowDate.fullDate)},updateRightCale(e){const t=this.$refs.right;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.right.nowDate.fullDate)},platform(){const e=uni.getSystemInfoSync();this.isPhone=e.windowWidth<=500,this.windowWidth=e.windowWidth},show(e){if(this.disabled)return;if(this.platform(),this.isPhone)return void this.$refs.mobile.open();this.popover={top:"10px"};uni.createSelectorQuery().in(this).select(".uni-date-editor").boundingClientRect((e=>{this.windowWidth-e.left<this.datePopupWidth&&(this.popover.right=0)})).exec(),setTimeout((()=>{if(this.popup=!this.popup,!this.isPhone&&this.isRange&&this.isFirstShow){this.isFirstShow=!1;const{startDate:e,endDate:t}=this.range;e&&t?this.diffDate(e,t)<30&&this.$refs.right.next():(this.$refs.right.next(),this.$refs.right.cale.lastHover=!1)}}),50)},close(){setTimeout((()=>{this.popup=!1,this.$emit("maskClick",this.value),this.$refs.mobile.close()}),20)},setEmit(e){"timestamp"!==this.returnType&&"date"!==this.returnType||(Array.isArray(e)?(this.hasTime||(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 00:00:00"),e[0]=this.createTimestamp(e[0]),e[1]=this.createTimestamp(e[1]),"date"===this.returnType&&(e[0]=new Date(e[0]),e[1]=new Date(e[1]))):(this.hasTime||(e+=" 00:00:00"),e=this.createTimestamp(e),"date"===this.returnType&&(e=new Date(e)))),this.$emit("change",e),this.$emit("input",e),this.$emit("update:modelValue",e),this.isEmitValue=!0},createTimestamp(e){return e=this.fixIosDateFormat(e),Date.parse(new Date(e))},singleChange(e){this.tempSingleDate=e.fulldate,this.hasTime||this.confirmSingleChange()},confirmSingleChange(){this.tempSingleDate?(this.hasTime?this.singleVal=this.tempSingleDate+" "+(this.time?this.time:"00:00:00"):this.singleVal=this.tempSingleDate,this.setEmit(this.singleVal),this.popup=!1):this.popup=!1},leftChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const n={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,n)},rightChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const n={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.endMultipleStatus=Object.assign({},this.endMultipleStatus,n)},mobileChange(e){if(this.isRange){const{before:t,after:a}=e.range;if(this.handleStartAndEnd(t,a,!0),this.hasTime){const{startTime:t,endTime:a}=e.timeRange;this.tempRange.startTime=t,this.tempRange.endTime=a}this.confirmRangeChange()}else this.hasTime?this.singleVal=e.fulldate+" "+e.time:this.singleVal=e.fulldate,this.setEmit(this.singleVal);this.$refs.mobile.close()},rangeChange(e,t){e&&t&&(this.handleStartAndEnd(e,t,!0),this.hasTime||this.confirmRangeChange())},confirmRangeChange(){if(!this.tempRange.startDate&&!this.tempRange.endDate)return void(this.popup=!1);let e,t;this.hasTime?(e=this.range.startDate=this.tempRange.startDate+" "+(this.tempRange.startTime?this.tempRange.startTime:"00:00:00"),t=this.range.endDate=this.tempRange.endDate+" "+(this.tempRange.endTime?this.tempRange.endTime:"00:00:00")):(e=this.range.startDate=this.tempRange.startDate,t=this.range.endDate=this.tempRange.endDate);const a=[e,t];this.setEmit(a),this.popup=!1},handleStartAndEnd(e,t,a=!1){if(!e||!t)return;const n=a?"tempRange":"range";this.dateCompare(e,t)?(this[n].startDate=e,this[n].endDate=t):(this[n].startDate=t,this[n].endDate=e)},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),diffDate(e,t){e=new Date(e.replace("-","/").replace("-","/"));const a=((t=new Date(t.replace("-","/").replace("-","/")))-e)/864e5;return Math.abs(a)},clear(e=!0){this.isRange?(this.range.startDate="",this.range.endDate="",this.tempRange.startDate="",this.tempRange.startTime="",this.tempRange.endDate="",this.tempRange.endTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():(this.$refs.left&&this.$refs.left.clearCalender(),this.$refs.right&&this.$refs.right.clearCalender(),this.$refs.right&&this.$refs.right.next()),e&&(this.$emit("change",[]),this.$emit("input",[]),this.$emit("update:modelValue",[]))):(this.singleVal="",this.tempSingleDate="",this.time="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():this.$refs.pcSingle&&this.$refs.pcSingle.clearCalender(),e&&(this.$emit("change",""),this.$emit("input",""),this.$emit("update:modelValue","")))},parseDate(e){e=this.fixIosDateFormat(e);const t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),s=t.getHours(),o=t.getMinutes(),r=t.getSeconds();return{defDate:a+"-"+this.lessTen(n)+"-"+this.lessTen(i),defTime:this.lessTen(s)+":"+this.lessTen(o)+(this.hideSecond?"":":"+this.lessTen(r))}},lessTen:e=>e<10?"0"+e:e,fixIosDateFormat:e=>("string"==typeof e&&(e=e.replace(/-/g,"/")),e),leftMonthSwitch(e){},rightMonthSwitch(e){}}};function _sfc_render$f(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),r=vue.resolveComponent("time-picker"),l=vue.resolveComponent("calendar");return vue.openBlock(),vue.createElementBlock("view",{class:"uni-date"},[vue.createElementVNode("view",{class:"uni-date-editor",onClick:t[4]||(t[4]=(...e)=>s.show&&s.show(...e))},[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-date-editor--x",{"uni-date-editor--x__disabled":a.disabled,"uni-date-x--border":a.border}])},[i.isRange?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-date-x uni-date-range"},[vue.createVNode(o,{type:"calendar",color:"#c0c4cc",size:"22"}),vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__x-input t-c",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.range.startDate=e),placeholder:s.startPlaceholderText,disabled:!0},null,8,["placeholder"]),[[vue.vModelText,i.range.startDate]]),vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("view",{class:""},vue.toDisplayString(a.rangeSeparator),1)]),!0),vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__x-input t-c",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>i.range.endDate=e),placeholder:s.endPlaceholderText,disabled:!0},null,8,["placeholder"]),[[vue.vModelText,i.range.endDate]])])):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-date-x uni-date-single"},[vue.createVNode(o,{type:"calendar",color:"#c0c4cc",size:"22"}),vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__x-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.singleVal=e),placeholder:s.singlePlaceholderText,disabled:!0},null,8,["placeholder"]),[[vue.vModelText,i.singleVal]])])),s.showClearIcon?(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"uni-date__icon-clear",onClick:t[3]||(t[3]=vue.withModifiers(((...e)=>s.clear&&s.clear(...e)),["stop"]))},[vue.createVNode(o,{type:"clear",color:"#c0c4cc",size:"24"})])):vue.createCommentVNode("v-if",!0)],2)]),!0)]),vue.withDirectives(vue.createElementVNode("view",{class:"uni-date-mask",onClick:t[5]||(t[5]=(...e)=>s.close&&s.close(...e))},null,512),[[vue.vShow,i.popup]]),i.isPhone?vue.createCommentVNode("v-if",!0):vue.withDirectives((vue.openBlock(),vue.createElementBlock("view",{key:0,ref:"datePicker",class:"uni-date-picker__container"},[i.isRange?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-date-range--x",style:vue.normalizeStyle(i.popover)},[vue.createElementVNode("view",{class:"uni-popper__arrow"}),i.hasTime?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"popup-x-header uni-date-changed"},[vue.createElementVNode("view",{class:"popup-x-header--datetime"},[vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>i.tempRange.startDate=e),placeholder:s.startDateText},null,8,["placeholder"]),[[vue.vModelText,i.tempRange.startDate]]),vue.createVNode(r,{type:"time",modelValue:i.tempRange.startTime,"onUpdate:modelValue":t[12]||(t[12]=e=>i.tempRange.startTime=e),start:s.reactStartTime,border:!1,disabled:!i.tempRange.startDate,hideSecond:a.hideSecond},{default:vue.withCtx((()=>[vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>i.tempRange.startTime=e),placeholder:s.startTimeText,disabled:!i.tempRange.startDate},null,8,["placeholder","disabled"]),[[vue.vModelText,i.tempRange.startTime]])])),_:1},8,["modelValue","start","disabled","hideSecond"])]),vue.createVNode(o,{type:"arrowthinright",color:"#999",style:{"line-height":"40px"}}),vue.createElementVNode("view",{class:"popup-x-header--datetime"},[vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>i.tempRange.endDate=e),placeholder:s.endDateText},null,8,["placeholder"]),[[vue.vModelText,i.tempRange.endDate]]),vue.createVNode(r,{type:"time",modelValue:i.tempRange.endTime,"onUpdate:modelValue":t[15]||(t[15]=e=>i.tempRange.endTime=e),end:s.reactEndTime,border:!1,disabled:!i.tempRange.endDate,hideSecond:a.hideSecond},{default:vue.withCtx((()=>[vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.tempRange.endTime=e),placeholder:s.endTimeText,disabled:!i.tempRange.endDate},null,8,["placeholder","disabled"]),[[vue.vModelText,i.tempRange.endTime]])])),_:1},8,["modelValue","end","disabled","hideSecond"])])])):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:"popup-x-body"},[vue.createVNode(l,{ref:"left",showMonth:!1,"start-date":i.caleRange.startDate,"end-date":i.caleRange.endDate,range:!0,onChange:s.leftChange,pleStatus:i.endMultipleStatus,onFirstEnterCale:s.updateRightCale,onMonthSwitch:s.leftMonthSwitch,style:{padding:"0 8px"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale","onMonthSwitch"]),vue.createVNode(l,{ref:"right",showMonth:!1,"start-date":i.caleRange.startDate,"end-date":i.caleRange.endDate,range:!0,onChange:s.rightChange,pleStatus:i.startMultipleStatus,onFirstEnterCale:s.updateLeftCale,onMonthSwitch:s.rightMonthSwitch,style:{padding:"0 8px","border-left":"1px solid #F1F1F1"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale","onMonthSwitch"])]),i.hasTime?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"popup-x-footer"},[vue.createElementVNode("text",{class:"",onClick:t[16]||(t[16]=(...e)=>s.clear&&s.clear(...e))},vue.toDisplayString(s.clearText),1),vue.createElementVNode("text",{class:"confirm",onClick:t[17]||(t[17]=(...e)=>s.confirmRangeChange&&s.confirmRangeChange(...e))},vue.toDisplayString(s.okText),1)])):vue.createCommentVNode("v-if",!0)],4)):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-date-single--x",style:vue.normalizeStyle(i.popover)},[vue.createElementVNode("view",{class:"uni-popper__arrow"}),i.hasTime?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-date-changed popup-x-header"},[vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__input t-c",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>i.tempSingleDate=e),placeholder:s.selectDateText},null,8,["placeholder"]),[[vue.vModelText,i.tempSingleDate]]),vue.createVNode(r,{type:"time",modelValue:i.time,"onUpdate:modelValue":t[8]||(t[8]=e=>i.time=e),border:!1,disabled:!i.tempSingleDate,start:s.reactStartTime,end:s.reactEndTime,hideSecond:a.hideSecond,style:{width:"100%"}},{default:vue.withCtx((()=>[vue.withDirectives(vue.createElementVNode("input",{class:"uni-date__input t-c",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>i.time=e),placeholder:s.selectTimeText,disabled:!i.tempSingleDate},null,8,["placeholder","disabled"]),[[vue.vModelText,i.time]])])),_:1},8,["modelValue","disabled","start","end","hideSecond"])])):vue.createCommentVNode("v-if",!0),vue.createVNode(l,{ref:"pcSingle",showMonth:!1,"start-date":i.caleRange.startDate,"end-date":i.caleRange.endDate,date:i.defSingleDate,onChange:s.singleChange,style:{padding:"0 8px"}},null,8,["start-date","end-date","date","onChange"]),i.hasTime?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"popup-x-footer"},[vue.createCommentVNode(' <text class="">此刻</text> '),vue.createElementVNode("text",{class:"confirm",onClick:t[9]||(t[9]=(...e)=>s.confirmSingleChange&&s.confirmSingleChange(...e))},vue.toDisplayString(s.okText),1)])):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:"uni-date-popper__arrow"})],4))],512)),[[vue.vShow,i.popup]]),vue.withDirectives(vue.createVNode(l,{ref:"mobile",clearDate:!1,date:i.defSingleDate,defTime:s.reactMobDefTime,"start-date":i.caleRange.startDate,"end-date":i.caleRange.endDate,selectableTimes:s.mobSelectableTime,pleStatus:i.endMultipleStatus,showMonth:!1,range:i.isRange,typeHasTime:i.hasTime,insert:!1,hideSecond:a.hideSecond,onConfirm:s.mobileChange,onMaskClose:s.close},null,8,["date","defTime","start-date","end-date","selectableTimes","pleStatus","range","typeHasTime","hideSecond","onConfirm","onMaskClose"]),[[vue.vShow,i.isPhone]])])}const __easycom_1$1=_export_sfc(_sfc_main$A,[["render",_sfc_render$f],["__scopeId","data-v-7cfab434"]]);class MPAnimation{constructor(e,t){this.options=e,this.animation=uni.createAnimation(e),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let a=this.currentStepAnimates[this.next],n={};if(n=a||{styles:{},config:{}},animateTypes1.includes(e)){n.styles.transform||(n.styles.transform="");let a="";"rotate"===e&&(a="deg"),n.styles.transform+=`${e}(${t+a}) `}else n.styles[e]=`${t}`;this.currentStepAnimates[this.next]=n}_animateRun(e={},t={}){let a=this.$.$refs.ani.ref;if(a)return new Promise(((n,i)=>{nvueAnimation.transition(a,{styles:e,...t},(e=>{n()}))}))}_nvueNextAnimate(e,t=0,a){let n=e[t];if(n){let{styles:i,config:s}=n;this._animateRun(i,s).then((()=>{t+=1,this._nvueNextAnimate(e,t,a)}))}else this.currentStepAnimates={},"function"==typeof a&&a(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const animateTypes1=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],animateTypes2=["opacity","backgroundColor"],animateTypes3=["width","height","left","right","top","bottom"];function createAnimation(e,t){if(t)return clearTimeout(t.timer),new MPAnimation(e,t)}animateTypes1.concat(animateTypes2,animateTypes3).forEach((e=>{MPAnimation.prototype[e]=function(...t){return this.animation[e](...t),this}}));const _sfc_main$z={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let a in e){t+=this.toLine(a)+":"+e[a]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=createAnimation(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(t,a={}){if(this.animation){for(let a in t)try{"object"==typeof t[a]?this.animation[a](...t[a]):this.animation[a](t[a])}catch(e){console.error(`方法 ${a} 不存在`)}return this.animation.step(a),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=createAnimation(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},a=(e,a)=>{"fade"===a?t.opacity=this.animationType(e)[a]:t.transform+=this.animationType(e)[a]+" "};return"string"==typeof this.modeClass?a(e,this.modeClass):this.modeClass.forEach((t=>{a(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let a=null;"fade"===t?a=e?0:1:(a=e?"-100%":"0","zoom-in"===t&&(a=e?.8:1),"zoom-out"===t&&(a=e?1.2:1),"slide-right"===t&&(a=e?"100%":"0"),"slide-bottom"===t&&(a=e?"100%":"0")),this.animation[this.animationMode()[t]](a)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((a=>{t(e,a)})),this.animation},animationType:e=>({fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}};function _sfc_render$e(e,t,a,n,i,s){return i.isShow?(vue.openBlock(),vue.createElementBlock("view",{key:0,ref:"ani",animation:i.animationData,class:vue.normalizeClass(a.customClass),style:vue.normalizeStyle(s.transformStyles),onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e))},[vue.renderSlot(e.$slots,"default")],14,["animation"])):vue.createCommentVNode("v-if",!0)}const __easycom_0$2=_export_sfc(_sfc_main$z,[["render",_sfc_render$e]]),_sfc_main$y={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:a,safeArea:n,screenHeight:i,safeAreaInsets:s}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(a||0),n&&this.safeArea?this.safeAreaInsets=s.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){this.showPopup&&(clearTimeout(this.timer),this.showPopup=!1);e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):console.error("缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}};function _sfc_render$d(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-transition"),__easycom_0$2);return i.showPopup?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["uni-popup",[i.popupstyle,s.isDesktop?"fixforpc-z-index":""]])},[vue.createElementVNode("view",{onTouchstart:t[1]||(t[1]=(...e)=>s.touchstart&&s.touchstart(...e))},[i.maskShow?(vue.openBlock(),vue.createBlock(o,{key:"1",name:"mask","mode-class":"fade",styles:i.maskClass,duration:i.duration,show:i.showTrans,onClick:s.onTap},null,8,["styles","duration","show","onClick"])):vue.createCommentVNode("v-if",!0),vue.createVNode(o,{key:"2","mode-class":i.ani,name:"content",styles:i.transClass,duration:i.duration,show:i.showTrans,onClick:s.onTap},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-popup__wrapper",[i.popupstyle]]),style:vue.normalizeStyle({backgroundColor:s.bg}),onClick:t[0]||(t[0]=(...e)=>s.clear&&s.clear(...e))},[vue.renderSlot(e.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):vue.createCommentVNode("v-if",!0)}const __easycom_7=_export_sfc(_sfc_main$y,[["render",_sfc_render$d],["__scopeId","data-v-8801a1bf"]]),_sfc_main$x={__name:"AchievementForm",emits:["change"],setup(e,{expose:t,emit:a}){const n=[{id:0,text:"今日",value:{startDate:dayjs().format("YYYY-MM-DD"),endDate:dayjs().format("YYYY-MM-DD")}},{id:1,text:"本周",value:{startDate:dayjs().startOf("week").add(1,"day").format("YYYY-MM-DD"),endDate:dayjs().endOf("week").add(1,"day").format("YYYY-MM-DD")}},{id:2,text:"本月",value:{startDate:dayjs().startOf("month").format("YYYY-MM-DD"),endDate:dayjs().endOf("month").format("YYYY-MM-DD")}},{id:3,text:"本年",value:{startDate:dayjs().startOf("year").format("YYYY-MM-DD"),endDate:dayjs().endOf("year").format("YYYY-MM-DD")}}],i=vue.ref(0),s=vue.ref([]),o=vue.ref({waitAllotCus:0,inShopCus:0,waitFollowCus:0,followingCus:0,successCus:0,failCus:0,returnCus:0}),r=vue.ref(0),l=vue.ref([]),c=vue.ref(null),u=vue.ref(dayjs().format("YYYY-MM-DD")),d=vue.ref(dayjs().format("YYYY-MM-DD")),h=async([e,t])=>{const{useUserInfoSync:a,useDealerInfoSync:n}=userStore(),{positionList:i,primaryPositionId:s,userId:r}=await a(),l=i.find((e=>e.crmId==s)),c=(await n({userId:r,positionStatus:1})).map((e=>e.crmId)).join(","),{power:u=0,shopId:d}=l;if(u>3)return;let h={userType:["BOSS","SHOP","MENTOR","DEALER"][u]};h=0==u?{...h,bossId:c}:1==u?{...h,shopId:d}:2==u?{...h,mentorUserId:r,shopId:d}:{...h,bossId:c},formatAppLog("log","at components/common/AchievementForm.vue:90",h);const{code:m,data:p}=await getBusinessReportForm({...h,startTime:e,endTime:t});0==m&&(o.value=p)},m=async({detail:e})=>{const{index:t}=e,a=s.value.find(((e,a)=>a==t)),[n,i]=[u.value,d.value];if("returnCus"==a.key)return void navigatorToH5({path:"/businessBackList",query:{startTime:n,endTime:i,status:2}});const{useUserInfoSync:o}=userStore(),{positionList:r,primaryPositionId:l}=await o(),c=r.find((e=>e.crmId==l)),{power:h=0,shopId:m}=c,p=2==h?"/businessList":"/businessManage",f="inShopCus"==a.key?"source":"status";navigatorToH5({path:p,query:{[f]:a.value,startTime:n,endTime:i,shopId:m}})},p=e=>{if(r.value=e,4==e)return;const{value:t}=n[e];u.value=t.startDate,d.value=t.endDate,h([u.value,d.value])},f=e=>{u.value=e[0],d.value=e[1],h([u.value,d.value])};return onLoad((()=>{r.value=0})),onShow((()=>{(async()=>{const{useUserPowerSync:e}=userStore();i.value=await e(),formatAppLog("log","at components/common/AchievementForm.vue:138","currentPower",i.value);const t=[{text:"自然进店",value:"手工创建",key:"inShopCus"},{text:"待跟进客户",value:"1",key:"waitFollowCus"},{text:"跟进中客户",value:"2",key:"followingCus"},{text:"成交客户",value:"3",key:"successCus"},{text:"流失客户",value:"4",key:"failCus"},{text:"退回客户",value:"5",key:"returnCus"}];s.value=2==i.value?t:[{text:"待分配客户",value:"0",key:"waitAllotCus"},...t],formatAppLog("log","at components/common/AchievementForm.vue:151","reportFormList",s.value,i.value),p(r.value)})()})),t({openHelp:()=>{}}),(e,t)=>{const a=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),i=resolveEasycom(vue.resolveDynamicComponent("uni-datetime-picker"),__easycom_1$1),h=resolveEasycom(vue.resolveDynamicComponent("uni-grid-item"),__easycom_2$2),v=resolveEasycom(vue.resolveDynamicComponent("uni-grid"),__easycom_3$2),g=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_7);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("view",{class:"text-2 flex items-center justify-between p-2 text-sm text-gray-500"},[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(n,(e=>vue.createElementVNode("text",{key:e.id,class:vue.normalizeClass({active:r.value==e.id}),onClick:t=>p(e.id)},vue.toDisplayString(e.text),11,["onClick"]))),64)),vue.createElementVNode("view",null,[vue.createVNode(i,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),type:"daterange",onChange:f},{default:vue.withCtx((()=>[vue.createVNode(a,{class:"calendar-icon",color:4==r.value?"#007aff":"#6b7280",type:"calendar-filled",size:"20",onClick:t[0]||(t[0]=e=>p(4))},null,8,["color"])])),_:1},8,["modelValue"])])]),vue.createElementVNode("view",{class:"my-2 px-2 text-xs text-theme-blue"},[vue.createElementVNode("text",null,"统计日期："+vue.toDisplayString(u.value)+" ~ "+vue.toDisplayString(d.value),1)]),vue.createVNode(v,{column:4,"show-border":!1,onChange:m},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.value,((e,t)=>(vue.openBlock(),vue.createBlock(h,{key:t,index:t},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"text-center leading-10"},[vue.createElementVNode("view",null,[vue.createElementVNode("text",null,vue.toDisplayString(o.value[e.key]),1)]),vue.createElementVNode("view",{class:"text-xs text-gray-500"},vue.toDisplayString(e.text),1)])])),_:2},1032,["index"])))),128))])),_:1}),vue.createVNode(g,{ref_key:"popupRef",ref:c,type:"center"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex justify-center text-sm"},[vue.createElementVNode("view",{class:"w-4/5 rounded-md bg-white p-4"},[vue.createElementVNode("view",null,[vue.createElementVNode("text",null," 帮助 "),vue.createVNode(a,{type:"help-filled",size:"18"})]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"help-title"},"进店数："),vue.createTextVNode(" 新增游客、客户数，按进店日期统计 ")]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"help-title"},"跟进客户："),vue.createTextVNode(" 按更新客户资料的时间点（编辑内容并点击保存按钮），进行数据统计 ")]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"help-title"},"成交客户："),vue.createTextVNode(" 按已成交订单（除取消状态）的建单时间，进行数据统计 ")]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"help-title"},"流失客户："),vue.createTextVNode(" 客户状态切换为已流失的时间点，进行数据统计 ")]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"help-title"},"成交订单："),vue.createTextVNode(" 已成交的订单数（除取消订单），按建单时间统计 ")]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"help-title"},"客单值："),vue.createTextVNode("成交订单总额 / 成交客户数")]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"help-title"},"成交率："),vue.createTextVNode("成交客户数 / 进店客户数")]),vue.createElementVNode("view",{class:"mt-2 text-xs text-gray-300"}," 注：睡眠顾问、店长统计个人数据，经销商统计其所有门店数据。经销商、店长在“门店”模块查看各门店、各员工数据统计 ")])])])),_:1},512)])}}},AchievementForm=_export_sfc(_sfc_main$x,[["__scopeId","data-v-c99a3535"]]),saveExchangeSign=e=>http({url:"/cd-sys-web/train/pointsGain/api/gain",data:e,method:"post"}),getExchangeLastSign=e=>http({url:"/marketing/record/getlist",data:e}),getExchangeWidthSign=e=>http({url:"/marketing/eventrecord/checkEventRecord",data:e,method:"post"}),setExchangeSign=async e=>{const{useGetToken:t}=userStore(),{id:a}=t(),{code:n,data:i}=await saveExchangeSign({userId:a,sourceChannel:1010,...e});if(0==n)return i},getExchangeEventDetail=async e=>{const{useGetToken:t}=userStore(),{id:a}=t();if(!a)return;const{code:n,data:i}=await getExchangeLastSign({userId:a,...e});return 0==n?i:void 0},isAlreadySigned=async e=>{const{useGetToken:t}=userStore(),{id:a}=t(),{code:n,data:i}=await getExchangeWidthSign({source:a,sourceChannel:1010,...e});return 0!=n||0!=i.code},_sfc_main$w={__name:"ExchangeSignDay",setup(e){const t=vue.ref(null),a=()=>t.value.close(),n=()=>{a(),navigateTo({url:"/pages/tabbar/mePage"})},i=({show:e})=>{e||setStorage("closeExchangeSign",dayjs().format("YYYY-MM-DD"))};return(async()=>{const{useGetToken:e}=userStore(),a=getStorage("closeExchangeSign");if(!e()||a&&a==dayjs().format("YYYY-MM-DD"))return;await isAlreadySigned({behaviorId:10101})||t.value.open("center")})(),(e,s)=>{const o=resolveEasycom(vue.resolveDynamicComponent("m-image"),_sfc_main$L),r=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_7);return vue.openBlock(),vue.createBlock(r,{ref_key:"popupRef",ref:t,"lock-scroll":"",closeable:"","close-icon":"clear",style:{background:"transparent"},teleport:"body",onChange:i},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex h-screen w-screen items-center justify-center p-4",onClick:a},[vue.createElementVNode("view",{onClick:n},[vue.createVNode(o,{fit:"contain",width:"60vw",height:"80vw",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20230414/c2lnbi1kYXkuMTY4MTQ1MzU3MTQ0Nw==.png"})])])])),_:1},512)}}};var md5Exports={},md5$1={get exports(){return md5Exports},set exports(e){md5Exports=e}};
/**
   * [js-md5]{@link https://github.com/emn178/js-md5}
   *
   * @namespace md5
   * @version 0.7.3
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   */
(function(module){(function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var a=OUTPUT_TYPES[t];e[a]=createOutputMethod(a)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,a=typeof e;if("string"!==a){if("object"!==a)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var n,i,s=0,o=e.length,r=this.blocks,l=this.buffer8;s<o;){if(this.hashed&&(this.hashed=!1,r[0]=r[16],r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),t)if(ARRAY_BUFFER)for(i=this.start;s<o&&i<64;++s)l[i++]=e[s];else for(i=this.start;s<o&&i<64;++s)r[i>>2]|=e[s]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;s<o&&i<64;++s)(n=e.charCodeAt(s))<128?l[i++]=n:n<2048?(l[i++]=192|n>>6,l[i++]=128|63&n):n<55296||n>=57344?(l[i++]=224|n>>12,l[i++]=128|n>>6&63,l[i++]=128|63&n):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),l[i++]=240|n>>18,l[i++]=128|n>>12&63,l[i++]=128|n>>6&63,l[i++]=128|63&n);else for(i=this.start;s<o&&i<64;++s)(n=e.charCodeAt(s))<128?r[i>>2]|=n<<SHIFT[3&i++]:n<2048?(r[i>>2]|=(192|n>>6)<<SHIFT[3&i++],r[i>>2]|=(128|63&n)<<SHIFT[3&i++]):n<55296||n>=57344?(r[i>>2]|=(224|n>>12)<<SHIFT[3&i++],r[i>>2]|=(128|n>>6&63)<<SHIFT[3&i++],r[i>>2]|=(128|63&n)<<SHIFT[3&i++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),r[i>>2]|=(240|n>>18)<<SHIFT[3&i++],r[i>>2]|=(128|n>>12&63)<<SHIFT[3&i++],r[i>>2]|=(128|n>>6&63)<<SHIFT[3&i++],r[i>>2]|=(128|63&n)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,a,n,i,s,o=this.blocks;this.first?t=((t=((e=((e=o[0]-680876937)<<7|e>>>25)-271733879<<0)^(a=((a=(-271733879^(n=((n=(-1732584194^2004318071&e)+o[1]-117830708)<<12|n>>>20)+e<<0)&(-271733879^e))+o[2]-1126478375)<<17|a>>>15)+n<<0)&(n^e))+o[3]-1316259209)<<22|t>>>10)+a<<0:(e=this.h0,t=this.h1,a=this.h2,t=((t+=((e=((e+=((n=this.h3)^t&(a^n))+o[0]-680876936)<<7|e>>>25)+t<<0)^(a=((a+=(t^(n=((n+=(a^e&(t^a))+o[1]-389564586)<<12|n>>>20)+e<<0)&(e^t))+o[2]+606105819)<<17|a>>>15)+n<<0)&(n^e))+o[3]-1044525330)<<22|t>>>10)+a<<0),t=((t+=((e=((e+=(n^t&(a^n))+o[4]-176418897)<<7|e>>>25)+t<<0)^(a=((a+=(t^(n=((n+=(a^e&(t^a))+o[5]+1200080426)<<12|n>>>20)+e<<0)&(e^t))+o[6]-1473231341)<<17|a>>>15)+n<<0)&(n^e))+o[7]-45705983)<<22|t>>>10)+a<<0,t=((t+=((e=((e+=(n^t&(a^n))+o[8]+1770035416)<<7|e>>>25)+t<<0)^(a=((a+=(t^(n=((n+=(a^e&(t^a))+o[9]-1958414417)<<12|n>>>20)+e<<0)&(e^t))+o[10]-42063)<<17|a>>>15)+n<<0)&(n^e))+o[11]-1990404162)<<22|t>>>10)+a<<0,t=((t+=((e=((e+=(n^t&(a^n))+o[12]+1804603682)<<7|e>>>25)+t<<0)^(a=((a+=(t^(n=((n+=(a^e&(t^a))+o[13]-40341101)<<12|n>>>20)+e<<0)&(e^t))+o[14]-1502002290)<<17|a>>>15)+n<<0)&(n^e))+o[15]+1236535329)<<22|t>>>10)+a<<0,t=((t+=((n=((n+=(t^a&((e=((e+=(a^n&(t^a))+o[1]-165796510)<<5|e>>>27)+t<<0)^t))+o[6]-1069501632)<<9|n>>>23)+e<<0)^e&((a=((a+=(e^t&(n^e))+o[11]+643717713)<<14|a>>>18)+n<<0)^n))+o[0]-373897302)<<20|t>>>12)+a<<0,t=((t+=((n=((n+=(t^a&((e=((e+=(a^n&(t^a))+o[5]-701558691)<<5|e>>>27)+t<<0)^t))+o[10]+38016083)<<9|n>>>23)+e<<0)^e&((a=((a+=(e^t&(n^e))+o[15]-660478335)<<14|a>>>18)+n<<0)^n))+o[4]-405537848)<<20|t>>>12)+a<<0,t=((t+=((n=((n+=(t^a&((e=((e+=(a^n&(t^a))+o[9]+568446438)<<5|e>>>27)+t<<0)^t))+o[14]-1019803690)<<9|n>>>23)+e<<0)^e&((a=((a+=(e^t&(n^e))+o[3]-187363961)<<14|a>>>18)+n<<0)^n))+o[8]+1163531501)<<20|t>>>12)+a<<0,t=((t+=((n=((n+=(t^a&((e=((e+=(a^n&(t^a))+o[13]-1444681467)<<5|e>>>27)+t<<0)^t))+o[2]-51403784)<<9|n>>>23)+e<<0)^e&((a=((a+=(e^t&(n^e))+o[7]+1735328473)<<14|a>>>18)+n<<0)^n))+o[12]-1926607734)<<20|t>>>12)+a<<0,t=((t+=((s=(n=((n+=((i=t^a)^(e=((e+=(i^n)+o[5]-378558)<<4|e>>>28)+t<<0))+o[8]-2022574463)<<11|n>>>21)+e<<0)^e)^(a=((a+=(s^t)+o[11]+1839030562)<<16|a>>>16)+n<<0))+o[14]-35309556)<<23|t>>>9)+a<<0,t=((t+=((s=(n=((n+=((i=t^a)^(e=((e+=(i^n)+o[1]-1530992060)<<4|e>>>28)+t<<0))+o[4]+1272893353)<<11|n>>>21)+e<<0)^e)^(a=((a+=(s^t)+o[7]-155497632)<<16|a>>>16)+n<<0))+o[10]-1094730640)<<23|t>>>9)+a<<0,t=((t+=((s=(n=((n+=((i=t^a)^(e=((e+=(i^n)+o[13]+681279174)<<4|e>>>28)+t<<0))+o[0]-358537222)<<11|n>>>21)+e<<0)^e)^(a=((a+=(s^t)+o[3]-722521979)<<16|a>>>16)+n<<0))+o[6]+76029189)<<23|t>>>9)+a<<0,t=((t+=((s=(n=((n+=((i=t^a)^(e=((e+=(i^n)+o[9]-640364487)<<4|e>>>28)+t<<0))+o[12]-421815835)<<11|n>>>21)+e<<0)^e)^(a=((a+=(s^t)+o[15]+530742520)<<16|a>>>16)+n<<0))+o[2]-995338651)<<23|t>>>9)+a<<0,t=((t+=((n=((n+=(t^((e=((e+=(a^(t|~n))+o[0]-198630844)<<6|e>>>26)+t<<0)|~a))+o[7]+1126891415)<<10|n>>>22)+e<<0)^((a=((a+=(e^(n|~t))+o[14]-1416354905)<<15|a>>>17)+n<<0)|~e))+o[5]-57434055)<<21|t>>>11)+a<<0,t=((t+=((n=((n+=(t^((e=((e+=(a^(t|~n))+o[12]+1700485571)<<6|e>>>26)+t<<0)|~a))+o[3]-1894986606)<<10|n>>>22)+e<<0)^((a=((a+=(e^(n|~t))+o[10]-1051523)<<15|a>>>17)+n<<0)|~e))+o[1]-2054922799)<<21|t>>>11)+a<<0,t=((t+=((n=((n+=(t^((e=((e+=(a^(t|~n))+o[8]+1873313359)<<6|e>>>26)+t<<0)|~a))+o[15]-30611744)<<10|n>>>22)+e<<0)^((a=((a+=(e^(n|~t))+o[6]-1560198380)<<15|a>>>17)+n<<0)|~e))+o[13]+1309151649)<<21|t>>>11)+a<<0,t=((t+=((n=((n+=(t^((e=((e+=(a^(t|~n))+o[4]-145523070)<<6|e>>>26)+t<<0)|~a))+o[11]-1120210379)<<10|n>>>22)+e<<0)^((a=((a+=(e^(n|~t))+o[2]+718787259)<<15|a>>>17)+n<<0)|~e))+o[9]-343485551)<<21|t>>>11)+a<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=a-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+a<<0,this.h3=this.h3+n<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,n=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,n=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&a,a>>8&255,a>>16&255,a>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,a,n="",i=this.array(),s=0;s<15;)e=i[s++],t=i[s++],a=i[s++],n+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|a>>>6)]+BASE64_ENCODE_CHAR[63&a];return e=i[s],n+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);const md5=md5Exports,useUserLoginCheck=({shopList:e=[],status:t})=>{if("ACTIVE"!==t)return!1;const a=["New","Active"];return e.some((e=>a.includes(e.status)))},onLoginWithUserInfo=async(e=!0)=>{const{useUserInfoSync:t,setUserInfo:a}=userStore(),n=await t({reload:!0});if(!useUserLoginCheck(n))throw logout("账号已失效（职位/门店/经销商），不能登录！",e),new Error("账号已失效（职位/门店/经销商），不能登录！");const{userId:i,primaryPositionId:s,positionList:o}=n;if(!o.some((e=>e.crmId==s))&&0!=o.length){const e=o[0].crmId;await updateUserInfo({primaryPositionId:e}),a({...n,primaryPositionId:e})}saveLastTime({userId:i})},accountLogin=async({account:e,password:t})=>{const{useSetToken:a}=userStore(),{code:n,data:i,msg:s}=await getOrdinary({account:e,password:md5(t)});if(0!=n)throw new Error(s);a(i),"1000000"!=e&&await onLoginWithUserInfo()},forceLogin=async(e,t)=>{await fetchSettoken(e),await onLoginWithUserInfo(t)},_sfc_main$v={__name:"workPage",setup(e){const{useUserInfoSync:t,useDealerInfoSync:a,useGetToken:n}=userStore();onShareAppMessage((e=>({title:"高效门店管理，精准运营数据",path:"/pages/tabbar/workPage"})));const i=vue.ref([{id:10,label:"意向客户",icon:"",path:"/customerList",imageName:"personnel"},{id:1,label:"订单查询",icon:"",path:"/orderSearch",imageName:"order"},{id:2,label:"日报",icon:"",path:"/diaryList",imageName:"daily"},{id:3,label:"门店",icon:"",path:"/shopList",imageName:"shop"},{id:4,label:"报表",icon:"",path:"/chart",imageName:"report-forms"},{id:16,label:"会员中心",icon:"",path:"/memberCenter",imageName:"member-center"},{id:9,label:"核销",icon:"",path:"/verification",imageName:"write-off"},{id:15,label:"商机管理",icon:"",path:"/businessManage",imageName:"business-manage"},{id:14,label:"我的商机",icon:"",path:"/businessList",imageName:"my-business"},{id:18,label:"退回申请",icon:"",path:"/businessBackList",imageName:"business-reture"},{id:13,label:"商城客户",icon:"",path:"/shopCustomer",imageName:"mall-customers"},{id:5,label:"物料上传",icon:"",path:"/advertList",imageName:"seal"},{id:17,label:"爆品上样",icon:"",path:"/advertList",imageName:"seal"},{id:6,label:"培训报名",icon:"",path:"/trainList",imageName:"train"},{id:7,label:"公告",icon:"",path:"/noticeList",imageName:"notice"},{id:12,label:"反馈建议",icon:"",path:"/feedback",imageName:"feedback"},{id:19,label:"下单/支付",icon:"",path:null,imageName:"pay"},{id:20,label:"ABC演练",icon:"",path:"/drillPage",imageName:"drill"},{id:21,label:"员工管理",icon:"",path:"/businessStaffList",imageName:"personnel"},{id:22,label:"市场抽检",icon:"",path:"/spotCheckList",imageName:"spot-check"},{id:23,label:"直播预约",icon:"",path:"/channelsLiveList",imageName:"live-reservation"}]),s=vue.ref([]),o=vue.ref({approvedCus:0,closedCus:0,countCus:0,cusBusiness:0,followCus:0,guestSingleValue:0,turnoverRatio:0,volumeBusiness:0}),r=vue.ref(null),l=vue.ref(0),c=vue.ref([4]),u=vue.ref(4),d=vue.ref({}),h=async e=>{if(!n())return;const{userCrmId:a}=await t(),{code:i,data:s}=await getWorkAchievement({...e,userCrmId:a},{withUserId:!0});0==i&&(o.value=s)},m=async({selectedDate:e})=>{if(!n())return;s.value=[];const{code:t,data:a}=await getWorkPlan({startDate:e,endDate:e},{withUserId:!0});0==t&&0!=a.length&&(s.value=a.map((e=>e.dataList.map((e=>({...e,planName:gBase64.decode(e.planName),remark:e.remark?gBase64.decode(e.remark):""}))))).flat())},p=async e=>{var n,i;if(19===e.id){const{userId:e,primaryPositionId:s,positionList:o}=await t(),r=null==(n=o.find((e=>e.crmId==s)))?void 0:n.positionType,l=await a({userId:e,positionTypes:r});return 0==l.length?void showModal("经销商已经失效，该功能禁用"):void uni.navigateToMiniProgram({appId:"wx32c5229c3b159178",path:"page/tabBarManage/pages/wxLogin/wxLogin",extraData:{msCompanyNo:(null==(i=l[0])?void 0:i.dealerCode)||"D2999999",path:"page/customerManage/pages/customer/index/customer"},envVersion:"trial"})}switch(e.id){case 2:(async()=>{const{powers:e}=await t(),a=e.some((e=>[0,5].includes(e)))?"/diaryShopList":"/diaryList",n=e.includes(5)?{type:"manager"}:{};navigatorToH5({path:a,query:n})})();break;case 5:navigatorToH5({path:e.path,query:{advModular:10}});break;case 9:navigateTo({url:"/pages/work/verificationCode"});break;case 17:navigatorToH5({path:e.path,query:{advModular:20}});break;default:navigatorToH5({path:e.path})}},f=()=>{navigatorToH5({path:"/workNewPlan",query:{type:0}})},v=vue.computed((()=>(formatAppLog("log","at pages/tabbar/workPage.vue:309","更新菜单"),i.value.filter((e=>{switch(e.id){case 0:case 8:return c.value.some((e=>[1,2].includes(e)));case 1:case 2:return c.value.some((e=>[0,1,2,5].includes(e)));case 3:case 4:case 5:case 17:return c.value.some((e=>[0,1].includes(e)));case 6:case 9:return c.value.some((e=>[0,1,2].includes(e)));case 10:case 18:return c.value.some((e=>[0,1,2,3].includes(e)));case 21:return c.value.some((e=>[0,3].includes(e)));case 11:return c.value.includes(1);case 14:case 16:return[1,2].includes(u.value);case 15:return[0,1,3].includes(u.value);default:return!0}}))))),g=async()=>{try{if(n()){const e=await t({reload:!0});return"1000000"==e.account||useUserLoginCheck(e)?((async()=>{var e;const{primaryPositionId:a,positionList:n,...i}=await t();c.value=i.powers,u.value=null==(e=n.find((e=>e.crmId==a)))?void 0:e.power})(),(async()=>{const{code:e,data:t}=await getNoticeRecord();if(0!=e)return;const{systemReadNo:a=0,dealerReadNo:n=0,headquartersReadNo:i=0}=t;l.value=Number(a)+Number(n)+Number(i)})(),void(async()=>{const{account:e}=await t(),{code:a,data:n,msg:i}=await checkFeedbackReply(e);0==a&&(d.value={isReply:n,reply:i})})()):void logout("账号已失效（职位/门店/经销商），强制登出")}logout()}catch(e){logout()}};return onLoad((async()=>{i.value=await Promise.all(i.value.map((async e=>{var t;const{data:a}=await getMaterialList({name:e.imageName});return 0==a.length?e:{...e,icon:null==(t=a[0])?void 0:t.url}})))})),onShow((()=>g())),(e,t)=>{const a=resolveEasycom(vue.resolveDynamicComponent("m-image"),_sfc_main$L),n=resolveEasycom(vue.resolveDynamicComponent("uni-badge"),__easycom_1$3),i=resolveEasycom(vue.resolveDynamicComponent("uni-grid-item"),__easycom_2$2),c=resolveEasycom(vue.resolveDynamicComponent("uni-grid"),__easycom_3$2),u=resolveEasycom(vue.resolveDynamicComponent("zsy-calendar"),__easycom_4$3),g=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),y=resolveEasycom(vue.resolveDynamicComponent("uni-section"),__easycom_1$2);return vue.openBlock(),vue.createElementBlock("view",{class:"min-h-screen bg-gray-100 p-2"},[vue.createElementVNode("view",{class:"m-2 rounded-md bg-white shadow"},[vue.createVNode(c,{column:5,square:!1,"show-border":!1},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(v),((e,t)=>(vue.openBlock(),vue.createBlock(i,{key:t},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"relative my-2 flex h-full flex-col items-center justify-center",onClick:t=>p(e)},[vue.createVNode(a,{width:"80rpx",height:"80rpx",mode:"heightFix",src:e.icon},null,8,["src"]),vue.createElementVNode("text",{class:"my-2 text-xs text-gray-600"},vue.toDisplayString(e.label),1),0!=l.value&&7==e.id?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"absolute -top-2 right-2"},[vue.createVNode(n,{text:l.value,type:"error"},null,8,["text"])])):vue.createCommentVNode("v-if",!0),12==e.id&&d.value.isReply?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"absolute -top-2 right-2"},[vue.createVNode(n,{text:d.value.reply,type:"error"},null,8,["text"])])):vue.createCommentVNode("v-if",!0)],8,["onClick"])])),_:2},1024)))),128))])),_:1})]),vue.createElementVNode("view",{class:"m-2 rounded-md bg-white p-2 pt-4 shadow"},[vue.createElementVNode("view",{class:"mb-2 flex items-end px-2",onClick:t[0]||(t[0]=e=>r.value.openHelp())},[vue.createElementVNode("text",null,"数据统计"),vue.createCommentVNode(' <uni-icons type="help-filled" size="18"></uni-icons> '),vue.createElementVNode("text",{class:"text-xs text-gray-400"},"（订单一小时统计一次）")]),vue.createVNode(AchievementForm,{ref_key:"formRef",ref:r,data:o.value,onChange:h},null,8,["data"])]),vue.createElementVNode("view",{class:"m-2 rounded-md bg-white p-2 shadow"},[vue.createVNode(u,{mode:"close",onChange:m},{header:vue.withCtx((({date:e})=>[vue.createElementVNode("view",{class:"flex justify-between p-2 pt-0 text-sm"},[vue.createElementVNode("text",null,"工作计划"),vue.createElementVNode("text",null,vue.toDisplayString(e),1),vue.createElementVNode("text",{class:"text-theme-blue",onClick:f},"添加计划")])])),_:1}),vue.createElementVNode("view",{class:"text-center text-xs text-gray-300"},"点击日期查看工作计划，滑动切换日期")]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.value,(e=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"m-2 overflow-hidden rounded-md bg-white p-2 shadow",onClick:t=>(e=>{navigatorToH5({path:"/workNewPlan",query:{type:1,id:e.id}})})(e)},[vue.createVNode(y,{"title-font-size":"16px",title:e.planName},{right:vue.withCtx((()=>[vue.createVNode(g,{type:"forward",size:"16"})])),_:2},1032,["title"]),vue.createElementVNode("view",{class:"p-3 text-sm text-gray-500"},[vue.createElementVNode("text",null,vue.toDisplayString(e.remark),1)]),vue.createElementVNode("view",{class:"p-2 pr-4 text-right text-xs text-theme-blue"},[vue.createElementVNode("text",null,vue.toDisplayString(e.startTime)+" ~ "+vue.toDisplayString(e.endTime),1)])],8,["onClick"])))),128)),vue.createVNode(_sfc_main$w)])}}},emptyDefault="/static/images/empty/empty-image-default.png",emptyError="/static/images/empty/empty-image-error.png",emptyNetwork="/static/images/empty/empty-image-network.png",emptySearch="/static/images/empty/empty-image-search.png",_sfc_main$u={name:"MEmpty",props:{image:{type:String,default:"default"},description:{type:String,default:""}},setup:(e,{attrs:t,slots:a,emit:n})=>({src:vue.computed((()=>{const t={default:emptyDefault,error:emptyError,search:emptySearch,network:emptyNetwork};return t[e.image]?t[e.image]:e.image}))})};function _sfc_render$c(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"empty"},[vue.createElementVNode("image",{mode:"aspectFit",src:n.src},null,8,["src"]),vue.createElementVNode("view",null,[vue.createElementVNode("text",null,vue.toDisplayString(a.description),1)])])}const __easycom_5$1=_export_sfc(_sfc_main$u,[["render",_sfc_render$c],["__scopeId","data-v-df433fce"]]),en$2={"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},zhHans$2={"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"请输入搜索内容"},zhHant$2={"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"請輸入搜索內容"},messages$2={en:en$2,"zh-Hans":zhHans$2,"zh-Hant":zhHant$2},{t:t$3}=initVueI18n(messages$2),_sfc_main$t={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||t$3("uni-search-bar.cancel")},placeholderText(){return this.placeholder||t$3("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}};function _sfc_render$b(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-searchbar"},[vue.createElementVNode("view",{style:vue.normalizeStyle({borderRadius:a.radius+"px",backgroundColor:a.bgColor}),class:"uni-searchbar__box",onClick:t[5]||(t[5]=(...e)=>s.searchClick&&s.searchClick(...e))},[vue.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[vue.renderSlot(e.$slots,"searchIcon",{},(()=>[vue.createVNode(o,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),i.show||i.searchVal?vue.withDirectives((vue.openBlock(),vue.createElementBlock("input",{key:0,focus:i.showSync,disabled:a.readonly,placeholder:s.placeholderText,maxlength:a.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchVal=e),onConfirm:t[1]||(t[1]=(...e)=>s.confirm&&s.confirm(...e)),onBlur:t[2]||(t[2]=(...e)=>s.blur&&s.blur(...e)),onFocus:t[3]||(t[3]=(...e)=>s.emitFocus&&s.emitFocus(...e))},null,40,["focus","disabled","placeholder","maxlength"])),[[vue.vModelText,i.searchVal]]):(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},vue.toDisplayString(a.placeholder),1)),i.show&&("always"===a.clearButton||"auto"===a.clearButton&&""!==i.searchVal)&&!a.readonly?(vue.openBlock(),vue.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:t[4]||(t[4]=(...e)=>s.clear&&s.clear(...e))},[vue.renderSlot(e.$slots,"clearIcon",{},(()=>[vue.createVNode(o,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):vue.createCommentVNode("v-if",!0)],4),"always"===a.cancelButton||i.show&&"auto"===a.cancelButton?(vue.openBlock(),vue.createElementBlock("text",{key:0,onClick:t[6]||(t[6]=(...e)=>s.cancel&&s.cancel(...e)),class:"uni-searchbar__cancel"},vue.toDisplayString(s.cancelTextI18n),1)):vue.createCommentVNode("v-if",!0)])}const __easycom_1=_export_sfc(_sfc_main$t,[["render",_sfc_render$b],["__scopeId","data-v-77525b98"]]),_sfc_main$s={name:"UniTag",emits:["click"],props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},inverted:{type:[Boolean,String],default:!1},circle:{type:[Boolean,String],default:!1},mark:{type:[Boolean,String],default:!1},customStyle:{type:String,default:""}},computed:{classes(){const{type:e,disabled:t,inverted:a,circle:n,mark:i,size:s,isTrue:o}=this;return["uni-tag--"+e,"uni-tag--"+s,o(t)?"uni-tag--disabled":"",o(a)?"uni-tag--"+e+"--inverted":"",o(n)?"uni-tag--circle":"",o(i)?"uni-tag--mark":"",o(a)?"uni-tag--inverted uni-tag-text--"+e:"","small"===s?"uni-tag-text--small":""].join(" ")}},methods:{isTrue:e=>!0===e||"true"===e,onClick(){this.isTrue(this.disabled)||this.$emit("click")}}};function _sfc_render$a(e,t,a,n,i,s){return a.text?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:vue.normalizeClass(["uni-tag",s.classes]),style:vue.normalizeStyle(a.customStyle),onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e))},vue.toDisplayString(a.text),7)):vue.createCommentVNode("v-if",!0)}const __easycom_4$2=_export_sfc(_sfc_main$s,[["render",_sfc_render$a],["__scopeId","data-v-90ec00b8"]]);var isSameOrAfterExports={},isSameOrAfter$1={get exports(){return isSameOrAfterExports},set exports(e){isSameOrAfterExports=e}};!function(e,t){e.exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}(isSameOrAfter$1);const isSameOrAfter=isSameOrAfterExports;var isSameOrBeforeExports={},isSameOrBefore$1={get exports(){return isSameOrBeforeExports},set exports(e){isSameOrBeforeExports=e}};!function(e,t){e.exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}(isSameOrBefore$1);const isSameOrBefore=isSameOrBeforeExports,getHomeBanner=e=>http({url:"/consumer-admin/api/train/repository/v1/adverts",data:e}),getTopRepositor=e=>http({url:"/consumer-admin/api/train/repository/v1/getTopRepository",data:e}),getStudyCategories=e=>http({url:"/consumer-admin/train/category/list",data:e}),getLiveList=(e,t)=>http({url:"/consumer-admin/api/live/cd/train/list",data:e},t),getReplayTopList=e=>http({url:"/consumer-admin/api/live/cd/train/getReplayTopList",data:e}),getSlideShowInfo=e=>http({url:"/member/slideshowinfo/listpage",data:e}),_sfc_main$r={__name:"studyPage",setup(e){dayjs.extend(isSameOrBefore),dayjs.extend(isSameOrAfter),onShareAppMessage((e=>({title:"高效门店管理，精准运营数据",path:"/pages/tabbar/workPage"})));const t=[{text:"经典",classify:2,parentCode:["C"],brandCode:[]},{text:"V6",classify:3,parentCode:["F"],brandCode:[]},{text:"慕思|CALIASOFART",classify:4,parentCode:["M"],brandCode:[]},{text:"慕思·羡慕",classify:5,parentCode:["M"],brandCode:[]}],a=vue.ref(0),n=vue.ref([]),i=vue.ref([]),s=vue.ref([]),o=vue.ref([]),r=vue.ref([]),l=vue.ref([]),c=vue.ref(!1),u=vue.ref(!0),d=vue.ref({}),h=vue.ref(null),m=vue.ref([{id:0,text:"公司介绍",name:"corporation",path:"https://www.derucci.com/home/index.html?from=singlemessage&isappinstalled=0&title=公司介绍",icon:""},{id:1,text:"系列产品",name:"goods",path:"/gallery",icon:""},{id:2,text:"金管家服务",name:"steward",path:"/msManage",query:{classify:1},icon:""}]),p=async()=>{i.value=await Promise.all(n.value.map((async(e,t)=>{const{code:a,data:n}=await getHomeBanner({classify:e.classify});if(0==a)return n})))},f=async()=>{s.value=await Promise.all(n.value.map((async(e,t)=>{let a={classify:e.classify,page:1,limit:500};a=2==e.classify?{...a,level:2,recommend:1,orderType:6}:{...a,level:1,orderType:2};const{code:n,data:i}=await getStudyCategories(a);if(0==n){if(2==e.classify){const e=await Promise.all([{imageName:"answers",id:0,name:"百问百答"},{imageName:"more",id:1,name:"更多"}].map((async e=>{var t;const{data:a}=await getMaterialList({name:e.imageName});return 0==a.length?e:{...e,image:null==(t=a[0])?void 0:t.url}})));return[...i.slice(0,10),...e]}return i.slice(0,8)}})))},v=async()=>{const{useUserInfoSync:e}=userStore(),{account:t}=await e();o.value=await Promise.all(n.value.map((async(e,a)=>{const{code:n,data:i}=await getTopRepositor({account:t,classify:e.classify});if(0==n)return i.slice(0,2)})))},g=async()=>{const{code:e,page:t}=await getLiveList({page:1,limit:1},{withUserId:!0});0==e&&(r.value=t.list)},y=async()=>{const{code:e,data:t}=await getReplayTopList();0==e&&(l.value=t)},_=()=>{const{classify:e}=n.value.find(((e,t)=>t==a.value));navigatorToH5({path:"/articleSearch",query:{type:"msIndex2",classify:e}})},w=()=>Promise.all([p(),f(),v(),g(),y()]),k=async()=>{(async()=>{const e=getStorage("studyNoticeClose");if(e&&dayjs().isSameOrBefore(e,"day"))return;const{data:t}=await getSlideShowInfo({pageSize:500,currPage:1,ascriptionModular:401,associatedBusinessId:401}),a=t.filter((e=>0==e.effectiveState));if(0==a.length)return;const{url:n,startShowTime:i,endShowTime:s}=a[0];if(dayjs().isSameOrBefore(i)||dayjs().isSameOrAfter(s))return;const{windowWidth:o,windowHeight:r}=await uni.getSystemInfoSync();d.value={src:n,width:.8*o+"px",height:.8*r+"px"},h.value.open("center")})(),(async()=>{m.value=await Promise.all(m.value.map((async e=>{var t;const{data:a}=await getMaterialList({name:e.name});return 0==a.length?e:{...e,icon:null==(t=a[0])?void 0:t.url}})))})(),await(async()=>{try{const{useUserInfoSync:e}=userStore(),{account:a}=await e(),{code:i,data:s}=await getDealerBrandDetail({account:a});if(0!=i||!s||0==s.length)return n.value=[],void(u.value=!0);if(u.value=!1,n.value=t.filter((e=>{if(0==e.parentCode.length)return!0;const t=s.some((t=>e.parentCode.includes(t.parentCode)));return!(!t||0!=e.brandCode.length)||t&&s.some((t=>e.brandCode.includes(t.brandCode)))})),0!=n.value)return;n.value=[],u.value=!0}catch(e){u.value=!0}})(),u.value||await w()};onShow((()=>k())),onLoad((async()=>{const{useUserInfoSync:e}=userStore(),{account:t}=await e();c.value="8155bc545f84d9652f1012ef2bdfb6eb"==md5(t),k()})),onPullDownRefresh((async()=>{u.value||(await w(),uni.stopPullDownRefresh())}));const b=async({detail:e})=>{const{windowWidth:t,windowHeight:a}=await uni.getSystemInfoSync(),n=e.height/e.width*(.8*t);formatAppLog("log","at pages/tabbar/studyPage.vue:339",n>.8*a?.8*a:n),d.value={...d.value,height:(n>.8*a?.8*a:n)+"px"}},S=()=>{h.value.close(),setStorage("studyNoticeClose",dayjs().format("YYYY-MM-DD HH:mm:ss"))};return(e,t)=>{const p=resolveEasycom(vue.resolveDynamicComponent("m-empty"),__easycom_5$1),f=resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"),__easycom_1),v=resolveEasycom(vue.resolveDynamicComponent("m-image"),_sfc_main$L),g=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),y=resolveEasycom(vue.resolveDynamicComponent("uni-section"),__easycom_1$2),w=resolveEasycom(vue.resolveDynamicComponent("uni-tag"),__easycom_4$2),k=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_7);return vue.openBlock(),vue.createElementBlock("view",null,[u.value&&c.value?(vue.openBlock(),vue.createBlock(p,{key:0,description:"暂无数据"})):(vue.openBlock(),vue.createElementBlock("view",{key:1},[n.value.length>0?(vue.openBlock(),vue.createElementBlock("view",{key:0,onClick:_},[vue.createVNode(f,{radius:"100",placeholder:"请输入搜索关键词","cancel-button":"none"})])):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:"mb-3 grid grid-cols-3"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(m.value,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:"text-center",onClick:t=>{var a;0!=(a=e).id?navigatorToH5({path:a.path,query:a.query}):navigateTo({url:a.path})}},[vue.createElementVNode("div",{class:"flex items-center justify-center"},[vue.createVNode(v,{width:"50px",height:"50px",mode:"aspectFit",src:e.icon},null,8,["src"])]),vue.createElementVNode("p",{class:"text-sm text-gray-500"},vue.toDisplayString(e.text),1)],8,["onClick"])))),128))]),vue.createElementVNode("view",{class:"h-2 bg-page-gray"}),n.value.length>1?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"h-12 w-screen overflow-hidden"},[vue.createElementVNode("view",{class:"overflow-h-hidden no-scrollbar relative flex h-full overflow-x-auto pl-2 pr-2"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.value,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:e.classify,class:"relative flex flex-auto flex-shrink-0 items-center justify-center px-3 text-center leading-5",onClick:e=>(e=>{a.value=e})(t)},[vue.createElementVNode("span",{class:vue.normalizeClass("text-md text-gray-"+(a.value==t?"900":"500"))},vue.toDisplayString(e.text),3),a.value==t?(vue.openBlock(),vue.createElementBlock("span",{key:0,class:"absolute bottom-1 h-1 w-8 rounded bg-blue-500"})):vue.createCommentVNode("v-if",!0)],8,["onClick"])))),128))])])):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.value,((e,t)=>{var n,r;return vue.withDirectives((vue.openBlock(),vue.createElementBlock("view",{key:t},[vue.createElementVNode("view",{class:"w-screen pt-2"},[i.value[t]&&i.value[t].length>0?(vue.openBlock(),vue.createElementBlock("swiper",{key:0,class:"swiper",circular:"",autoplay:"","indicator-dots":""},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.value[t],((e,t)=>(vue.openBlock(),vue.createElementBlock("swiper-item",{key:t},[vue.createElementVNode("view",{class:"mx-4 block overflow-hidden rounded-2xl",onClick:t=>(e=>{e.url&&""!=e.url.replace(/\s+/g,"")&&(/^\d{1,}$/.test(e.url)?navigatorToH5({path:"/articleDetails",query:{id:e.url}}):navigateTo({url:e.url}))})(e)},[vue.createVNode(v,{width:"100%",height:"352rpx",mode:"aspectFill",src:e.imgUrl},null,8,["src"])],8,["onClick"])])))),128))])):vue.createCommentVNode("v-if",!0),(null==(n=s.value[t])?void 0:n.length)>0?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"flex flex-wrap justify-start pt-1"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.value[t],((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:"w-1/4",onClick:t=>(e=>{const t=a.value+2;if([0,1].includes(e.id))return void navigatorToH5({path:["/studyClassify","/policyNavList"][e.id],query:{classify:t}});navigatorToH5({path:2==t?"/policy":"/msPolicyList",query:{id:e.id,name:e.name,type:1,classify:t,categoryId:e.parentId}})})(e)},[vue.createElementVNode("view",{class:"flex h-full flex-col items-center justify-center p-2"},[vue.createVNode(v,{width:"80rpx",height:"80rpx",class:"overflow-hidden",mode:"aspectFit",src:e.image},null,8,["src"]),vue.createElementVNode("text",{class:"w-20 truncate py-1 text-center text-xs text-gray-600"},vue.toDisplayString(e.name),1),vue.createCommentVNode(' <p class="txt-xs w-14 truncate text-center">{{ menuItem.label }}</p> ')])],8,["onClick"])))),128))])):vue.createCommentVNode("v-if",!0),(null==(r=o.value[t])?void 0:r.length)>0?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createElementVNode("view",{class:"h-2 bg-page-gray"}),vue.createVNode(y,{title:"热门推荐","title-font-size":"18px"},{right:vue.withCtx((()=>[vue.createElementVNode("label",{onClick:t=>vue.unref(navigatorToH5)({path:"/studyPushList",query:{classify:e.classify}})},[vue.createTextVNode(" 查看更多 "),vue.createVNode(g,{type:"forward",size:"16"})],8,["onClick"])])),_:2},1024),vue.createElementVNode("view",{class:"px-4"},[vue.createElementVNode("view",{class:"inline-grid w-full grid-cols-2 gap-2"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.value[t],(e=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,onClick:t=>(e=>{navigatorToH5({path:"/articleDetails",query:{id:e.id,classif:2}})})(e)},[vue.createElementVNode("view",{class:"overflow-hidden rounded-md"},[vue.createVNode(v,{width:"100%",height:"260rpx",mode:"aspectFill",src:e.image},null,8,["src"])]),vue.createElementVNode("view",{class:"py-2 text-xs"},[vue.createElementVNode("text",null,vue.toDisplayString(e.title),1)])],8,["onClick"])))),128))])])],64)):vue.createCommentVNode("v-if",!0)])])),[[vue.vShow,a.value===t]])})),128))]),vue.createElementVNode("view",{class:"h-2 bg-page-gray"}),c.value?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createVNode(y,{title:"在线培训","title-font-size":"18px"},{right:vue.withCtx((()=>[vue.createElementVNode("label",{onClick:t[0]||(t[0]=e=>vue.unref(navigatorToH5)({path:"/studyLiveList",query:{index:0}}))},[vue.createTextVNode(" 查看更多 "),vue.createVNode(g,{type:"forward",size:"16"})])])),_:1}),0==r.value.length?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"m-4 text-center text-sm text-gray-300"}," 暂无培训 ")):vue.createCommentVNode("v-if",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(r.value,(e=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"mx-4",onClick:t=>(e=>{const{id:t,paymentFlag:a,userPaymentFlag:n,liveFlag:i}=e;navigatorToH5({path:"/studyLiveDetail",query:{id:t,showPay:a&&!n&&2==i?1:0}})})(e)},[vue.createElementVNode("view",null,[vue.createElementVNode("view",{class:"overflow-hidden rounded-md"},[vue.createVNode(v,{width:"100%",height:"360rpx",mode:"aspectFill",src:e.roomPhoto},null,8,["src"])]),vue.createElementVNode("view",{class:"p-2"},[vue.createElementVNode("text",null,vue.toDisplayString(e.title),1),vue.createElementVNode("view",{class:"text-sm text-theme-yellow"},[e.paymentFlag?(vue.openBlock(),vue.createElementBlock("label",{key:0},"￥")):vue.createCommentVNode("v-if",!0),e.paymentFlag?(vue.openBlock(),vue.createElementBlock("label",{key:1},vue.toDisplayString(e.paymentMoney),1)):(vue.openBlock(),vue.createElementBlock("label",{key:2},"免费")),""!=e.password?(vue.openBlock(),vue.createBlock(g,{key:3,type:"locked",size:"16"})):vue.createCommentVNode("v-if",!0),e.userPaymentFlag?(vue.openBlock(),vue.createElementBlock("span",{key:4,class:"train-item__status"}," 已支付 ")):vue.createCommentVNode("v-if",!0)])])])],8,["onClick"])))),128)),vue.createElementVNode("view",{class:"h-2 bg-page-gray"}),vue.createVNode(y,{title:"培训回放","title-font-size":"18px"},{right:vue.withCtx((()=>[vue.createElementVNode("label",{onClick:t[1]||(t[1]=e=>vue.unref(navigatorToH5)({path:"/studyLiveList",query:{index:1}}))},[vue.createTextVNode(" 查看更多 "),vue.createVNode(g,{type:"forward",size:"16"})])])),_:1}),0==l.value.length?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"m-4 text-center text-sm text-gray-300"}," 暂无回放 ")):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:"no-scrollbar w-screen overflow-x-scroll"},[vue.createElementVNode("view",{class:"flex px-4 pb-4"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(l.value,(e=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"pr-2",onClick:t=>(e=>{const{historyId:t,paymentFlag:a,userPaymentFlag:n}=e;if(!t||""==t)return void showModal("该直播不存在");navigatorToH5({path:"/studyLivePlayback",query:{id:t,showPay:a&&!n?1:0}})})(e)},[vue.createElementVNode("view",{class:"overflow-hidden rounded-md"},[vue.createVNode(v,{width:"310rpx",height:"172rpx",mode:"aspectFill",src:e.roomPhoto},null,8,["src"])]),vue.createElementVNode("view",{class:"p-2",style:{width:"310rpx"}},[vue.createElementVNode("text",{class:"text-sm"},vue.toDisplayString(e.title),1),1==e.paymentFlag?(vue.openBlock(),vue.createElementBlock("view",{key:0},[vue.createElementVNode("text",null," ￥"+vue.toDisplayString(e.paymentMoney),1),e.userPaymentFlag?(vue.openBlock(),vue.createBlock(w,{key:0,type:"warning",circle:"",inverted:"",text:"已付款"})):vue.createCommentVNode("v-if",!0)])):vue.createCommentVNode("v-if",!0)])],8,["onClick"])))),128))])])],64))])),vue.createVNode(k,{ref_key:"noticeRef",ref:h,"lock-scroll":"",closeable:"","close-icon":"clear",style:{background:"transparent"},teleport:"body"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex h-[80vh] w-[80vw] items-center justify-center"},[vue.createElementVNode("view",{class:"relative w-full overflow-hidden rounded-lg"},[vue.createVNode(v,{mode:"aspectFit",width:"80vw",height:d.value.height,src:d.value.src,onLoad:b},null,8,["height","src"]),vue.createVNode(g,{class:"absolute right-2 top-2 z-10 shadow",type:"clear",color:"#999",size:"30",onClick:S})])])])),_:1},512)])}}},PagesTabbarStudyPage=_export_sfc(_sfc_main$r,[["__scopeId","data-v-4f5369ed"]]),getGalleryGoodsList=(e,t)=>http({url:"/consumer-admin/api/product/v1/product/list",data:e},t),_sfc_main$q={__name:"discoveryPage",setup(e){onShareAppMessage((e=>({title:"高效门店管理，精准运营数据",path:"/pages/tabbar/workPage"})));const t=vue.ref([]),a=vue.ref([]),n=vue.ref(0),i=vue.ref([{id:0,label:"公司介绍",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221110/YWJvdXQtaWNvbi4xNjY4MDUxODY4NTMw.png",path:"https://www.derucci.com/home/index.html?from=singlemessage&isappinstalled=0&title=公司介绍"},{id:1,label:"产品图库",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221110/cHJvZHVjdC1pY29uLjE2NjgwNTE4NzA4MzU=.png",path:"/gallery"},{id:5,label:"产品方案库",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221110/cHJvZ3JhbW1lLWljb24uMTY2ODA1MTg2OTc0OQ==.png",path:"/kjlScheme"},{id:3,label:"金管家服务",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221110/c2VydmVyLWljb24uMTY2ODA1MTg3MDA0NA==.png",path:"/msManage?classify=1"},{id:4,label:"公告",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221110/bm90aWNlLWxpc3QtaWNvbi4xNjY4MDUxODY5MzMx.png",path:"/noticeList",badge:0},{id:7,label:"常见问题",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221110/cXVlcnktaWNvbi4xNjY4MDUxODcwNDQw.png",path:"/commonQuestion?modular=常见问题"}]),s=async()=>{const{code:e,data:a}=await getHomeBanner({classify:0});0==e&&(t.value=a)},o=async()=>{const{code:e,data:t}=await getNoticeRecord();if(0!=e)return;const{systemReadNo:a=0,dealerReadNo:i=0,headquartersReadNo:s=0}=t;n.value=Number(a)+Number(i)+Number(s)},r=async()=>{const{code:e,data:t}=await getGalleryGoodsList({st:1,display:!0,collectType:3},{withUserId:!0});0==e&&(a.value=t.list.slice(0,4))},l=({detail:e})=>{const{index:t}=e,a=i.value.find((e=>e.id==t));if(0!=t)switch(t){case 1:navigatorToH5({path:"/gallery"});break;case 5:navigatorToH5({path:"/kjlScheme"});break;case 3:navigatorToH5({path:"/msManage",query:{classify:1}});break;case 4:navigatorToH5({path:"/noticeList"});break;default:navigatorToH5({path:"/commonQuestion",query:{modular:"常见问题"}})}else navigateTo({url:a.path})},c=()=>Promise.all([s(),r(),o()]);onShow((()=>{c()})),onPullDownRefresh((async()=>{await c(),uni.stopPullDownRefresh()}));return(e,s)=>{const o=resolveEasycom(vue.resolveDynamicComponent("m-image"),_sfc_main$L),r=resolveEasycom(vue.resolveDynamicComponent("uni-badge"),__easycom_1$3),c=resolveEasycom(vue.resolveDynamicComponent("uni-grid-item"),__easycom_2$2),u=resolveEasycom(vue.resolveDynamicComponent("uni-grid"),__easycom_3$2),d=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),h=resolveEasycom(vue.resolveDynamicComponent("uni-section"),__easycom_1$2),m=resolveEasycom(vue.resolveDynamicComponent("uni-tag"),__easycom_4$2);return vue.openBlock(),vue.createElementBlock("view",null,[vue.createElementVNode("swiper",{class:"swiper",circular:"",autoplay:"","indicator-dots":""},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.value,((e,t)=>(vue.openBlock(),vue.createElementBlock("swiper-item",{key:t,onClick:t=>(e=>{e.url&&""!=e.url.replace(/\s+/g,"")&&(/^\d{1,}$/.test(e.url)?navigatorToH5({path:"/articleDetails",query:{id:e.url}}):navigateTo({url:"/pages/common/webviewPage?url="+encodeURIComponent(JSON.stringify(e.url))}))})(e)},[vue.createElementVNode("view",{class:"mx-4 block overflow-hidden rounded-2xl"},[vue.createVNode(o,{width:"100%",height:"352rpx",mode:"aspectFill",src:e.imgUrl},null,8,["src"])])],8,["onClick"])))),128))]),vue.createElementVNode("view",{class:"rounded-md bg-white"},[vue.createVNode(u,{column:4,"show-border":!1,onChange:l},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.value,((e,t)=>(vue.openBlock(),vue.createBlock(c,{key:t,index:e.id},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex h-full flex-col items-center justify-center"},[vue.createVNode(r,{size:"small",text:4==e.id?n.value:0,absolute:"rightTop",type:"error"},{default:vue.withCtx((()=>[vue.createVNode(o,{width:"80rpx",height:"80rpx",mode:"heightFix",src:e.icon},null,8,["src"])])),_:2},1032,["text"]),vue.createElementVNode("text",{class:"my-2 text-xs text-gray-600"},vue.toDisplayString(e.label),1)])])),_:2},1032,["index"])))),128))])),_:1})]),vue.createVNode(h,{title:"最新产品","title-font-size":"18px"},{right:vue.withCtx((()=>[vue.createVNode(d,{type:"forward",size:"16"})])),_:1}),vue.createElementVNode("view",{class:"grid grid-cols-2 gap-2 px-4"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.value,(e=>(vue.openBlock(),vue.createElementBlock("view",{key:e.id,class:"mb-4 rounded shadow",onClick:t=>{navigatorToH5({path:"/galleryProducItem",query:{id:e.id}})}},[vue.createElementVNode("view",{class:"relative w-full overflow-hidden rounded"},["Lapsed"==e.status?(vue.openBlock(),vue.createBlock(o,{key:0,class:"absolute right-0 top-0",width:"80rpx",height:"80rpx",mode:"aspectFill",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20230309/bGFwc2VkLWljb24uMTY3ODMyOTkzNTAxMg==.png"})):vue.createCommentVNode("v-if",!0),vue.createVNode(o,{width:"100%",height:"348rpx",mode:"aspectFill",src:e.image},null,8,["src"])]),vue.createElementVNode("view",{class:"px-2"},[vue.createElementVNode("view",{class:"my-2 truncate text-sm"},[vue.createElementVNode("text",null,vue.toDisplayString(e.goodsName),1)]),vue.createElementVNode("view",{class:"my-2"},[vue.createVNode(m,{size:"small",text:"热销",type:"error"})]),vue.createElementVNode("view",{class:"mb-4 flex items-center justify-between pt-2"},[vue.createElementVNode("view",{class:"text-red-500"}," ￥"+vue.toDisplayString(e.price),1),vue.createElementVNode("view",{class:"flex items-center justify-between"},[vue.createVNode(d,{type:"heart",size:"16"}),vue.createElementVNode("text",null,vue.toDisplayString(e.appCollectCount),1)])])])],8,["onClick"])))),128))])])}}},PagesTabbarDiscoveryPage=_export_sfc(_sfc_main$q,[["__scopeId","data-v-d655602e"]]),_sfc_main$p={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default:()=>({})},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:()=>({type:"",color:"#000000",size:20})},border:{type:Boolean,default:!0}},data:()=>({isFirstChild:!1}),mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(e="uniList"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t},onClick(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange(e){this.$emit("switchChange",e.detail)},openPage(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(e){let t={url:this.to,success:e=>{this.$emit("click",{data:e})},fail:e=>{this.$emit("click",{data:e})}};switch(e){case"navigateTo":default:uni.navigateTo(t);break;case"redirectTo":uni.redirectTo(t);break;case"reLaunch":uni.reLaunch(t);break;case"switchTab":uni.switchTab(t)}}}};function _sfc_render$9(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),r=resolveEasycom(vue.resolveDynamicComponent("uni-badge"),__easycom_1$3);return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass([{"uni-list-item--disabled":a.disabled},"uni-list-item"]),"hover-class":!a.clickable&&!a.link||a.disabled||a.showSwitch?"":"uni-list-item--hover",onClick:t[1]||(t[1]=(...e)=>s.onClick&&s.onClick(...e))},[i.isFirstChild?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["border--left",{"uni-list--border":a.border}])},null,2)),vue.createElementVNode("view",{class:vue.normalizeClass(["uni-list-item__container",{"container--right":a.showArrow||a.link,"flex--direction":"column"===a.direction}])},[vue.renderSlot(e.$slots,"header",{},(()=>[vue.createElementVNode("view",{class:"uni-list-item__header"},[a.thumb?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-list-item__icon"},[vue.createElementVNode("image",{src:a.thumb,class:vue.normalizeClass(["uni-list-item__icon-img",["uni-list--"+a.thumbSize]])},null,10,["src"])])):a.showExtraIcon?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-list-item__icon"},[vue.createVNode(o,{color:a.extraIcon.color,size:a.extraIcon.size,type:a.extraIcon.type},null,8,["color","size","type"])])):vue.createCommentVNode("v-if",!0)])]),!0),vue.renderSlot(e.$slots,"body",{},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-list-item__content",{"uni-list-item__content--center":a.thumb||a.showExtraIcon||a.showBadge||a.showSwitch}])},[a.title?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:vue.normalizeClass(["uni-list-item__content-title",[0!==a.ellipsis&&a.ellipsis<=2?"uni-ellipsis-"+a.ellipsis:""]])},vue.toDisplayString(a.title),3)):vue.createCommentVNode("v-if",!0),a.note?(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"uni-list-item__content-note"},vue.toDisplayString(a.note),1)):vue.createCommentVNode("v-if",!0)],2)]),!0),vue.renderSlot(e.$slots,"footer",{},(()=>[a.rightText||a.showBadge||a.showSwitch?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["uni-list-item__extra",{"flex--justify":"column"===a.direction}])},[a.rightText?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"uni-list-item__extra-text"},vue.toDisplayString(a.rightText),1)):vue.createCommentVNode("v-if",!0),a.showBadge?(vue.openBlock(),vue.createBlock(r,{key:1,type:a.badgeType,text:a.badgeText,"custom-style":a.badgeStyle},null,8,["type","text","custom-style"])):vue.createCommentVNode("v-if",!0),a.showSwitch?(vue.openBlock(),vue.createElementBlock("switch",{key:2,disabled:a.disabled,checked:a.switchChecked,onChange:t[0]||(t[0]=(...e)=>s.onSwitchChange&&s.onSwitchChange(...e))},null,40,["disabled","checked"])):vue.createCommentVNode("v-if",!0)],2)):vue.createCommentVNode("v-if",!0)]),!0)],2),a.showArrow||a.link?(vue.openBlock(),vue.createBlock(o,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):vue.createCommentVNode("v-if",!0)],10,["hover-class"])}const __easycom_4$1=_export_sfc(_sfc_main$p,[["render",_sfc_render$9],["__scopeId","data-v-5d2846a9"]]),_sfc_main$o={name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0}},created(){this.firstChildAppend=!1},methods:{loadMore(e){this.$emit("scrolltolower")}}};function _sfc_render$8(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-list uni-border-top-bottom"},[a.border?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-list--border-top"})):vue.createCommentVNode("v-if",!0),vue.renderSlot(e.$slots,"default",{},void 0,!0),a.border?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-list--border-bottom"})):vue.createCommentVNode("v-if",!0)])}const __easycom_5=_export_sfc(_sfc_main$o,[["render",_sfc_render$8],["__scopeId","data-v-2f0556c4"]]),_sfc_main$n={__name:"m-button",props:{round:{type:Boolean,default:!1},type:{type:String,default:"default",validator:e=>["default","primary","success","warning","danger"].includes(e)},icon:{type:String,default:null},plain:{type:Boolean,default:!1},block:{type:Boolean,default:!1},size:{type:String,default:"normal",validator:e=>["large","normal","small","mini"].includes(e)},disabled:{type:Boolean,default:!1},loadingClick:{type:Function,default:null}},emits:["click"],setup(e,{emit:t}){const a=e,n=vue.ref(!1);vue.useAttrs();const i=vue.computed((()=>({large:24,normal:20,small:18,mini:16}[a.size]))),s=vue.computed((()=>"default"===a.type?"#333":"#fff")),o=async()=>{if(!a.disabled)if(a.loadingClick)try{n.value=!0,await a.loadingClick()}finally{n.value=!1}else t("click")};return(t,r)=>{const l=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3);return vue.openBlock(),vue.createElementBlock("button",{class:vue.normalizeClass({"m-button":!0,round:a.round,plain:a.plain,block:a.block,disabled:a.disabled,[a.type]:!0,[a.size]:!0,loading:n.value}),type:a.type,plain:a.plain,loading:n.value,disabled:a.disabled,"hover-class":"clickable",onClick:o},[vue.renderSlot(t.$slots,"icon",{},(()=>[e.icon&&!n.value?(vue.openBlock(),vue.createBlock(l,{key:0,type:e.icon,size:vue.unref(i),color:vue.unref(s)},null,8,["type","size","color"])):vue.createCommentVNode("v-if",!0)]),!0),n.value?vue.createCommentVNode("v-if",!0):vue.renderSlot(t.$slots,"default",{key:0},void 0,!0)],10,["type","plain","loading","disabled"])}}},__easycom_3$1=_export_sfc(_sfc_main$n,[["__scopeId","data-v-44c2c5e5"]]),_sfc_main$m={__name:"ExchangeSignCard",setup(e){const t=vue.ref(!1),a=vue.ref(0),n=vue.ref(0),i=vue.ref(null),s=["https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/Y2hlY2tib3gtaWNvbi4xNjY3NTQ0NjY0MjMx.png","https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221103/Y2hlY2tib3gtYWN0aXZlLWljb24uMTY2NzQ1Nzk3ODgxMA==.png"],o=vue.computed((()=>Array.from({length:7},((e,t)=>{const n=t+1;return 0==a.value||a.value%7==0?{text:a.value>0?7*(parseInt(a.value/7)-1)+n:n,value:a.value>0&&a.value%7==0,count:a.value>=7?7:n}:{text:7*parseInt(a.value/7)+n,value:a.value<7?n<=a.value:a.value%7>=n,count:a.value>=7?7:n}})))),r=async()=>{const e=await setExchangeSign({behaviorId:10101});e&&(a.value=e.continuous,n.value=e.points,t.value=!0,i.value.open())};return onShow((()=>{(async()=>{t.value=await isAlreadySigned({behaviorId:10101});const e=await getExchangeEventDetail({behaviorId:10101}),{record:i}=e;if(!e||!i)return;const s=dayjs().diff(dayjs(i.createTime),"days");a.value=s>1?0:i.continuousTime,n.value=i.integral})()})),(e,l)=>{const c=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1),u=resolveEasycom(vue.resolveDynamicComponent("uni-grid-item"),__easycom_2$2),d=resolveEasycom(vue.resolveDynamicComponent("uni-grid"),__easycom_3$2),h=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_7);return vue.openBlock(),vue.createElementBlock("view",{class:"p-2 pb-4"},[vue.createElementVNode("view",{class:"mb-6 flex justify-between"},[vue.createElementVNode("view",null,[vue.createElementVNode("view",{class:"text-md my-2 font-semibold"},[vue.createTextVNode(" 已经连续签到 "),vue.createElementVNode("text",{class:"text-theme-blue"},vue.toDisplayString(a.value)+"天",1)]),vue.createElementVNode("view",{class:"text-xs text-gray-300"},[vue.createTextVNode(" 今天签到已经领取 "),vue.createElementVNode("text",{class:"text-theme-blue"},vue.toDisplayString(n.value)+"积分",1)])]),vue.createElementVNode("view",null,[vue.renderSlot(e.$slots,"header-right",{},(()=>[vue.createVNode(c,{disabled:t.value,round:"",type:"warning",size:"small","loading-click":r},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(t.value?"已签到":"立即签到"),1)])),_:1},8,["disabled"])]),!0)])]),vue.createVNode(d,{column:7,"show-border":!1,square:!1},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(o),((e,t)=>(vue.openBlock(),vue.createBlock(u,{key:t},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"text-center"},[vue.createElementVNode("image",{class:"h-6 w-full",mode:"aspectFit",src:s[e.value?1:0]},null,8,["src"]),vue.createElementVNode("text",{class:"text-xs text-gray-600"},vue.toDisplayString(e.text)+"天",1)])])),_:2},1024)))),128))])),_:1}),vue.createVNode(h,{ref_key:"popupRef",ref:i},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"w-full rounded-lg bg-white"},[vue.createElementVNode("image",{class:"relative -top-20 left-2",mode:"aspectFit",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/c2lnbi1pbi4xNjY3NTQzMTI5MjU4.png"}),vue.createElementVNode("view",{class:"-mt-28 px-4 pb-4 text-center"},[vue.createElementVNode("view",{class:"text-3xl text-yellow-600"}," +"+vue.toDisplayString(n.value)+"积分 ",1),vue.createElementVNode("view",{class:"my-4"},[vue.createTextVNode(" 已经连续签到 "),vue.createElementVNode("text",{class:"text-yellow-600"},vue.toDisplayString(a.value),1),vue.createTextVNode(" 天！ ")]),vue.createVNode(c,{round:"",block:"",type:"warning",onClick:l[0]||(l[0]=e=>i.value.close())},{default:vue.withCtx((()=>[vue.createTextVNode("返回")])),_:1})])])])),_:1},512)])}}},ExchangeSignCard=_export_sfc(_sfc_main$m,[["__scopeId","data-v-215d707a"]]),_sfc_main$l={__name:"mePage",setup(e){onShareAppMessage((e=>({title:"高效门店管理，精准运营数据",path:"/pages/tabbar/workPage"})));const t=[{id:0,text:"积分中心",path:"/exchangeCenter",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/ZXhjaGFuZ2UuMTY2NzUyODQ4NTI1NQ==.png"},{id:1,text:"培训履历",path:"/trainResume",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/Y2FzZS4xNjY3NTI4NDgzOTE2.png"},{id:2,text:"我的方案",path:"/myKJLScheme",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/c2NoZW1lLjE2Njc1Mjg0ODQ3NTg=.png"},{id:3,text:"我的收藏",path:"/collectList",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/Y29sbGVjdC4xNjY3NTI4NDg0MzQ3.png"}],a=[{id:4,text:"反馈建议",show:!0,path:"feedback",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/ZmVlZGJhY2suMTY2NzUyODcyMzI3MA==.png"},{id:5,text:"账户安全",show:!0,path:"/security",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/YWNjb3VudC4xNjY3NTI4NzIzMjY5.png"},{id:8,text:"商机设置",path:"/businessConfig",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20230412/YnVzaW5lc3MuMTY4MTI2ODczMDczMg==.png"},{id:6,text:"关于我们",show:!0,path:"/aboutUs",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/YWJvdXQuMTY2NzUyODcyMzI2OA==.png"},{id:7,text:"版本更新",show:!0,path:"/update",icon:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221104/dmVyc29pbi4xNjY3NTI4NzIzMjcw.png"}],n=vue.ref(null),i=vue.ref(""),s=vue.ref(""),o=vue.ref(""),r=vue.ref("1.0.0"),l=vue.ref([]),c=vue.ref(!1),u=vue.reactive({meData:{},positionList:[]}),d=(e,t)=>{const a=new Map;for(const n of t)if(!a.has(n[e])){const i=t.filter((t=>t[e]==n[e])),s=i.length>1?i.find((e=>e.enable)):i[0];a.set(n[e],s)}return[...a.values()]},h=async()=>{try{await showModal("是否退出?",{showCancel:!0}),logout()}catch(e){formatAppLog("warn","at pages/tabbar/mePage.vue:142",e)}},m=async()=>{const{useClearUserStore:e,useUserInfoSync:t}=userStore();(async()=>{const{code:e,page:t}=await getAppVersion({type:"营销助手app",page:1,limit:1});0==e&&(r.value=t.list[0].title)})(),(async()=>{const{useClearUserStore:e,useUserInfoSync:t}=userStore(),{account:a}=await t(),{status:n,resumeList:i}=await getCredentials({account:a});if(0==n||0==i.length)return;const s=i.filter((e=>1==e.isQualified));if(0==s.length)return;const o=["导购认证","店长认证","经销商认证","职业经理人认证","其他认证"],r=s.filter((e=>4!=e.type)).map((e=>({brandCode:e.brandCode||"C",position:o[e.type],type:e.type,icon:{C:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221115/bG9nby4xNjY4NTAyODI3NTMy.png",F:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221115/bG9nby12Ni4xNjY4NTAyODI3ODQ4.png"}[e.brandCode||"C"],trainType:e.trainType}))),u=r.filter((e=>"C"==e.brandCode&&2!=e.trainType)),d=r.filter((e=>"F"==e.brandCode&&2!=e.trainType)),h=Math.min(...u.map((e=>e.type))),m=Math.min(...d.map((e=>e.type)));l.value=[],u.length>0&&(l.value=[...l.value,u.filter((e=>e.type==h))[0]]),d.length>0&&(l.value=[...l.value,d.filter((e=>e.type==m))[0]]),c.value=!0})(),u.meData=await t(),formatAppLog("log","at pages/tabbar/mePage.vue:202","meData",u.meData),i.value=u.meData.primaryPositionId;const[a]=u.meData.positionList.filter((e=>e.crmId==i.value));s.value=null==a?void 0:a.typeName,o.value=null==a?void 0:a.shopName,await(async()=>{const{code:e,data:t}=await getPositionList({userId:u.meData.userId});0==e&&(u.positionList=t.filter((e=>["New","Active"].includes(e.shopStatus))).map((e=>({...e,positionList:d("positionCrmId",e.positionList)}))))})()};onShow((()=>{m()}));const p=()=>{navigatorToH5({path:"/trainResume"})},f=()=>{navigatorToH5({path:"/personalData"})};return(e,d)=>{const m=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),v=resolveEasycom(vue.resolveDynamicComponent("m-image"),_sfc_main$L),g=resolveEasycom(vue.resolveDynamicComponent("uni-grid-item"),__easycom_2$2),y=resolveEasycom(vue.resolveDynamicComponent("uni-grid"),__easycom_3$2),_=resolveEasycom(vue.resolveDynamicComponent("uni-list-item"),__easycom_4$1),w=resolveEasycom(vue.resolveDynamicComponent("uni-list"),__easycom_5),k=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1),b=resolveEasycom(vue.resolveDynamicComponent("uni-section"),__easycom_1$2),S=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_7);return vue.openBlock(),vue.createElementBlock("view",{class:"min-h-screen bg-page-gray"},[vue.createElementVNode("view",{class:"relative p-4"},[vue.createElementVNode("image",{class:"absolute left-0 right-0 top-0 bottom-0 w-screen",mode:"aspectFill",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221103/aGVhZGVyLXN0YXR1cy1iZ2MuMTY2NzQ1NDQwNDcyOA==.png"}),vue.createElementVNode("view",{class:"z-1 relative my-4"},[vue.createElementVNode("view",{class:"flex justify-between"},[vue.createElementVNode("view",{class:"flex flex-1 items-center"},[vue.createElementVNode("view",{class:"mr-2 h-14 w-14 overflow-hidden rounded-full"},[""==u.meData.headPortrait?(vue.openBlock(),vue.createBlock(m,{key:0,color:"#fff",type:"contact-filled",size:"50"})):(vue.openBlock(),vue.createElementBlock("image",{key:1,class:"h-full w-full",mode:"aspectFill",src:u.meData.headPortrait,onError:d[0]||(d[0]=e=>u.meData.headPortrait="")},null,40,["src"]))]),vue.createElementVNode("view",{class:"text-white"},[vue.createElementVNode("view",null,vue.toDisplayString(u.meData.username),1),vue.createElementVNode("view",{class:"mt-1 text-sm"},vue.toDisplayString(u.meData.account),1),c.value?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"mt-2"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(l.value,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t,class:"tag-item flex items-center rounded-full px-2 py-1 text-xs text-white",onClick:p},[vue.createVNode(v,{width:"30rpx",height:"30rpx",src:e.icon},null,8,["src"]),vue.createElementVNode("text",{class:"mx-1"},vue.toDisplayString(e.position),1),vue.createVNode(m,{type:"right",size:"14"})])))),128))])):vue.createCommentVNode("v-if",!0)])]),vue.createElementVNode("view",{class:"flex h-6 items-center rounded-full bg-white bg-opacity-30 px-4",onClick:f},[vue.createElementVNode("text",{class:"text-xs leading-none text-white"},"编辑门店")])])]),vue.createElementVNode("view",{class:"z-1 relative flex items-center justify-start rounded-xl bg-white bg-opacity-10 p-2 text-left"},[vue.createElementVNode("view",{class:"shrink-0 rounded-full bg-white",onClick:d[1]||(d[1]=e=>n.value.open())},[vue.createElementVNode("view",{class:"p-2 text-xs"},[vue.createElementVNode("text",{class:"h-full text-theme-blue"},vue.toDisplayString(s.value),1),vue.createVNode(m,{type:"forward",size:"12",color:"#007aff"})])]),vue.createElementVNode("view",{class:"ml-2 flex-1 break-all text-xs text-white"},vue.toDisplayString(o.value),1)])]),vue.createElementVNode("view",{class:"z-1 relative m-4 rounded-lg bg-white shadow"},[vue.createVNode(ExchangeSignCard)]),vue.createElementVNode("view",{class:"z-1 relative m-4 rounded-lg bg-white shadow"},[vue.createVNode(y,{column:4,"show-border":!1},{default:vue.withCtx((()=>[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,(e=>vue.createVNode(g,{key:e.id},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex h-full flex-col justify-center text-center",onClick:t=>(e=>{navigatorToH5({path:e.path})})(e)},[vue.createElementVNode("image",{class:"mb-2 h-10 w-full",mode:"aspectFit",src:e.icon},null,8,["src"]),vue.createElementVNode("text",{class:"text-xs text-gray-600"},vue.toDisplayString(e.text),1)],8,["onClick"])])),_:2},1024))),64))])),_:1})]),vue.createElementVNode("view",{class:"z-1 relative m-4 overflow-hidden rounded-lg bg-white shadow"},[vue.createVNode(w,null,{default:vue.withCtx((()=>[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(a,(e=>vue.createVNode(_,{key:e.id,title:e.text,"right-text":7==e.id?`版本号：${r.value}`:null,"show-arrow":"",clickable:"",thumb:e.icon,onClick:t=>(e=>{navigatorToH5({path:e.path})})(e)},null,8,["title","right-text","thumb","onClick"]))),64))])),_:1})]),vue.createElementVNode("view",{class:"m-4"},[vue.createVNode(k,{round:"",block:"",type:"primary",onClick:h},{default:vue.withCtx((()=>[vue.createTextVNode("退出账号")])),_:1})]),vue.createElementVNode("view",{class:"h-4"}),vue.createVNode(S,{ref_key:"popupRef",ref:n,type:"bottom","background-color":"#fff","safe-area":!1},{default:vue.withCtx((()=>[vue.createVNode(b,{title:"职位切换"},{right:vue.withCtx((()=>[vue.createVNode(m,{type:"clear",size:"30",onClick:d[2]||(d[2]=e=>n.value.close())})])),_:1}),vue.createElementVNode("view",{class:"bg-page-gray"},[vue.createElementVNode("scroll-view",{"scroll-y":!0,style:{"max-height":"80vh"}},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(u.positionList,(e=>(vue.openBlock(),vue.createElementBlock("view",{key:e.shopId,class:"m-2 rounded bg-white p-2 shadow"},[vue.createElementVNode("view",{class:"mb-2 break-all text-sm"},vue.toDisplayString(e.shopName),1),vue.createElementVNode("view",{class:"flex flex-wrap"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.positionList,((t,a)=>(vue.openBlock(),vue.createElementBlock("view",{key:a,class:"mr-2 mb-2"},[vue.createVNode(k,{disabled:!t.enable,type:i.value==t.positionCrmId?"primary":"default",size:"small",onClick:a=>(async(e,t)=>{i.value=t.positionCrmId,s.value=t.positionName,o.value=e.shopName,await udpateUserInfo({primaryPositionId:t.positionCrmId,updateBy:u.meData.userId});const{useUserInfoSync:a}=userStore();a({reload:!0}),n.value.close()})(e,t)},{default:vue.withCtx((()=>[vue.createElementVNode("text",null,vue.toDisplayString(t.positionName),1),t.enable?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("text",{key:0},"~失效"))])),_:2},1032,["disabled","type","onClick"])])))),128))])])))),128))])])])),_:1},512)])}}},PagesTabbarMePage=_export_sfc(_sfc_main$l,[["__scopeId","data-v-7fbc38d8"]]);function obj2strClass(e){let t="";for(let a in e){e[a]&&(t+=`${a} `)}return t}function obj2strStyle(e){let t="";for(let a in e){t+=`${a}:${e[a]};`}return t}const _sfc_main$k={name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!0},passwordIcon:{type:Boolean,default:!0},styles:{type:Object,default:()=>({color:"#333",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:""}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return obj2strClass({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled})},inputContentStyle(){const e=this.focusShow?"#2979ff":this.styles.borderColor;return obj2strStyle({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:"#fff"})},inputStyle(){return obj2strStyle({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("focus",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.$emit("change",this.val)},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}};function _sfc_render$7(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3);return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-easyinput",{"uni-easyinput-error":s.msg}]),style:vue.normalizeStyle(s.boxStyle)},[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-easyinput__content",s.inputContentClass]),style:vue.normalizeStyle(s.inputContentStyle)},[a.prefixIcon?(vue.openBlock(),vue.createBlock(o,{key:0,class:"content-clear-icon",type:a.prefixIcon,color:"#c0c4cc",onClick:t[0]||(t[0]=e=>s.onClickIcon("prefix")),size:"22"},null,8,["type"])):vue.createCommentVNode("v-if",!0),"textarea"===a.type?(vue.openBlock(),vue.createElementBlock("textarea",{key:1,class:vue.normalizeClass(["uni-easyinput__content-textarea",{"input-padding":a.inputBorder}]),name:a.name,value:i.val,placeholder:a.placeholder,placeholderStyle:a.placeholderStyle,disabled:a.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:s.inputMaxlength,focus:i.focused,autoHeight:a.autoHeight,onInput:t[1]||(t[1]=(...e)=>s.onInput&&s.onInput(...e)),onBlur:t[2]||(t[2]=(...e)=>s._Blur&&s._Blur(...e)),onFocus:t[3]||(t[3]=(...e)=>s._Focus&&s._Focus(...e)),onConfirm:t[4]||(t[4]=(...e)=>s.onConfirm&&s.onConfirm(...e))},null,42,["name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight"])):(vue.openBlock(),vue.createElementBlock("input",{key:2,type:"password"===a.type?"text":a.type,class:"uni-easyinput__content-input",style:vue.normalizeStyle(s.inputStyle),name:a.name,value:i.val,password:!i.showPassword&&"password"===a.type,placeholder:a.placeholder,placeholderStyle:a.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:a.disabled,maxlength:s.inputMaxlength,focus:i.focused,confirmType:a.confirmType,onFocus:t[5]||(t[5]=(...e)=>s._Focus&&s._Focus(...e)),onBlur:t[6]||(t[6]=(...e)=>s._Blur&&s._Blur(...e)),onInput:t[7]||(t[7]=(...e)=>s.onInput&&s.onInput(...e)),onConfirm:t[8]||(t[8]=(...e)=>s.onConfirm&&s.onConfirm(...e))},null,44,["type","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType"])),"password"===a.type&&a.passwordIcon?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[vue.createCommentVNode(" 开启密码时显示小眼睛 "),s.isVal?(vue.openBlock(),vue.createBlock(o,{key:0,class:vue.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===a.type}]),type:i.showPassword?"eye-slash-filled":"eye-filled",size:22,color:i.focusShow?"#2979ff":"#c0c4cc",onClick:s.onEyes},null,8,["class","type","color","onClick"])):vue.createCommentVNode("v-if",!0)],64)):a.suffixIcon?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:4},[a.suffixIcon?(vue.openBlock(),vue.createBlock(o,{key:0,class:"content-clear-icon",type:a.suffixIcon,color:"#c0c4cc",onClick:t[9]||(t[9]=e=>s.onClickIcon("suffix")),size:"22"},null,8,["type"])):vue.createCommentVNode("v-if",!0)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:5},[a.clearable&&s.isVal&&!a.disabled&&"textarea"!==a.type?(vue.openBlock(),vue.createBlock(o,{key:0,class:vue.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===a.type}]),type:"clear",size:a.clearSize,color:s.msg?"#dd524d":i.focusShow?"#2979ff":"#c0c4cc",onClick:s.onClear},null,8,["class","size","color","onClick"])):vue.createCommentVNode("v-if",!0)],64)),vue.renderSlot(e.$slots,"right",{},void 0,!0)],6)],6)}const __easycom_2$1=_export_sfc(_sfc_main$k,[["render",_sfc_render$7],["__scopeId","data-v-821449c8"]]),_sfc_main$j={name:"uniFormsItem",options:{virtualHost:!0},provide(){return{uniFormItem:this}},inject:{form:{from:"uniForm",default:null}},props:{rules:{type:Array,default:()=>null},name:{type:[String,Array],default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:""},errorMessage:{type:[String,Boolean],default:""},leftIcon:String,iconColor:{type:String,default:"#606266"}},data:()=>({errMsg:"",isRequired:!1,userRules:null,localLabelAlign:"left",localLabelWidth:"65px",localLabelPos:"left",border:!1,isFirstBorder:!1}),computed:{msg(){return this.errorMessage||this.errMsg}},watch:{"form.formRules"(e){this.init()},"form.labelWidth"(e){this.localLabelWidth=this._labelWidthUnit(e)},"form.labelPosition"(e){this.localLabelPos=this._labelPosition()},"form.labelAlign"(e){}},created(){this.init(!0),this.name&&this.form&&this.$watch((()=>this.form._getDataValue(this.name,this.form.localData)),((e,t)=>{if(!this.form._isEqual(e,t)){const t=this.itemSetValue(e);this.onFieldChange(t,!1)}}),{immediate:!1})},unmounted(){this.__isUnmounted=!0,this.unInit()},methods:{setRules(e=null){this.userRules=e,this.init(!1)},setValue(){},async onFieldChange(e,t=!0){const{formData:a,localData:n,errShowType:i,validateCheck:s,validateTrigger:o,_isRequiredField:r,_realName:l}=this.form,c=l(this.name);e||(e=this.form.formData[c]);const u=this.itemRules.rules&&this.itemRules.rules.length;if(!this.validator||!u||0===u)return;const d=r(this.itemRules.rules||[]);let h=null;return"bind"===o||t?(h=await this.validator.validateUpdate({[c]:e},a),d||void 0!==e&&""!==e||(h=null),h&&h.errorMessage?("undertext"===i&&(this.errMsg=h?h.errorMessage:""),"toast"===i&&uni.showToast({title:h.errorMessage||"校验错误",icon:"none"}),"modal"===i&&uni.showModal({title:"提示",content:h.errorMessage||"校验错误"})):this.errMsg="",s(h||null)):this.errMsg="",h||null},init(e=!1){const{validator:t,formRules:a,childrens:n,formData:i,localData:s,_realName:o,labelWidth:r,_getDataValue:l,_setDataValue:c}=this.form||{};if(this.localLabelAlign=this._justifyContent(),this.localLabelWidth=this._labelWidthUnit(r),this.localLabelPos=this._labelPosition(),this.isRequired=this.required,this.form&&e&&n.push(this),!t||!a)return;this.form.isFirstBorder||(this.form.isFirstBorder=!0,this.isFirstBorder=!0),this.group&&(this.group.isFirstBorder||(this.group.isFirstBorder=!0,this.isFirstBorder=!0)),this.border=this.form.border;const u=o(this.name),d=this.userRules||this.rules;"object"==typeof a&&d&&(a[u]={rules:d},t.updateSchema(a));const h=a[u]||{};this.itemRules=h,this.validator=t,this.itemSetValue(l(this.name,s)),this.isRequired=this._isRequired()},unInit(){if(this.form){const{childrens:e,formData:t,_realName:a}=this.form;e.forEach(((e,n)=>{e===this&&(this.form.childrens.splice(n,1),delete t[a(e.name)])}))}},itemSetValue(e){const t=this.form._realName(this.name),a=this.itemRules.rules||[],n=this.form._getValue(t,e,a);return this.form._setDataValue(t,this.form.formData,n),n},clearValidate(){this.errMsg=""},_isRequired(){return this.required},_justifyContent(){if(this.form){const{labelAlign:e}=this.form;let t=this.labelAlign?this.labelAlign:e;if("left"===t)return"flex-start";if("center"===t)return"center";if("right"===t)return"flex-end"}return"flex-start"},_labelWidthUnit(e){return this.num2px(this.labelWidth?this.labelWidth:e||(this.label?65:"auto"))},_labelPosition(){return this.form&&this.form.labelPosition||"left"},isTrigger:(e,t,a)=>"submit"!==e&&e?"bind":void 0===e?"bind"!==t?t?"submit":""===a?"bind":"submit":"bind":"submit",num2px:e=>"number"==typeof e?`${e}px`:e}};function _sfc_render$6(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["uni-forms-item",["is-direction-"+i.localLabelPos,i.border?"uni-forms-item--border":"",i.border&&i.isFirstBorder?"is-first-border":""]])},[vue.renderSlot(e.$slots,"label",{},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["uni-forms-item__label",{"no-label":!a.label&&!i.isRequired}]),style:vue.normalizeStyle({width:i.localLabelWidth,justifyContent:i.localLabelAlign})},[i.isRequired?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"is-required"},"*")):vue.createCommentVNode("v-if",!0),vue.createElementVNode("text",null,vue.toDisplayString(a.label),1)],6)]),!0),vue.createElementVNode("view",{class:"uni-forms-item__content"},[vue.renderSlot(e.$slots,"default",{},void 0,!0),vue.createElementVNode("view",{class:vue.normalizeClass(["uni-forms-item__error",{"msg--active":s.msg}])},[vue.createElementVNode("text",null,vue.toDisplayString(s.msg),1)],2)])],2)}const __easycom_3=_export_sfc(_sfc_main$j,[["render",_sfc_render$6],["__scopeId","data-v-5a7e4d26"]]);var pattern={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")};const FORMAT_MAPPING={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function formatMessage(e,t=""){["label"].forEach((t=>{void 0===e[t]&&(e[t]="")}));let a=t;for(let n in e){let t=new RegExp("{"+n+"}");a=a.replace(t,e[n])}return a}function isEmptyValue(e,t){return null==e||("string"==typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length))}const types={integer:e=>types.number(e)&&parseInt(e,10)===e,string:e=>"string"==typeof e,number:e=>!isNaN(e)&&"number"==typeof e,boolean:function(e){return"boolean"==typeof e},float:function(e){return types.number(e)&&!types.integer(e)},array:e=>Array.isArray(e),object:e=>"object"==typeof e&&!types.array(e),date:e=>e instanceof Date,timestamp(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:e=>"string"==typeof e.url,email:e=>"string"==typeof e&&!!e.match(pattern.email)&&e.length<255,url:e=>"string"==typeof e&&!!e.match(pattern.url),pattern(t,a){try{return new RegExp(t).test(a)}catch(e){return!1}},method:e=>"function"==typeof e,idcard:e=>"string"==typeof e&&!!e.match(pattern.idcard),"url-https"(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":e=>e.startsWith("://"),"url-web":e=>!1};class RuleValidator{constructor(e){this._message=e}async validateRule(e,t,a,n,i){var s=null;let o=t.rules;if(o.findIndex((e=>e.required))<0){if(null==a)return s;if("string"==typeof a&&!a.length)return s}var r=this._message;if(void 0===o)return r.default;for(var l=0;l<o.length;l++){let c=o[l],u=this._getValidateType(c);if(Object.assign(c,{label:t.label||`["${e}"]`}),RuleValidatorHelper[u]&&null!=(s=RuleValidatorHelper[u](c,a,r)))break;if(c.validateExpr){let e=Date.now();if(!1===c.validateExpr(a,i,e)){s=this._getMessage(c,c.errorMessage||this._message.default);break}}if(c.validateFunction&&null!==(s=await this.validateFunction(c,a,n,i,u)))break}return null!==s&&(s=r.TAG+s),s}async validateFunction(t,a,n,i,s){let o=null;try{let e=null;const r=await t.validateFunction(t,a,i||n,(t=>{e=t}));(e||"string"==typeof r&&r||!1===r)&&(o=this._getMessage(t,e||r,s))}catch(e){o=this._getMessage(t,e.message,s)}return o}_getMessage(e,t,a){return formatMessage(e,t||e.errorMessage||this._message[a]||t.default)}_getValidateType(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}const RuleValidatorHelper={required:(e,t,a)=>e.required&&isEmptyValue(t,e.format||typeof t)?formatMessage(e,e.errorMessage||a.required):null,range(e,t,a){const{range:n,errorMessage:i}=e;let s=new Array(n.length);for(let r=0;r<n.length;r++){const e=n[r];types.object(e)&&void 0!==e.value?s[r]=e.value:s[r]=e}let o=!1;return Array.isArray(t)?o=new Set(t.concat(s)).size===s.length:s.indexOf(t)>-1&&(o=!0),o?null:formatMessage(e,i||a.enum)},rangeNumber(e,t,a){if(!types.number(t))return formatMessage(e,e.errorMessage||a.pattern.mismatch);let{minimum:n,maximum:i,exclusiveMinimum:s,exclusiveMaximum:o}=e,r=s?t<=n:t<n,l=o?t>=i:t>i;return void 0!==n&&r?formatMessage(e,e.errorMessage||a.number[s?"exclusiveMinimum":"minimum"]):void 0!==i&&l?formatMessage(e,e.errorMessage||a.number[o?"exclusiveMaximum":"maximum"]):void 0!==n&&void 0!==i&&(r||l)?formatMessage(e,e.errorMessage||a.number.range):null},rangeLength(e,t,a){if(!types.string(t)&&!types.array(t))return formatMessage(e,e.errorMessage||a.pattern.mismatch);let n=e.minLength,i=e.maxLength,s=t.length;return void 0!==n&&s<n?formatMessage(e,e.errorMessage||a.length.minLength):void 0!==i&&s>i?formatMessage(e,e.errorMessage||a.length.maxLength):void 0!==n&&void 0!==i&&(s<n||s>i)?formatMessage(e,e.errorMessage||a.length.range):null},pattern:(e,t,a)=>types.pattern(e.pattern,t)?null:formatMessage(e,e.errorMessage||a.pattern.mismatch),format(e,t,a){var n=Object.keys(types),i=FORMAT_MAPPING[e.format]?FORMAT_MAPPING[e.format]:e.format||e.arrayType;return n.indexOf(i)>-1&&!types[i](t)?formatMessage(e,e.errorMessage||a.typeError):null},arrayTypeFormat(e,t,a){if(!Array.isArray(t))return formatMessage(e,e.errorMessage||a.typeError);for(let n=0;n<t.length;n++){const i=t[n];let s=this.format(e,i,a);if(null!==s)return s}return null}};class SchemaValidator extends RuleValidator{constructor(e,t){super(SchemaValidator.message),this._schema=e,this._options=t||null}updateSchema(e){this._schema=e}async validate(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidate(e,!1,t)),a.length?a[0]:null}async validateAll(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidate(e,!0,t)),a}async validateUpdate(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidateUpdate(e,!1,t)),a.length?a[0]:null}async invokeValidate(e,t,a){let n=[],i=this._schema;for(let s in i){let o=i[s],r=await this.validateRule(s,o,e[s],e,a);if(null!=r&&(n.push({key:s,errorMessage:r}),!t))break}return n}async invokeValidateUpdate(e,t,a){let n=[];for(let i in e){let s=await this.validateRule(i,this._schema[i],e[i],e,a);if(null!=s&&(n.push({key:i,errorMessage:s}),!t))break}return n}_checkFieldInSchema(e){var t=Object.keys(e),a=Object.keys(this._schema);if(new Set(t.concat(a)).size===a.length)return"";var n=t.filter((e=>a.indexOf(e)<0));return[{key:"invalid",errorMessage:formatMessage({field:JSON.stringify(n)},SchemaValidator.message.TAG+SchemaValidator.message.defaultInvalid)}]}}function Message(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}}SchemaValidator.message=new Message;const deepCopy=e=>JSON.parse(JSON.stringify(e)),typeFilter=e=>"int"===e||"double"===e||"number"===e||"timestamp"===e,getValue=(e,t,a)=>{const n=a.find((e=>e.format&&typeFilter(e.format))),i=a.find((e=>e.format&&"boolean"===e.format||"bool"===e.format));return n&&(t=t||0===t?isNumber(Number(t))?Number(t):t:null),i&&(t=!!isBoolean(t)&&t),t},setDataValue=(e,t,a)=>(t[e]=a,a||""),getDataValue=(e,t)=>objGet(t,e),realName=(e,t={})=>{const a=_basePath(e);if("object"==typeof a&&Array.isArray(a)&&a.length>1){return a.reduce(((e,t)=>e+`#${t}`),"_formdata_")}return a[0]||e},isRealName=e=>/^_formdata_#*/.test(e),rawData=(e={},t)=>{let a=JSON.parse(JSON.stringify(e)),n={};for(let i in a){let e=name2arr(i);objSet(n,e,a[i])}return n},name2arr=e=>{let t=e.replace("_formdata_#","");return t=t.split("#").map((e=>isNumber(e)?Number(e):e)),t},objSet=(e,t,a)=>("object"!=typeof e||_basePath(t).reduce(((e,t,n,i)=>n===i.length-1?(e[t]=a,null):(t in e||(e[t]=/^[0-9]{1,}$/.test(i[n+1])?[]:{}),e[t])),e),e);function _basePath(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")}const objGet=(e,t,a="undefined")=>{let n=_basePath(t).reduce(((e,t)=>(e||{})[t]),e);return n&&void 0===n?a:n},isNumber=e=>!isNaN(Number(e)),isBoolean=e=>"boolean"==typeof e,isRequiredField=e=>{let t=!1;for(let a=0;a<e.length;a++){if(e[a].required){t=!0;break}}return t},isEqual=(e,t)=>{if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var a=toString.call(e);if(a!==toString.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}if("[object Object]"==a){var n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(n.length!=i.length)return!1;for(var s=0;s<n.length;s++){var o=n[s];if(e[o]!==t[o])return!1}return!0}return"[object Array]"==a?e.toString()==t.toString():void 0},_sfc_main$i={name:"uniForms",emits:["validate","submit"],options:{virtualHost:!0},props:{value:{type:Object,default:()=>null},modelValue:{type:Object,default:()=>null},model:{type:Object,default:()=>null},rules:{type:Object,default:()=>({})},errShowType:{type:String,default:"undertext"},validateTrigger:{type:String,default:"submit"},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},border:{type:Boolean,default:!1}},provide(){return{uniForm:this}},data:()=>({formData:{},formRules:{}}),computed:{localData(){const e=this.model||this.modelValue||this.value;return e?deepCopy(e):{}}},watch:{rules:{handler:function(e,t){this.setRules(e)},deep:!0,immediate:!0}},created(){getApp().$vm.$.appContext.config.globalProperties.binddata||(getApp().$vm.$.appContext.config.globalProperties.binddata=function(e,t,a){if(a)this.$refs[a].setValue(e,t);else{let a;for(let e in this.$refs){const t=this.$refs[e];if(t&&t.$options&&"uniForms"===t.$options.name){a=t;break}}if(!a)return console.error("当前 uni-froms 组件缺少 ref 属性");a.setValue(e,t)}}),this.childrens=[],this.inputChildrens=[],this.setRules(this.rules)},methods:{setRules(e){this.formRules=Object.assign({},this.formRules,e),this.validator=new SchemaValidator(e)},setValue(e,t){let a=this.childrens.find((t=>t.name===e));return a?(this.formData[e]=getValue(e,t,this.formRules[e]&&this.formRules[e].rules||[]),a.onFieldChange(this.formData[e])):null},validate(e,t){return this.checkAll(this.formData,e,t)},validateField(e=[],t){e=[].concat(e);let a={};return this.childrens.forEach((t=>{const n=realName(t.name);-1!==e.indexOf(n)&&(a=Object.assign({},a,{[n]:this.formData[n]}))})),this.checkAll(a,[],t)},clearValidate(e=[]){e=[].concat(e),this.childrens.forEach((t=>{if(0===e.length)t.errMsg="";else{const a=realName(t.name);-1!==e.indexOf(a)&&(t.errMsg="")}}))},submit(e,t,a){for(let n in this.dataValue){this.childrens.find((e=>e.name===n))&&void 0===this.formData[n]&&(this.formData[n]=this._getValue(n,this.dataValue[n]))}return a||console.warn("submit 方法即将废弃，请使用validate方法代替！"),this.checkAll(this.formData,e,t,"submit")},async checkAll(e,t,a,n){if(!this.validator)return;let i,s=[];for(let c in e){const e=this.childrens.find((e=>realName(e.name)===c));e&&s.push(e)}a||"function"!=typeof t||(a=t),!a&&"function"!=typeof a&&Promise&&(i=new Promise(((e,t)=>{a=function(a,n){a?t(a):e(n)}})));let o=[],r=JSON.parse(JSON.stringify(e));for(let c in s){const e=s[c];let t=realName(e.name);const a=await e.onFieldChange(r[t]);if(a&&(o.push(a),"toast"===this.errShowType||"modal"===this.errShowType))break}Array.isArray(o)&&0===o.length&&(o=null),Array.isArray(t)&&t.forEach((e=>{let t=realName(e),a=getDataValue(e,this.localData);void 0!==a&&(r[t]=a)})),"submit"===n?this.$emit("submit",{detail:{value:r,errors:o}}):this.$emit("validate",o);let l={};return l=rawData(r,this.name),a&&"function"==typeof a&&a(o,l),i&&a?i:null},validateCheck(e){this.$emit("validate",e)},_getValue:getValue,_isRequiredField:isRequiredField,_setDataValue:setDataValue,_getDataValue:getDataValue,_realName:realName,_isRealName:isRealName,_isEqual:isEqual}};function _sfc_render$5(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-forms"},[vue.createElementVNode("form",null,[vue.renderSlot(e.$slots,"default",{},void 0,!0)])])}const __easycom_4=_export_sfc(_sfc_main$i,[["render",_sfc_render$5],["__scopeId","data-v-9d4afbf7"]]),_sfc_main$h={__name:"loginPage",setup(e){const t="USER_LOGIN",a=vue.ref(null),n=vue.ref("1"),i=vue.ref(!1),s=vue.ref(0),o=vue.reactive({form:{account:"",password:""},list:[{text:"账号",key:"account",active:!1},{text:"密码",key:"password",active:!1}]}),r=vue.computed((()=>e=>e.active||""!=o.form[e.key])),l=vue.computed((()=>({account:{rules:[{required:!0,errorMessage:"请填写账号"}],validateTrigger:"submit"},password:{rules:[{required:!0,errorMessage:"请填写密码"}],validateTrigger:"submit"}}))),c=()=>{n.value?setStorage(t,o.form):removeStorage(t)},u=async()=>{uni.switchTab({url:"/pages/tabbar/workPage"})},d=async()=>{try{i.value=!0;const{account:e,password:t}=await a.value.validate();await accountLogin({account:e,password:t}),c(),u()}catch(e){formatAppLog("warn","at pages/login/loginPage.vue:63",e)}finally{i.value=!1}},h=async()=>{try{if(++s.value,s.value<=2)return;s.value=0;const{account:e}=await a.value.validate();await showModal("是否免密登录？"),i.value=!0,await forceLogin({account:e}),c(),u()}finally{i.value=!1}},m=()=>{navigateTo({url:"/pages/login/phoneLogin"})},p=()=>{navigateTo({url:"/pages/login/forgetPassword?account="+o.form.account})};return(()=>{const e=getStorage(t);e&&(o.form=e)})(),(e,t)=>{const i=resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"),__easycom_2$1),s=resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"),__easycom_3),c=resolveEasycom(vue.resolveDynamicComponent("uni-forms"),__easycom_4),u=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1);return vue.openBlock(),vue.createElementBlock("view",{class:"container"},[vue.createElementVNode("view",{class:"login-bgc"},[vue.createElementVNode("image",{class:"bgc-image",mode:"widthFix",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221103/bG9naW5fYmdjLjE2Njc0MzY2MzUxMDE=.png"})]),vue.createElementVNode("view",{class:"login-welcome"},[vue.createElementVNode("image",{class:"logo",mode:"aspectFill",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221013/dmVyLjE2NjU2NDMyODg5Mzk=.png",onClick:h}),vue.createElementVNode("view",null,[vue.createElementVNode("text",null,"Hi,")]),vue.createElementVNode("text",{class:"login-welcome__tips"},"欢迎使用营销助手")]),vue.createElementVNode("view",{class:"login-form"},[vue.createVNode(c,{ref_key:"formRef",ref:a,model:o.form,rules:vue.unref(l)},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.list,((e,t)=>(vue.openBlock(),vue.createBlock(s,{key:t,name:e.key},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"login-form__item"},[vue.createElementVNode("text",{class:vue.normalizeClass(["form-label",{active:vue.unref(r)(e)}])},vue.toDisplayString(e.text),3),vue.createVNode(i,{modelValue:o.form[e.key],"onUpdate:modelValue":t=>o.form[e.key]=t,class:"login-form-input",trim:"all","input-border":!1,type:"password"==e.key?"password":"text",onFocus:t=>e.active=!0,onBlur:t=>e.active=!1},null,8,["modelValue","onUpdate:modelValue","type","onFocus","onBlur"]),vue.createElementVNode("view",{class:vue.normalizeClass(["form-item__line",{active:e.active}])},null,2)])])),_:2},1032,["name"])))),128)),vue.createElementVNode("view",{class:"form-footer"},[vue.createElementVNode("label",null,[vue.createElementVNode("checkbox",{style:{transform:"scale(0.8)"},value:"1",checked:n.value},null,8,["checked"]),vue.createTextVNode(" 记住密码 ")]),vue.createElementVNode("view",null,[vue.createElementVNode("text",{class:"forget",onClick:p},"忘记密码？")])])])),_:1},8,["model","rules"]),vue.createVNode(u,{round:"",type:"primary",block:"","loading-click":d},{default:vue.withCtx((()=>[vue.createTextVNode(" 登录 ")])),_:1}),vue.createElementVNode("view",{class:"phone-login"},[vue.createElementVNode("text",{onClick:m},"金蝶账号登录")])])])}}},PagesLoginLoginPage=_export_sfc(_sfc_main$h,[["__scopeId","data-v-02626630"]]),en$1={"uni-countdown.day":"day","uni-countdown.h":"h","uni-countdown.m":"m","uni-countdown.s":"s"},zhHans$1={"uni-countdown.day":"天","uni-countdown.h":"时","uni-countdown.m":"分","uni-countdown.s":"秒"},zhHant$1={"uni-countdown.day":"天","uni-countdown.h":"時","uni-countdown.m":"分","uni-countdown.s":"秒"},messages$1={en:en$1,"zh-Hans":zhHans$1,"zh-Hant":zhHant$1},{t:t$2}=initVueI18n(messages$1),_sfc_main$g={name:"UniCountdown",emits:["timeup"],props:{showDay:{type:Boolean,default:!0},showColon:{type:Boolean,default:!0},start:{type:Boolean,default:!0},backgroundColor:{type:String,default:""},color:{type:String,default:"#333"},fontSize:{type:Number,default:14},splitorColor:{type:String,default:"#333"},day:{type:Number,default:0},hour:{type:Number,default:0},minute:{type:Number,default:0},second:{type:Number,default:0},timestamp:{type:Number,default:0}},data:()=>({timer:null,syncFlag:!1,d:"00",h:"00",i:"00",s:"00",leftTime:0,seconds:0}),computed:{dayText:()=>t$2("uni-countdown.day"),hourText:e=>t$2("uni-countdown.h"),minuteText:e=>t$2("uni-countdown.m"),secondText:e=>t$2("uni-countdown.s"),timeStyle(){const{color:e,backgroundColor:t,fontSize:a}=this;return{color:e,backgroundColor:t,fontSize:`${a}px`,width:22*a/14+"px",lineHeight:20*a/14+"px",borderRadius:3*a/14+"px"}},splitorStyle(){const{splitorColor:e,fontSize:t,backgroundColor:a}=this;return{color:e,fontSize:12*t/14+"px",margin:a?4*t/14+"px":""}}},watch:{day(e){this.changeFlag()},hour(e){this.changeFlag()},minute(e){this.changeFlag()},second(e){this.changeFlag()},start:{immediate:!0,handler(e,t){if(e)this.startData();else{if(!t)return;clearInterval(this.timer)}}}},created:function(e){this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.countDown()},unmounted(){clearInterval(this.timer)},methods:{toSeconds:(e,t,a,n,i)=>e?e-parseInt((new Date).getTime()/1e3,10):60*t*60*24+60*a*60+60*n+i,timeUp(){clearInterval(this.timer),this.$emit("timeup")},countDown(){let e=this.seconds,[t,a,n,i]=[0,0,0,0];e>0?(t=Math.floor(e/86400),a=Math.floor(e/3600)-24*t,n=Math.floor(e/60)-24*t*60-60*a,i=Math.floor(e)-24*t*60*60-60*a*60-60*n):this.timeUp(),t<10&&(t="0"+t),a<10&&(a="0"+a),n<10&&(n="0"+n),i<10&&(i="0"+i),this.d=t,this.h=a,this.i=n,this.s=i},startData(){if(this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.seconds<=0)return this.seconds=this.toSeconds(0,0,0,0,0),void this.countDown();clearInterval(this.timer),this.countDown(),this.timer=setInterval((()=>{this.seconds--,this.seconds<0?this.timeUp():this.countDown()}),1e3)},update(){this.startData()},changeFlag(){this.syncFlag||(this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.startData(),this.syncFlag=!0)}}};function _sfc_render$4(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-countdown"},[a.showDay?(vue.openBlock(),vue.createElementBlock("text",{key:0,style:vue.normalizeStyle([s.timeStyle]),class:"uni-countdown__number"},vue.toDisplayString(i.d),5)):vue.createCommentVNode("v-if",!0),a.showDay?(vue.openBlock(),vue.createElementBlock("text",{key:1,style:vue.normalizeStyle([s.splitorStyle]),class:"uni-countdown__splitor"},vue.toDisplayString(s.dayText),5)):vue.createCommentVNode("v-if",!0),vue.createElementVNode("text",{style:vue.normalizeStyle([s.timeStyle]),class:"uni-countdown__number"},vue.toDisplayString(i.h),5),vue.createElementVNode("text",{style:vue.normalizeStyle([s.splitorStyle]),class:"uni-countdown__splitor"},vue.toDisplayString(a.showColon?":":s.hourText),5),vue.createElementVNode("text",{style:vue.normalizeStyle([s.timeStyle]),class:"uni-countdown__number"},vue.toDisplayString(i.i),5),vue.createElementVNode("text",{style:vue.normalizeStyle([s.splitorStyle]),class:"uni-countdown__splitor"},vue.toDisplayString(a.showColon?":":s.minuteText),5),vue.createElementVNode("text",{style:vue.normalizeStyle([s.timeStyle]),class:"uni-countdown__number"},vue.toDisplayString(i.s),5),a.showColon?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("text",{key:2,style:vue.normalizeStyle([s.splitorStyle]),class:"uni-countdown__splitor"},vue.toDisplayString(s.secondText),5))])}const __easycom_0$1=_export_sfc(_sfc_main$g,[["render",_sfc_render$4],["__scopeId","data-v-e03514a6"]]),_sfc_main$f={__name:"CountDown",props:{format:{type:String,default:"ss 秒重新获取"},request:{type:Function,default:()=>{},require:!0},duration:{type:Number,default:60},cookieKey:{type:String,default:"count-down-seconds"}},setup(e){const t=e,a=vue.useAttrs(),n=vue.ref(0),i=vue.ref(0),s=({key:e,duration:t=60,seconds:a})=>{if(!a){const a=getStorage(e);if(!a)return 0;removeStorage(e);const{time:n,s:i}=a,s=((new Date).getTime()-n)/1e3;return s-t>=0?0:i-s}setStorage(e,{time:(new Date).getTime(),s:a})};onShow((()=>{(()=>{const e=s({key:t.cookieKey});n.value=Number(e),n.value>0&&(i.value=1)})()}));const o=e=>{n.value=0},r=async()=>{n.value>0||(await t.request(),n.value=t.duration,i.value=1,setInterval((()=>{0!=n.value&&(--n.value,s({key:t.cookieKey,duration:t.duration,seconds:n.value}))}),1e3))};return(e,t)=>{const s=resolveEasycom(vue.resolveDynamicComponent("uni-countdown"),__easycom_0$1),l=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1);return vue.openBlock(),vue.createBlock(l,vue.mergeProps({type:"success","loading-click":r},vue.unref(a)),{default:vue.withCtx((()=>[n.value>0?(vue.openBlock(),vue.createBlock(s,{key:0,second:n.value,"show-day":!1,color:"#fff","splitor-color":"#fff",onTimeup:o},null,8,["second"])):(vue.openBlock(),vue.createElementBlock("label",{key:1,class:"lable"},vue.toDisplayString(0==i.value?"发送验证码":"重新获取"),1))])),_:1},16)}}},CountDown=_export_sfc(_sfc_main$f,[["__scopeId","data-v-e42b5246"]]),phoneReg=/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,websiteReg=/^(((ht|f)tps?):\/\/)?[\w-]+(\.[\w-]+)+([\w\-.,@?^=%&:/~+#]*[\w\-@?^=%&/~+#])?$/,passwordReg=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/;function vaildPhone(e){return phoneReg.lastIndex=0,phoneReg.test(e)}function vaildWebsite(e){return websiteReg.lastIndex=0,websiteReg.test(e)}function validPassword(e){return passwordReg.lastIndex=0,passwordReg.test(e)}const _sfc_main$e={__name:"forgetPassword",setup(e){const t="密码必须为6-18位字母和数字组合，英文区分大小写",a=vue.ref(""),n=vue.ref(0),i=vue.ref(null),s=vue.ref(null),o=vue.ref({}),r={sms:{rules:[{required:!0,errorMessage:"请填写验证码"}]},password:{rules:[{required:!0,errorMessage:"请填写密码"},{errorMessage:t,validateFunction:(e,t,a,n)=>validPassword(t)}]},repeatPassword:{rules:[{required:!0,errorMessage:"请填写确认密码"},{errorMessage:"确认密码与新密码不一致",validateFunction:(e,t,a,n)=>a.password==a.repeatPassword}]}};onLoad((e=>{a.value=null==e?void 0:e.account}));const l=async()=>{const{account:e}=await i.value.validate(),{code:t,data:a}=await getUserPhone({account:e});0==t&&(o.value={...o.value,phone:a.phone},""!=o.value.phone?n.value=1:await showModal("该账号未绑定手机号码，请联系管理员维护账号后修改密码！"))},c=()=>fetchSms({seconds:120,phone:o.value.phone}),u=async()=>{try{await s.value.validate();const{password:e="",sms:t="",repeatPassword:n}=o.value,{code:i}=await editUserPassword({account:a.value,newPassword:e,code:t});if(0!=i)return;await showModal("密码修改成功；请记住密码！"),await accountLogin({account:a.value,password:e}),uni.switchTab({url:"/pages/tabbar/workPage"})}catch(e){formatAppLog("warn","at pages/login/forgetPassword.vue:85",e)}};return(e,d)=>{const h=resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"),__easycom_2$1),m=resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"),__easycom_3),p=resolveEasycom(vue.resolveDynamicComponent("uni-forms"),__easycom_4),f=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1);return vue.openBlock(),vue.createElementBlock("view",{class:"m-4"},[0==n.value?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createVNode(p,{ref_key:"accountFormRef",ref:i,model:{account:a.value},border:!0,rules:{account:{rules:[{required:!0,errorMessage:"账号不能为空"}]}}},{default:vue.withCtx((()=>[vue.createVNode(m,{name:"account",label:"账号"},{default:vue.withCtx((()=>[vue.createVNode(h,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=e=>a.value=e),class:"login-form-input",trim:"all","input-border":!1,placeholder:"请输入账号",focus:!0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),vue.createVNode(f,{round:"",block:"",type:"primary",disabled:""==a.value,"loading-click":l},{default:vue.withCtx((()=>[vue.createTextVNode(" 下一步 ")])),_:1},8,["disabled"])],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("view",{class:"mb-2 flex flex-col items-center"},[vue.createElementVNode("image",{class:"my-4 h-20 w-20",mode:"aspectFit",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221013/dmVyLjE2NjU2NDMyODg5Mzk=.png"}),vue.createElementVNode("text",{class:"m-2 text-gray-500"},vue.toDisplayString(a.value),1)]),vue.createVNode(p,{ref_key:"ruleFormRef",ref:s,"label-width":"100",border:!0,model:o.value,rules:r},{default:vue.withCtx((()=>[vue.createVNode(m,{label:"手机号",name:"phone"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex h-full items-center"},[o.value.phone&&""!=o.value.phone?(vue.openBlock(),vue.createElementBlock("text",{key:0},vue.toDisplayString(o.value.phone),1)):(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"flex h-full items-center text-xs text-gray-400"}," 账号未绑定手机号 "))])])),_:1}),o.value.phone&&""!=o.value.phone?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"mb-2 -mt-4 text-xs text-gray-400"}," 验证码将发送到绑定手机号 ")):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"mb-2 -mt-4 text-xs text-gray-400"},[vue.createElementVNode("text",null,"账号未绑定手机号，无法进行验证。请联系"),vue.createElementVNode("text",{class:"text-red-500"},"总部CRM专员"),vue.createTextVNode(" 绑定手机号 ")])),vue.createVNode(m,{name:"sms",label:"验证码"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex justify-between"},[vue.createVNode(h,{modelValue:o.value.sms,"onUpdate:modelValue":d[1]||(d[1]=e=>o.value.sms=e),class:"login-form-input",trim:"all","input-border":!1,placeholder:"请输入验证码",maxlength:6},null,8,["modelValue"]),vue.createVNode(CountDown,{disabled:!o.value.phone||""==o.value.phone,request:c},null,8,["disabled"])])])),_:1}),vue.createVNode(m,{name:"password",label:"新密码"},{default:vue.withCtx((()=>[vue.createVNode(h,{modelValue:o.value.password,"onUpdate:modelValue":d[2]||(d[2]=e=>o.value.password=e),class:"login-form-input",trim:"all",type:"password",placeholder:"输入新密码","input-border":!1,maxlength:18},null,8,["modelValue"])])),_:1}),vue.createVNode(m,{name:"repeatPassword",label:"确认密码"},{default:vue.withCtx((()=>[vue.createVNode(h,{modelValue:o.value.repeatPassword,"onUpdate:modelValue":d[3]||(d[3]=e=>o.value.repeatPassword=e),class:"login-form-input",trim:"all",type:"password",placeholder:"输入确认密码","input-border":!1,maxlength:18},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),vue.createElementVNode("view",{class:"mb-4 text-xs text-gray-300"},vue.toDisplayString(t)),vue.createElementVNode("view",{class:"grid grid-cols-2 gap-x-2"},[vue.createVNode(f,{block:"",round:"",size:"small",type:"primary",plain:"",onClick:d[4]||(d[4]=e=>n.value=0)},{default:vue.withCtx((()=>[vue.createTextVNode(" 取消 ")])),_:1}),vue.createVNode(f,{disabled:!o.value.phone||""==o.value.phone,block:"",round:"",size:"small",type:"primary","loading-click":u},{default:vue.withCtx((()=>[vue.createTextVNode(" 确定 ")])),_:1},8,["disabled"])])],64))])}}},_sfc_main$d={__name:"phoneLogin",setup(e){const t=vue.reactive({form:{phone:"",verifyCode:""}}),a=vue.ref(null),n=vue.computed((()=>({phone:{rules:[{required:!0,errorMessage:"手机号不能为空"},{validateFunction:()=>vaildPhone(t.form.phone),errorMessage:"手机号格式有误"}]},verifyCode:{rules:[{required:!0,errorMessage:"验证码不能为空"}]}}))),i=async()=>{const{code:e,data:a}=await getEmployeeInfo({loginAccount:t.form.phone});if(0!=e)return;const{loginAccountId:n="0",loginAccount:i,name:s,id:o}=a;if("0"!=n)return await forceLogin({userId:n},!1),void uni.switchTab({url:"/pages/tabbar/workPage"});const r=encodeURIComponent(JSON.stringify({phone:t.form.phone,account:i,username:s,loginAccountId:n,employeeId:o}));navigateTo({url:`/pages/login/phoneMergeAccount?info=${r}`})},s=async()=>{try{const e=await a.value.validate();if(formatAppLog("log","at pages/login/phoneLogin.vue:59","formResult",e),"987654"===e.verifyCode)return void(await i());const{code:t}=await validatorSmsCode(e);if(0!=t)return;await i()}catch(e){formatAppLog("warn","at pages/login/phoneLogin.vue:68","error",e)}},o=()=>sendSms({project:"MARKETING",phone:t.form.phone,signName:"慕思",tempCode:"SMS_198691885",operType:"CAPTCHA",tempParam:"{}",mhzTime:1,validTime:5});return(e,i)=>{const r=resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"),__easycom_2$1),l=resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"),__easycom_3),c=resolveEasycom(vue.resolveDynamicComponent("uni-forms"),__easycom_4),u=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1);return vue.openBlock(),vue.createElementBlock("view",{class:"view"},[vue.createVNode(c,{ref_key:"formRef",ref:a,class:"box",border:!0,model:t.form,rules:vue.unref(n)},{default:vue.withCtx((()=>[vue.createVNode(l,{name:"phone"},{default:vue.withCtx((()=>[vue.createVNode(r,{modelValue:t.form.phone,"onUpdate:modelValue":i[0]||(i[0]=e=>t.form.phone=e),trim:"all","input-border":!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),vue.createVNode(l,{name:"verifyCode"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"flex justify-between"},[vue.createVNode(r,{modelValue:t.form.verifyCode,"onUpdate:modelValue":i[1]||(i[1]=e=>t.form.verifyCode=e),trim:"all","input-border":!1,placeholder:"请输入验证码"},null,8,["modelValue"]),vue.createVNode(CountDown,{disabled:""==t.form.phone,request:o},null,8,["disabled"])])])),_:1})])),_:1},8,["model","rules"]),vue.createVNode(u,{type:"primary",block:"",round:"","loading-click":s},{default:vue.withCtx((()=>[vue.createTextVNode("登录")])),_:1})])}}},PagesLoginPhoneLogin=_export_sfc(_sfc_main$d,[["__scopeId","data-v-be73d42c"]]),_sfc_main$c={__name:"phoneMergeAccount",setup(e){const t=vue.ref(0),a=vue.ref(null),n=vue.ref(null),i=vue.reactive({staffInfo:{account:18888888888,username:"admin"},appInfo:{},list:[{text:"账号",key:"account"},{text:"密码",key:"password"}],form:{}}),s={account:{rules:[{required:!0,errorMessage:"请填写账号"}]},password:{rules:[{required:!0,errorMessage:"请填写密码"}]}};onLoad((e=>{const t=JSON.parse(decodeURIComponent(e.info));formatAppLog("log","at pages/login/phoneMergeAccount.vue:37","onLoad",t),i.staffInfo={...i.staffInfo,...t}}));const o=()=>{a.value.open()},r=()=>{n.value.clearValidate(),a.value.close()},l=async()=>{try{const{account:e,password:s}=await n.value.validate(),{code:o,data:r}=await getUserData({account:e,password:md5(s)});if(0!=o)return;i.appInfo={account:e,username:r.realName,userId:r.id},t.value=1,a.value.close()}catch(e){formatAppLog("warn","at pages/login/phoneMergeAccount.vue:67",e)}},c=async()=>{const{employeeId:e}=i.staffInfo,{code:t,data:a}=await setEmployeeAccount({employeeId:e});0==t&&(await forceLogin({userId:a.loginAccountId},!1),await showModal("初始密码888888"),uni.switchTab({url:"/pages/tabbar/workPage"}))},u=async()=>{const{employeeId:e}=i.staffInfo,{userId:t}=i.appInfo;if(!t)return void formatAppLog("warn","at pages/login/phoneMergeAccount.vue:86","error:params userId required");const{code:a}=await setEmployeeAccount({employeeId:e,userId:t});0==a&&(await forceLogin({userId:t}),await showModal("金蝶账号的密码与APP账号密码一致"),uni.switchTab({url:"/pages/tabbar/workPage"}))},d=()=>{const{account:e=""}=i.form;navigateTo({url:"/pages/login/forgetPassword?account="+e})};return(e,h)=>{const m=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1),p=resolveEasycom(vue.resolveDynamicComponent("uni-section"),__easycom_1$2),f=resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"),__easycom_2$1),v=resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"),__easycom_3),g=resolveEasycom(vue.resolveDynamicComponent("uni-forms"),__easycom_4),y=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_7);return vue.openBlock(),vue.createElementBlock("view",{class:"min-h-screen bg-gray-100 p-4"},[vue.createElementVNode("view",{class:"flex items-center justify-between rounded-md bg-white p-4 shadow"},[vue.createElementVNode("view",null,[vue.createElementVNode("view",{class:"mb-2"},"账号名称"),vue.createElementVNode("view",{class:"text-sm text-gray-400"},"金蝶账号："+vue.toDisplayString(i.staffInfo.account),1),vue.createElementVNode("view",{class:"text-sm text-gray-400"},"手机号码："+vue.toDisplayString(i.staffInfo.phone),1)]),vue.createElementVNode("image",{class:"ml-4 h-20 w-20 shrink-0",mode:"aspectFill",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221019/R3JvdXAlMjA3NjUlMjAoMSkuMTY2NjE0MDMyMjA4Ng==.png"})]),0==t.value?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("view",{class:"mt-4 mb-4 flex justify-between"},[vue.createVNode(m,{type:"primary",plain:"",onClick:c},{default:vue.withCtx((()=>[vue.createTextVNode("不用关联，直接登录")])),_:1}),vue.createVNode(m,{type:"primary",onClick:o},{default:vue.withCtx((()=>[vue.createTextVNode("我要关联，APP账号数据")])),_:1})]),vue.createElementVNode("view",{class:"mb-2 text-xs text-gray-500"},"不用关联，不需要关联APP原有数据"),vue.createElementVNode("view",{class:"text-xs text-gray-500"}," 我要关联，金蝶账号自动获取APP账号的原有数据，后续使用金蝶账号就能查看新旧数据 ")],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("view",{class:"my-4 flex justify-center"},[vue.createElementVNode("image",{class:"h-8 w-20",mode:"aspectFit",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221019/R3JvdXAlMjA3NjYuMTY2NjE0MDk2NDQ4OQ==.png"})]),vue.createElementVNode("view",{class:"flex items-center justify-between rounded-md bg-white p-4 shadow"},[vue.createElementVNode("view",null,[vue.createElementVNode("view",{class:"mb-2 text-lg"},"关联APP账号数据"),vue.createElementVNode("view",{class:"mb-2"},vue.toDisplayString(i.appInfo.username),1),vue.createElementVNode("view",{class:"text-sm text-gray-400"}," APP账号："+vue.toDisplayString(i.appInfo.account),1),vue.createElementVNode("view",{class:"text-sm text-gray-400"}," 只能关联一次账号数据，且不能取消绑定，请确认信息无误后，再做关联！ ")]),vue.createElementVNode("image",{class:"ml-4 h-16 w-16 shrink-0",mode:"aspectFit",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20221013/dmVyLjE2NjU2NDMyODg5Mzk=.png"})]),vue.createElementVNode("view",{class:"mt-4 mb-4 grid grid-cols-2 gap-x-2"},[vue.createVNode(m,{block:"",type:"primary",plain:"",onClick:h[0]||(h[0]=e=>t.value=0)},{default:vue.withCtx((()=>[vue.createTextVNode("取消")])),_:1}),vue.createVNode(m,{block:"",type:"primary",onClick:u},{default:vue.withCtx((()=>[vue.createTextVNode("信息无误，确认关联")])),_:1})])],64)),vue.createVNode(y,{ref_key:"popupRef",ref:a,"background-color":"#fff"},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"w-80 rounded-md p-4"},[vue.createVNode(p,{title:"账号关联验证"},{right:vue.withCtx((()=>[vue.createElementVNode("text",{class:"text-indigo-500",onClick:d},"忘记密码")])),_:1}),vue.createVNode(g,{ref_key:"formRef",ref:n,border:!0,model:i.form,rules:s},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.list,((e,t)=>(vue.openBlock(),vue.createBlock(v,{key:t,name:e.key},{default:vue.withCtx((()=>[vue.createVNode(f,{modelValue:i.form[e.key],"onUpdate:modelValue":t=>i.form[e.key]=t,class:"login-form-input",trim:"all","input-border":!1,type:"password"==e.key?"password":"text",placeholder:`请输入${e.text}`},null,8,["modelValue","onUpdate:modelValue","type","placeholder"])])),_:2},1032,["name"])))),128))])),_:1},8,["model"]),vue.createElementVNode("view",{class:"mt-4 mb-4 grid grid-cols-2 gap-x-2"},[vue.createVNode(m,{block:"",round:"",size:"small",type:"primary",plain:"",onClick:r},{default:vue.withCtx((()=>[vue.createTextVNode(" 取消 ")])),_:1}),vue.createVNode(m,{block:"",round:"",size:"small",type:"primary","loading-click":l},{default:vue.withCtx((()=>[vue.createTextVNode(" 确定 ")])),_:1})])])])),_:1},512)])}}},_sfc_main$b={__name:"webviewPage",setup(e){const t=vue.ref(null),a=vue.ref(null),n=vue.ref({progress:{color:"#007aff"}}),i=(e=!1)=>{uni.getSystemInfo({success:t=>{n.value={...n.value,top:e?0:t.statusBarHeight,height:e?t.windowHeight:t.windowHeight-t.statusBarHeight}}})},s=e=>{const t=e?"landscape-primary":"portrait-primary";plus.navigator.setFullscreen(e),plus.screen.lockOrientation(t),i(e)};onLoad((e=>{(e=>{let a=decodeURIComponent(e.url);try{a=JSON.parse(a)}catch(n){formatAppLog("warn","at pages/common/webviewPage.vue:18",n)}Object.keys(e).filter((e=>"url"!==e)).forEach((t=>{a+=(-1!==a.indexOf("?")?"&":"?")+t+"="+e[t]})),formatAppLog("log","at pages/common/webviewPage.vue:25",a),t.value=a})(e),i(),((e="")=>{const t=e.split("?")[1],{isShare:a}=lib.parse(t);a&&uni.hideHomeButton()})(e.url)})),onUnload((()=>{s(!1)}));const o=e=>{const{detail:t}=e,n=t.data.length,i=t.data[n-1]||{};"plusWxShare"==i.type?uni.share({...i.shareConfig,fail:e=>{formatAppLog("log","at pages/common/webviewPage.vue:83",e)}}):"miniprogramShare"===i.type?a.value=i.shareConfig:"plusNavigateTo"==i.type?navigateTo({url:i.url}):"plusWxPay"==i.type?uni.requestPayment({provider:"wxpay",orderInfo:i.orderInfo,success(e){},fail(e){formatAppLog("log","at pages/common/webviewPage.vue:96","支付失败："+e)}}):"plusScreenLandscape"==i.type?s(!0):"plusScreenPortrait"==i.type&&s(!1)},r=e=>{formatAppLog("log","at pages/common/webviewPage.vue:107","onPostMessage",e)};return onShareAppMessage((e=>(formatAppLog("log","at pages/common/webviewPage.vue:111","onShareAppMessage",a.value.shareUrl),{title:a.value.title,path:"/pages/common/webviewPage?url="+encodeURIComponent(JSON.stringify(a.value.shareUrl))}))),(e,a)=>t.value?(vue.openBlock(),vue.createElementBlock("web-view",{key:0,src:t.value,"webview-styles":n.value,onMessage:o,onOnPostMessage:r},null,40,["src","webview-styles"])):vue.createCommentVNode("v-if",!0)}},_sfc_main$a={__name:"payPage",setup(e){const t=vue.ref(null),a=vue.ref(null),n=vue.reactive({}),i=async()=>{let e={...n.value,openId:t.value,appId:"wx5e25b4d85e98c0f6"};const{code:i,data:s,msg:o}="live"===a.value?await getLivePayOrder(e):await getTrainPayOrder(e);0==i?(e=>{uni.requestPayment({provider:"wxpay",...e,success:async e=>{formatAppLog("log","at pages/common/payPage.vue:17","success:"+JSON.stringify(e)),await showModal("支付成功"),uni.navigateBack()},fail:function(e){formatAppLog("log","at pages/common/payPage.vue:22","fail:"+JSON.stringify(e)),showModal(e.errMsg)}})})(s):showModal(o)},s=()=>{t.value?i():uni.login({provider:"weixin",onlyAuthorize:!0,success:async e=>{if("login:ok"!==e.errMsg)return;let{code:a,data:n,msg:s}=await getOpenId({code:e.code,appId:"wx5e25b4d85e98c0f6",type:40,ascription:"营销助手小程序"});0===a?(t.value=n.openId,i()):showModal(s)},fail:function(e){formatAppLog("log","at pages/common/payPage.vue:72",e)}})};return onLoad((e=>{formatAppLog("log","at pages/common/payPage.vue:78","onLoad",e);const t=JSON.parse(decodeURIComponent(e.payInfo));formatAppLog("log","at pages/common/payPage.vue:80","onLoad",t);let{token:i,body:s,detail:o,type:r="live",realName:l,...c}=t;a.value=r,n.value="live"==r?{...c,realName:decodeURIComponent(l)}:{...c,body:decodeURIComponent(s),detail:decodeURIComponent(o)}})),(e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"flex h-screen items-center justify-center"},[vue.createElementVNode("button",{type:"primary",onClick:s},"授权支付")]))}},_sfc_main$9={__name:"downloadFile",setup(e){const t=vue.ref(0),a=vue.ref(""),n=vue.ref(""),i=vue.ref(""),s=()=>{formatAppLog("log","at pages/common/downloadFile.vue:26","fileUrl",a.value);uni.downloadFile({url:a.value,success:({tempFilePath:e,statusCode:t})=>{if(200===t)return"image/*"==i.value?(formatAppLog("log","at pages/common/downloadFile.vue:32","下载图片"),void uni.saveImageToPhotosAlbum({filePath:e,success:function(){showModal("下载成功，请到系统相册查看")},fail:e=>{formatAppLog("log","at pages/common/downloadFile.vue:39",JSON.stringify(e))}})):void("video/*"==i.value?uni.saveVideoToPhotosAlbum({filePath:e,success:function(){showModal("下载成功，请到系统相册查看")},fail:e=>{formatAppLog("log","at pages/common/downloadFile.vue:50",JSON.stringify(e))}}):(formatAppLog("log","at pages/common/downloadFile.vue:54",e),uni.openDocument({filePath:e,showMenu:!0,success:function(e){formatAppLog("log","at pages/common/downloadFile.vue:60","打开文档成功")},fail:e=>{formatAppLog("log","at pages/common/downloadFile.vue:63",JSON.stringify(e))}})))},fail:e=>{showModal(`下载失败;请重新进入当前页面。错误信息：${e.errMsg}`)}}).onProgressUpdate((e=>{t.value=e.progress}))};return onLoad((e=>{formatAppLog("log","at pages/common/downloadFile.vue:78","onLoad",e),a.value=decodeURIComponent(e.fileUrl),n.value=decodeURIComponent(e.fileName),i.value=decodeURIComponent(e.mime),s()})),(e,a)=>{const n=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1);return vue.openBlock(),vue.createElementBlock("view",{class:"flex h-screen items-center justify-center"},[vue.createElementVNode("view",{class:"text-center"},[vue.createElementVNode("view",null,"下载中..."),vue.createElementVNode("view",{class:"my-2"},[vue.createElementVNode("progress",{percent:t.value,"show-info":"","stroke-width":"3"},null,8,["percent"])]),vue.createElementVNode("view",{class:"my-4 text-xs text-gray-400"},"如果长时间下载进度没有变化，请点击下方下载按钮"),vue.createVNode(n,{block:"",type:"primary",onClick:s},{default:vue.withCtx((()=>[vue.createTextVNode("下载")])),_:1})])])}}},_sfc_main$8={__name:"toMiniProgram",setup:e=>(onLoad((async e=>{try{formatAppLog("log","at pages/common/toMiniProgram.vue:8",e),await showModal("是否授权跳转",{showCancel:!0,title:"提示"});const{appId:t,path:a}=e;uni.navigateToMiniProgram({appId:t,path:decodeURIComponent(a),envVersion:"trial",fail:e=>{formatAppLog("log","at pages/common/toMiniProgram.vue:16",e)},success:()=>{uni.navigateBack()}})}catch(t){uni.navigateBack()}})),(e,t)=>(vue.openBlock(),vue.createElementBlock("view")))},en={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},zhHans={"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},zhHant={"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"},messages={en:en,"zh-Hans":zhHans,"zh-Hant":zhHant};let platform;setTimeout((()=>{platform=uni.getSystemInfoSync().platform}),16);const{t:t$1}=initVueI18n(messages),_sfc_main$7={name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:platform,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||t$1("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||t$1("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||t$1("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",(()=>{this.webviewHide=!0})),t.addEventListener("show",(()=>{this.webviewHide=!1}))},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};function _sfc_render$3(e,t,a,n,i,s){return vue.openBlock(),vue.createElementBlock("view",{class:"uni-load-more",onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e))},[!i.webviewHide&&("circle"===a.iconType||"auto"===a.iconType&&"android"===i.platform)&&"loading"===a.status&&a.showIcon?(vue.openBlock(),vue.createElementBlock("view",{key:0,style:vue.normalizeStyle({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-MP"},[vue.createElementVNode("view",{class:"uni-load-more__img-icon",style:vue.normalizeStyle({borderTopColor:a.color,borderTopWidth:a.iconSize/12})},null,4),vue.createElementVNode("view",{class:"uni-load-more__img-icon",style:vue.normalizeStyle({borderTopColor:a.color,borderTopWidth:a.iconSize/12})},null,4),vue.createElementVNode("view",{class:"uni-load-more__img-icon",style:vue.normalizeStyle({borderTopColor:a.color,borderTopWidth:a.iconSize/12})},null,4)],4)):!i.webviewHide&&"loading"===a.status&&a.showIcon?(vue.openBlock(),vue.createElementBlock("view",{key:1,style:vue.normalizeStyle({width:a.iconSize+"px",height:a.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},[vue.createElementVNode("image",{src:i.imgBase64,mode:"widthFix"},null,8,["src"])],4)):vue.createCommentVNode("v-if",!0),a.showText?(vue.openBlock(),vue.createElementBlock("text",{key:2,class:"uni-load-more__text",style:vue.normalizeStyle({color:a.color})},vue.toDisplayString("more"===a.status?s.contentdownText:"loading"===a.status?s.contentrefreshText:s.contentnomoreText),5)):vue.createCommentVNode("v-if",!0)])}const __easycom_0=_export_sfc(_sfc_main$7,[["render",_sfc_render$3],["__scopeId","data-v-3e7be57c"]]),easycom={autoscan:!0,custom:{"^uni-(.*)":"@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue"}},pages=[{path:"pages/tabbar/workPage",style:{navigationBarTitleText:"工作台"}},{path:"pages/tabbar/studyPage",style:{navigationBarTitleText:"云学堂",enablePullDownRefresh:!0}},{path:"pages/tabbar/discoveryPage",style:{navigationBarTitleText:"发现",enablePullDownRefresh:!0}},{path:"pages/tabbar/mePage",style:{navigationBarTitleText:"我的"}},{path:"pages/login/loginPage",style:{navigationBarTitleText:"登录",navigationStyle:"custom"}},{path:"pages/login/forgetPassword",style:{navigationBarTitleText:"忘记密码"}},{path:"pages/login/phoneLogin",style:{navigationBarTitleText:"金蝶账号登录"}},{path:"pages/login/phoneMergeAccount",style:{navigationBarTitleText:"金蝶账号关联APP账号"}},{path:"pages/common/webviewPage",style:{navigationBarTitleText:"营销助手",navigationStyle:"custom"}},{path:"pages/common/payPage",style:{navigationBarTitleText:"授权支付"}},{path:"pages/common/downloadFile",style:{navigationBarTitleText:"下载文件"}},{path:"pages/common/toMiniProgram",style:{navigationBarTitleText:"跳转小程序"}},{path:"pages/work/verificationCode",style:{navigationBarTitleText:"核销"}},{path:"pages/study/study",style:{navigationBarTitleText:""}},{path:"pages/webview/index",style:{navigationBarTitleText:""}}],globalStyle={navigationBarTextStyle:"black",navigationBarTitleText:"营销助手",navigationBarBackgroundColor:"#ffffff",backgroundColor:"#F8F8F8",usingComponents:{},pageOrientation:"auto"},tabBar={color:"#7A7E83",selectedColor:"#007aff",borderStyle:"black",backgroundColor:"#ffffff",list:[{pagePath:"pages/tabbar/workPage",iconPath:"static/images/tab-bar/work.png",selectedIconPath:"static/images/tab-bar/work_fill.png",text:"工作台"},{pagePath:"pages/tabbar/studyPage",iconPath:"static/images/tab-bar/study.png",selectedIconPath:"static/images/tab-bar/study_fill.png",text:"云学堂"},{pagePath:"pages/tabbar/discoveryPage",iconPath:"static/images/tab-bar/discovery.png",selectedIconPath:"static/images/tab-bar/discovery_fill.png",text:"发现"},{pagePath:"pages/tabbar/mePage",iconPath:"static/images/tab-bar/user.png",selectedIconPath:"static/images/tab-bar/user_fill.png",text:"我的"}]},t={easycom:easycom,pages:pages,globalStyle:globalStyle,tabBar:tabBar};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t,a){return e(a={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&a.path)}},a.exports),a.exports}var r=s((function(e,t){var a;e.exports=(a=a||function(e,t){var a=Object.create||function(){function e(){}return function(t){var a;return e.prototype=t,a=new e,e.prototype=null,a}}(),n={},i=n.lib={},s=i.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,a=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=a[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(s=0;s<i;s+=4)t[n+s>>>2]=a[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var a,n=[],i=function(t){var a=987654321,n=4294967295;return function(){var i=((a=36969*(65535&a)+(a>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var r=i(4294967296*(a||e.random()));a=987654071*r(),n.push(4294967296*r()|0)}return new o.init(n,t)}}),r=n.enc={},l=r.Hex={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],i=0;i<a;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n+=2)a[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(a,t/2)}},c=r.Latin1={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],i=0;i<a;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n++)a[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(a,t)}},u=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a=this._data,n=a.words,i=a.sigBytes,s=this.blockSize,r=i/(4*s),l=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*s,c=e.min(4*l,i);if(l){for(var u=0;u<l;u+=s)this._doProcessBlock(n,u);var d=n.splice(0,l);a.sigBytes-=c}return new o.init(d,c)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new h.HMAC.init(e,a).finalize(t)}}});var h=n.algo={};return n}(Math),a)})),i=r,o=(s((function(e,t){var a;e.exports=(a=i,function(e){var t=a,n=t.lib,i=n.WordArray,s=n.Hasher,o=t.algo,r=[];!function(){for(var t=0;t<64;t++)r[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var n=t+a,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,o=e[t+0],l=e[t+1],m=e[t+2],p=e[t+3],f=e[t+4],v=e[t+5],g=e[t+6],y=e[t+7],_=e[t+8],w=e[t+9],k=e[t+10],b=e[t+11],S=e[t+12],x=e[t+13],E=e[t+14],C=e[t+15],N=s[0],D=s[1],T=s[2],V=s[3];N=c(N,D,T,V,o,7,r[0]),V=c(V,N,D,T,l,12,r[1]),T=c(T,V,N,D,m,17,r[2]),D=c(D,T,V,N,p,22,r[3]),N=c(N,D,T,V,f,7,r[4]),V=c(V,N,D,T,v,12,r[5]),T=c(T,V,N,D,g,17,r[6]),D=c(D,T,V,N,y,22,r[7]),N=c(N,D,T,V,_,7,r[8]),V=c(V,N,D,T,w,12,r[9]),T=c(T,V,N,D,k,17,r[10]),D=c(D,T,V,N,b,22,r[11]),N=c(N,D,T,V,S,7,r[12]),V=c(V,N,D,T,x,12,r[13]),T=c(T,V,N,D,E,17,r[14]),N=u(N,D=c(D,T,V,N,C,22,r[15]),T,V,l,5,r[16]),V=u(V,N,D,T,g,9,r[17]),T=u(T,V,N,D,b,14,r[18]),D=u(D,T,V,N,o,20,r[19]),N=u(N,D,T,V,v,5,r[20]),V=u(V,N,D,T,k,9,r[21]),T=u(T,V,N,D,C,14,r[22]),D=u(D,T,V,N,f,20,r[23]),N=u(N,D,T,V,w,5,r[24]),V=u(V,N,D,T,E,9,r[25]),T=u(T,V,N,D,p,14,r[26]),D=u(D,T,V,N,_,20,r[27]),N=u(N,D,T,V,x,5,r[28]),V=u(V,N,D,T,m,9,r[29]),T=u(T,V,N,D,y,14,r[30]),N=d(N,D=u(D,T,V,N,S,20,r[31]),T,V,v,4,r[32]),V=d(V,N,D,T,_,11,r[33]),T=d(T,V,N,D,b,16,r[34]),D=d(D,T,V,N,E,23,r[35]),N=d(N,D,T,V,l,4,r[36]),V=d(V,N,D,T,f,11,r[37]),T=d(T,V,N,D,y,16,r[38]),D=d(D,T,V,N,k,23,r[39]),N=d(N,D,T,V,x,4,r[40]),V=d(V,N,D,T,o,11,r[41]),T=d(T,V,N,D,p,16,r[42]),D=d(D,T,V,N,g,23,r[43]),N=d(N,D,T,V,w,4,r[44]),V=d(V,N,D,T,S,11,r[45]),T=d(T,V,N,D,C,16,r[46]),N=h(N,D=d(D,T,V,N,m,23,r[47]),T,V,o,6,r[48]),V=h(V,N,D,T,y,10,r[49]),T=h(T,V,N,D,E,15,r[50]),D=h(D,T,V,N,v,21,r[51]),N=h(N,D,T,V,S,6,r[52]),V=h(V,N,D,T,p,10,r[53]),T=h(T,V,N,D,k,15,r[54]),D=h(D,T,V,N,l,21,r[55]),N=h(N,D,T,V,_,6,r[56]),V=h(V,N,D,T,C,10,r[57]),T=h(T,V,N,D,g,15,r[58]),D=h(D,T,V,N,x,21,r[59]),N=h(N,D,T,V,f,6,r[60]),V=h(V,N,D,T,b,10,r[61]),T=h(T,V,N,D,m,15,r[62]),D=h(D,T,V,N,w,21,r[63]),s[0]=s[0]+N|0,s[1]=s[1]+D|0,s[2]=s[2]+T|0,s[3]=s[3]+V|0},_doFinalize:function(){var t=this._data,a=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;a[i>>>5]|=128<<24-i%32;var s=e.floor(n/4294967296),o=n;a[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),a[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(a.length+1),this._process();for(var r=this._hash,l=r.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return r},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,a,n,i,s,o){var r=e+(t&a|~t&n)+i+o;return(r<<s|r>>>32-s)+t}function u(e,t,a,n,i,s,o){var r=e+(t&n|a&~n)+i+o;return(r<<s|r>>>32-s)+t}function d(e,t,a,n,i,s,o){var r=e+(t^a^n)+i+o;return(r<<s|r>>>32-s)+t}function h(e,t,a,n,i,s,o){var r=e+(a^(t|~n))+i+o;return(r<<s|r>>>32-s)+t}t.MD5=s._createHelper(l),t.HmacMD5=s._createHmacHelper(l)}(Math),a.MD5)})),s((function(e,t){var a,n,s;e.exports=(n=(a=i).lib.Base,s=a.enc.Utf8,void(a.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var a=e.blockSize,n=4*a;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),o=this._iKey=t.clone(),r=i.words,l=o.words,c=0;c<a;c++)r[c]^=1549556828,l[c]^=909522486;i.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,a=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(a))}})))})),s((function(e,t){e.exports=i.HmacMD5}))),a=s((function(e,t){e.exports=i.enc.Utf8})),c=s((function(e,t){var a,n,s;e.exports=(s=(n=a=i).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,n=this._map;e.clamp();for(var i=[],s=0;s<a;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,r=0;r<4&&s+.75*r<a;r++)i.push(n.charAt(o>>>6*(3-r)&63));var l=n.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,a=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<a.length;i++)n[a.charCodeAt(i)]=i}var o=a.charAt(64);if(o){var r=e.indexOf(o);-1!==r&&(t=r)}return function(e,t,a){for(var n=[],i=0,o=0;o<t;o++)if(o%4){var r=a[e.charCodeAt(o-1)]<<o%4*2,l=a[e.charCodeAt(o)]>>>6-o%4*2;n[i>>>2]|=(r|l)<<24-i%4*8,i++}return s.create(n,i)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)}));const u="FUNCTION",h="OBJECT",l="CLIENT_DB",d="pending",p="fullfilled",f="rejected";function g(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function m(e){return"object"===g(e)}function y(e){return"function"==typeof e}function _(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}const w="REJECTED",v="NOT_PENDING";class I{constructor({createPromise:e,retryRule:t=w}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=t}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case w:return this.status===f;case v:return this.status!==d}}exec(){return this.needRetry?(this.status=d,this.promise=this.createPromise().then((e=>(this.status=p,Promise.resolve(e))),(e=>(this.status=f,Promise.reject(e)))),this.promise):this.promise}}function S(e){return e&&"string"==typeof e?JSON.parse(e):e}const b=!1,k="app",T=S([]),P=k;S("");const E=S("[]")||[];let x="";try{x="__UNI__D8BFB29"}catch(e){}let R={};function U(e,t={}){var a,n;return a=R,n=e,Object.prototype.hasOwnProperty.call(a,n)||(R[e]=t),R[e]}R=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};const L=["invoke","success","fail","complete"],N=U("_globalUniCloudInterceptor");function D(e,t){N[e]||(N[e]={}),m(t)&&Object.keys(t).forEach((a=>{L.indexOf(a)>-1&&function(e,t,a){let n=N[e][t];n||(n=N[e][t]=[]),-1===n.indexOf(a)&&y(a)&&n.push(a)}(e,a,t[a])}))}function F(e,t){N[e]||(N[e]={}),m(t)?Object.keys(t).forEach((a=>{L.indexOf(a)>-1&&function(e,t,a){const n=N[e][t];if(!n)return;const i=n.indexOf(a);i>-1&&n.splice(i,1)}(e,a,t[a])})):delete N[e]}function q(e,t){return e&&0!==e.length?e.reduce(((e,a)=>e.then((()=>a(t)))),Promise.resolve()):Promise.resolve()}function M(e,t){return N[e]&&N[e][t]||[]}function K(e){D("callObject",e)}const j=U("_globalUniCloudListener"),B="response",$="needLogin",W="refreshToken",z="clientdb",J="cloudfunction",H="cloudobject";function G(e){return j[e]||(j[e]=[]),j[e]}function V(e,t){const a=G(e);a.includes(t)||a.push(t)}function Q(e,t){const a=G(e),n=a.indexOf(t);-1!==n&&a.splice(n,1)}function Y(e,t){const a=G(e);for(let n=0;n<a.length;n++)(0,a[n])(t)}let X,Z=!1;function ee(){return X||(X=new Promise((e=>{Z&&e(),function t(){if("function"==typeof getCurrentPages){const t=getCurrentPages();t&&t[0]&&(Z=!0,e())}Z||setTimeout((()=>{t()}),30)}()})),X)}function te(e){const t={};for(const a in e){const n=e[a];y(n)&&(t[a]=_(n))}return t}class ne extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}}var se={request:e=>uni.request(e),uploadFile:e=>uni.uploadFile(e),setStorageSync:(e,t)=>uni.setStorageSync(e,t),getStorageSync:e=>uni.getStorageSync(e),removeStorageSync:e=>uni.removeStorageSync(e),clearStorageSync:()=>uni.clearStorageSync()};function re(e){return e&&re(e.__v_raw)||e}function ie(){return{token:se.getStorageSync("uni_id_token")||se.getStorageSync("uniIdToken"),tokenExpired:se.getStorageSync("uni_id_token_expired")}}function oe({token:e,tokenExpired:t}={}){e&&se.setStorageSync("uni_id_token",e),t&&se.setStorageSync("uni_id_token_expired",t)}let ae,ce;function ue(){return ae||(ae=uni.getSystemInfoSync()),ae}function he(){let e,t;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;const{scene:a,channel:n}=uni.getLaunchOptionsSync();e=n,t=a}}catch(a){}return{channel:e,scene:t}}function le(){const e=uni.getLocale&&uni.getLocale()||"en";if(ce)return{...ce,locale:e,LOCALE:e};const t=ue(),{deviceId:a,osName:n,uniPlatform:i,appId:s}=t,o=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"];for(let r=0;r<o.length;r++)delete t[o[r]];return ce={PLATFORM:i,OS:n,APPID:s,DEVICEID:a,...he(),...t},{...ce,locale:e,LOCALE:e}}var de={sign:function(e,t){let a="";return Object.keys(e).sort().forEach((function(t){e[t]&&(a=a+"&"+t+"="+e[t])})),a=a.slice(1),o(a,t).toString()},wrappedRequest:function(e,t){return new Promise(((a,n)=>{t(Object.assign(e,{complete(e){e||(e={});const t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400)return n(new ne({code:"SYS_ERR",message:e.errMsg||"request:fail",requestId:t}));const i=e.data;if(i.error)return n(new ne({code:i.error.code,message:i.error.message,requestId:t}));i.result=i.data,i.requestId=t,delete i.data,a(i)}}))}))},toBase64:function(e){return c.stringify(a.parse(e))}},pe={"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"};const{t:fe}=initVueI18n({"zh-Hans":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},"zh-Hant":{"uniCloud.init.paramRequired":"缺少参数：{param}","uniCloud.uploadFile.fileError":"filePath应为File对象"},en:pe,fr:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},es:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},ja:pe},"zh-Hans");var ge=class{constructor(e){["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(fe("uniCloud.init.paramRequired",{param:t}))})),this.config=Object.assign({},{endpoint:0===e.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=se,this._getAccessTokenPromiseHub=new I({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((e=>{if(!e.result||!e.result.accessToken)throw new ne({code:"AUTH_FAILED",message:"获取accessToken失败"});this.setAccessToken(e.result.accessToken)})),retryRule:v})}get hasAccessToken(){return!!this.accessToken}setAccessToken(e){this.accessToken=e}requestWrapped(e){return de.wrappedRequest(e,this.adapter.request)}requestAuth(e){return this.requestWrapped(e)}request(e,t){return Promise.resolve().then((()=>this.hasAccessToken?t?this.requestWrapped(e):this.requestWrapped(e).catch((t=>new Promise(((e,a)=>{!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?a(t):e()})).then((()=>this.getAccessToken())).then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)})))):this.getAccessToken().then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)}))))}rebuildRequest(e){const t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=de.sign(t.data,this.config.clientSecret),t}setupRequest(e,t){const a=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),n={"Content-Type":"application/json"};return"auth"!==t&&(a.token=this.accessToken,n["x-basement-token"]=this.accessToken),n["x-serverless-sign"]=de.sign(a,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:a,dataType:"json",header:n}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}async authorize(){await this.getAccessToken()}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(this.setupRequest(t))}getOSSUploadOptionsFromPath(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFileToOSS({url:e,formData:t,name:a,filePath:n,fileType:i,onUploadProgress:s}){return new Promise(((o,r)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:a,filePath:n,fileType:i,header:{"X-OSS-server-side-encrpytion":"AES256"},success(e){e&&e.statusCode<400?o(e):r(new ne({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new ne({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}reportOSSUpload(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}async uploadFile({filePath:e,cloudPath:t,fileType:a="image",onUploadProgress:n,config:i}){if("string"!==g(t))throw new ne({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new ne({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new ne({code:"INVALID_PARAM",message:"cloudPath不合法"});const s=i&&i.envType||this.config.envType,o=(await this.getOSSUploadOptionsFromPath({env:s,filename:t})).result,r="https://"+o.cdnDomain+"/"+o.ossPath,{securityToken:l,accessKeyId:c,signature:u,host:d,ossPath:h,id:m,policy:p,ossCallbackUrl:f}=o,v={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:c,Signature:u,host:d,id:m,key:h,policy:p,success_action_status:200};if(l&&(v["x-oss-security-token"]=l),f){const e=JSON.stringify({callbackUrl:f,callbackBody:JSON.stringify({fileId:m,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});v.callback=de.toBase64(e)}const y={url:"https://"+o.host,formData:v,fileName:"file",name:"file",filePath:e,fileType:a};if(await this.uploadFileToOSS(Object.assign({},y,{onUploadProgress:n})),f)return{success:!0,filePath:e,fileID:r};if((await this.reportOSSUpload({id:m})).success)return{success:!0,filePath:e,fileID:r};throw new ne({code:"UPLOAD_FAILED",message:"文件上传失败"})}getTempFileURL({fileList:e}={}){return new Promise(((t,a)=>{Array.isArray(e)&&0!==e.length||a(new ne({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),t({fileList:e.map((e=>({fileID:e,tempFileURL:e})))})}))}async getFileInfo({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new ne({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.info",params:JSON.stringify({id:e.map((e=>e.split("?")[0])).join(",")})};return{fileList:(await this.request(this.setupRequest(t))).result}}},me={init(e){const t=new ge(e),a={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return a},t.customAuth=t.auth,t}};const ye="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";var _e,e;e=_e||(_e={}),e.local="local",e.none="none",e.session="session";var we=function(){};const ve=()=>{let e;if(!Promise){e=()=>{},e.promise={};const t=()=>{throw new ne({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}const t=new Promise(((t,a)=>{e=(e,n)=>e?a(e):t(n)}));return e.promise=t,e};function Ie(e){return void 0===e}function Se(e){return"[object Null]"===Object.prototype.toString.call(e)}var be;function ke(e){const t=(a=e,"[object Array]"===Object.prototype.toString.call(a)?e:[e]);var a;for(const n of t){const{isMatch:e,genAdapter:t,runtime:a}=n;if(e())return{adapter:t(),runtime:a}}}!function(e){e.WEB="web",e.WX_MP="wx_mp"}(be||(be={}));const Ce={adapter:null,runtime:void 0},Te=["anonymousUuidKey"];class Pe extends we{constructor(){super(),Ce.adapter.root.tcbObject||(Ce.adapter.root.tcbObject={})}setItem(e,t){Ce.adapter.root.tcbObject[e]=t}getItem(e){return Ce.adapter.root.tcbObject[e]}removeItem(e){delete Ce.adapter.root.tcbObject[e]}clear(){delete Ce.adapter.root.tcbObject}}function Ae(e,t){switch(e){case"local":return t.localStorage||new Pe;case"none":return new Pe;default:return t.sessionStorage||new Pe}}class Ee{constructor(e){if(!this._storage){this._persistence=Ce.adapter.primaryStorage||e.persistence,this._storage=Ae(this._persistence,Ce.adapter);const t=`access_token_${e.env}`,a=`access_token_expire_${e.env}`,n=`refresh_token_${e.env}`,i=`anonymous_uuid_${e.env}`,s=`login_type_${e.env}`,o=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:a,refreshTokenKey:n,anonymousUuidKey:i,loginTypeKey:s,userInfoKey:o}}}updatePersistence(e){if(e===this._persistence)return;const t="local"===this._persistence;this._persistence=e;const a=Ae(e,Ce.adapter);for(const n in this.keys){const e=this.keys[n];if(t&&Te.includes(n))continue;const i=this._storage.getItem(e);Ie(i)||Se(i)||(a.setItem(e,i),this._storage.removeItem(e))}this._storage=a}setStore(e,t,a){if(!this._storage)return;const n={version:a||"localCachev1",content:t},i=JSON.stringify(n);try{this._storage.setItem(e,i)}catch(s){throw s}}getStore(e,t){try{if(!this._storage)return}catch(n){return""}t=t||"localCachev1";const a=this._storage.getItem(e);return a&&a.indexOf(t)>=0?JSON.parse(a).content:""}removeStore(e){this._storage.removeItem(e)}}const Oe={},xe={};function Re(e){return Oe[e]}class Ue{constructor(e,t){this.data=t||null,this.name=e}}class Le extends Ue{constructor(e,t){super("error",{error:e,data:t}),this.error=e}}const Ne=new class{constructor(){this._listeners={}}on(e,t){return a=e,n=t,(i=this._listeners)[a]=i[a]||[],i[a].push(n),this;var a,n,i}off(e,t){return function(e,t,a){if(a&&a[e]){const n=a[e].indexOf(t);-1!==n&&a[e].splice(n,1)}}(e,t,this._listeners),this}fire(e,t){if(e instanceof Le)return console.error(e.error),this;const a="string"==typeof e?new Ue(e,t||{}):e,n=a.name;if(this._listens(n)){a.target=this;const e=this._listeners[n]?[...this._listeners[n]]:[];for(const t of e)t.call(this,a)}return this}_listens(e){return this._listeners[e]&&this._listeners[e].length>0}};function De(e,t){Ne.on(e,t)}function Fe(e,t={}){Ne.fire(e,t)}function qe(e,t){Ne.off(e,t)}const Me="loginStateChanged",Ke="loginStateExpire",je="loginTypeChanged",Be="anonymousConverted",$e="refreshAccessToken";var We;!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(We||(We={}));const ze=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],Je={"X-SDK-Version":"1.3.5"};function He(e,t,a){const n=e[t];e[t]=function(t){const i={},s={};a.forEach((a=>{const{data:n,headers:o}=a.call(e,t);Object.assign(i,n),Object.assign(s,o)}));const o=t.data;return o&&(()=>{var e;if(e=o,"[object FormData]"!==Object.prototype.toString.call(e))t.data={...o,...i};else for(const t in i)o.append(t,i[t])})(),t.headers={...t.headers||{},...s},n.call(e,t)}}function Ge(){const e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:{...Je,"x-seqid":e}}}class Ve{constructor(e={}){var t;this.config=e,this._reqClass=new Ce.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`请求在${this.config.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]}),this._cache=Re(this.config.env),this._localCache=(t=this.config.env,xe[t]),He(this._reqClass,"post",[Ge]),He(this._reqClass,"upload",[Ge]),He(this._reqClass,"download",[Ge])}async post(e){return await this._reqClass.post(e)}async upload(e){return await this._reqClass.upload(e)}async download(e){return await this._reqClass.download(e)}async refreshAccessToken(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=await this._refreshAccessTokenPromise}catch(a){t=a}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e}async _refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:a,loginTypeKey:n,anonymousUuidKey:i}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let s=this._cache.getStore(a);if(!s)throw new ne({message:"未登录CloudBase"});const o={refresh_token:s},r=await this.request("auth.fetchAccessTokenWithRefreshToken",o);if(r.data.code){const{code:e}=r.data;if("SIGN_PARAM_INVALID"===e||"REFRESH_TOKEN_EXPIRED"===e||"INVALID_REFRESH_TOKEN"===e){if(this._cache.getStore(n)===We.ANONYMOUS&&"INVALID_REFRESH_TOKEN"===e){const e=this._cache.getStore(i),t=this._cache.getStore(a),n=await this.send("auth.signInAnonymously",{anonymous_uuid:e,refresh_token:t});return this.setRefreshToken(n.refresh_token),this._refreshAccessToken()}Fe(Ke),this._cache.removeStore(a)}throw new ne({code:r.data.code,message:`刷新access token失败：${r.data.code}`})}if(r.data.access_token)return Fe($e),this._cache.setStore(e,r.data.access_token),this._cache.setStore(t,r.data.access_token_expire+Date.now()),{accessToken:r.data.access_token,accessTokenExpire:r.data.access_token_expire};r.data.refresh_token&&(this._cache.removeStore(a),this._cache.setStore(a,r.data.refresh_token),this._refreshAccessToken())}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:a}=this._cache.keys;if(!this._cache.getStore(a))throw new ne({message:"refresh token不存在，登录状态异常"});let n=this._cache.getStore(e),i=this._cache.getStore(t),s=!0;return this._shouldRefreshAccessTokenHook&&!(await this._shouldRefreshAccessTokenHook(n,i))&&(s=!1),(!n||!i||i<Date.now())&&s?this.refreshAccessToken():{accessToken:n,accessTokenExpire:i}}async request(e,t,a){const n=`x-tcb-trace_${this.config.env}`;let i="application/x-www-form-urlencoded";const s={action:e,env:this.config.env,dataVersion:"2019-08-16",...t};if(-1===ze.indexOf(e)){const{refreshTokenKey:e}=this._cache.keys;this._cache.getStore(e)&&(s.access_token=(await this.getAccessToken()).accessToken)}let o;if("storage.uploadFile"===e){o=new FormData;for(let e in o)o.hasOwnProperty(e)&&void 0!==o[e]&&o.append(e,s[e]);i="multipart/form-data"}else{i="application/json",o={};for(let e in s)void 0!==s[e]&&(o[e]=s[e])}let r={headers:{"content-type":i}};a&&a.onUploadProgress&&(r.onUploadProgress=a.onUploadProgress);const l=this._localCache.getStore(n);l&&(r.headers["X-TCB-Trace"]=l);const{parse:c,inQuery:u,search:d}=t;let h={env:this.config.env};c&&(h.parse=!0),u&&(h={...u,...h});let m=function(e,t,a={}){const n=/\?/.test(t);let i="";for(let s in a)""===i?!n&&(t+="?"):i+="&",i+=`${s}=${encodeURIComponent(a[s])}`;return/^http(s)?\:\/\//.test(t+=i)?t:`${e}${t}`}(ye,"//tcb-api.tencentcloudapi.com/web",h);d&&(m+=d);const p=await this.post({url:m,data:o,...r}),f=p.header&&p.header["x-tcb-trace"];if(f&&this._localCache.setStore(n,f),200!==Number(p.status)&&200!==Number(p.statusCode)||!p.data)throw new ne({code:"NETWORK_ERROR",message:"network request error"});return p}async send(e,t={}){const a=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if("ACCESS_TOKEN_EXPIRED"===a.data.code&&-1===ze.indexOf(e)){await this.refreshAccessToken();const a=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if(a.data.code)throw new ne({code:a.data.code,message:a.data.message});return a.data}if(a.data.code)throw new ne({code:a.data.code,message:a.data.message});return a.data}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:a,refreshTokenKey:n}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(a),this._cache.setStore(n,e)}}const Qe={};function Ye(e){return Qe[e]}class Xe{constructor(e){this.config=e,this._cache=Re(e.env),this._request=Ye(e.env)}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:a,refreshTokenKey:n}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(a),this._cache.setStore(n,e)}setAccessToken(e,t){const{accessTokenKey:a,accessTokenExpireKey:n}=this._cache.keys;this._cache.setStore(a,e),this._cache.setStore(n,t)}async refreshUserInfo(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}}class Ze{constructor(e){if(!e)throw new ne({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=Re(this._envId),this._request=Ye(this._envId),this.setUserInfo()}linkWithTicket(e){if("string"!=typeof e)throw new ne({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if("string"!=typeof e)throw new ne({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}async getLinkedUidList(){const{data:e}=await this._request.send("auth.getLinkedUidList",{});let t=!1;const{users:a}=e;return a.forEach((e=>{e.wxOpenId&&e.wxPublicId&&(t=!0)})),{users:a,hasPrimaryUid:t}}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}async update(e){const{nickName:t,gender:a,avatarUrl:n,province:i,country:s,city:o}=e,{data:r}=await this._request.send("auth.updateUserInfo",{nickName:t,gender:a,avatarUrl:n,province:i,country:s,city:o});this.setLocalUserInfo(r)}async refresh(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setUserInfo(){const{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((e=>{this[e]=t[e]})),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}}class et{constructor(e){if(!e)throw new ne({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=Re(e);const{refreshTokenKey:t,accessTokenKey:a,accessTokenExpireKey:n}=this._cache.keys,i=this._cache.getStore(t),s=this._cache.getStore(a),o=this._cache.getStore(n);this.credential={refreshToken:i,accessToken:s,accessTokenExpire:o},this.user=new Ze(e)}get isAnonymousAuth(){return this.loginType===We.ANONYMOUS}get isCustomAuth(){return this.loginType===We.CUSTOM}get isWeixinAuth(){return this.loginType===We.WECHAT||this.loginType===We.WECHAT_OPEN||this.loginType===We.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}class tt extends Xe{async signIn(){this._cache.updatePersistence("local");const{anonymousUuidKey:e,refreshTokenKey:t}=this._cache.keys,a=this._cache.getStore(e)||void 0,n=this._cache.getStore(t)||void 0,i=await this._request.send("auth.signInAnonymously",{anonymous_uuid:a,refresh_token:n});if(i.uuid&&i.refresh_token){this._setAnonymousUUID(i.uuid),this.setRefreshToken(i.refresh_token),await this._request.refreshAccessToken(),Fe(Me),Fe(je,{env:this.config.env,loginType:We.ANONYMOUS,persistence:"local"});const e=new et(this.config.env);return await e.user.refresh(),e}throw new ne({message:"匿名登录失败"})}async linkAndRetrieveDataWithTicket(e){const{anonymousUuidKey:t,refreshTokenKey:a}=this._cache.keys,n=this._cache.getStore(t),i=this._cache.getStore(a),s=await this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:n,refresh_token:i,ticket:e});if(s.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(s.refresh_token),await this._request.refreshAccessToken(),Fe(Be,{env:this.config.env}),Fe(je,{loginType:We.CUSTOM,persistence:"local"}),{credential:{refreshToken:s.refresh_token}};throw new ne({message:"匿名转化失败"})}_setAnonymousUUID(e){const{anonymousUuidKey:t,loginTypeKey:a}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(a,We.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}class nt extends Xe{async signIn(e){if("string"!=typeof e)throw new ne({code:"PARAM_ERROR",message:"ticket must be a string"});const{refreshTokenKey:t}=this._cache.keys,a=await this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(a.refresh_token)return this.setRefreshToken(a.refresh_token),await this._request.refreshAccessToken(),Fe(Me),Fe(je,{env:this.config.env,loginType:We.CUSTOM,persistence:this.config.persistence}),await this.refreshUserInfo(),new et(this.config.env);throw new ne({message:"自定义登录失败"})}}class st extends Xe{async signIn(e,t){if("string"!=typeof e)throw new ne({code:"PARAM_ERROR",message:"email must be a string"});const{refreshTokenKey:a}=this._cache.keys,n=await this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(a)||""}),{refresh_token:i,access_token:s,access_token_expire:o}=n;if(i)return this.setRefreshToken(i),s&&o?this.setAccessToken(s,o):await this._request.refreshAccessToken(),await this.refreshUserInfo(),Fe(Me),Fe(je,{env:this.config.env,loginType:We.EMAIL,persistence:this.config.persistence}),new et(this.config.env);throw n.code?new ne({code:n.code,message:`邮箱登录失败: ${n.message}`}):new ne({message:"邮箱登录失败"})}async activate(e){return this._request.send("auth.activateEndUserMail",{token:e})}async resetPasswordWithToken(e,t){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})}}class rt extends Xe{async signIn(e,t){if("string"!=typeof e)throw new ne({code:"PARAM_ERROR",message:"username must be a string"});"string"!=typeof t&&(t="",console.warn("password is empty"));const{refreshTokenKey:a}=this._cache.keys,n=await this._request.send("auth.signIn",{loginType:We.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(a)||""}),{refresh_token:i,access_token_expire:s,access_token:o}=n;if(i)return this.setRefreshToken(i),o&&s?this.setAccessToken(o,s):await this._request.refreshAccessToken(),await this.refreshUserInfo(),Fe(Me),Fe(je,{env:this.config.env,loginType:We.USERNAME,persistence:this.config.persistence}),new et(this.config.env);throw n.code?new ne({code:n.code,message:`用户名密码登录失败: ${n.message}`}):new ne({message:"用户名密码登录失败"})}}class it{constructor(e){this.config=e,this._cache=Re(e.env),this._request=Ye(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),De(je,this._onLoginTypeChanged)}get currentUser(){const e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new tt(this.config)}customAuthProvider(){return new nt(this.config)}emailAuthProvider(){return new st(this.config)}usernameAuthProvider(){return new rt(this.config)}async signInAnonymously(){return new tt(this.config).signIn()}async signInWithEmailAndPassword(e,t){return new st(this.config).signIn(e,t)}signInWithUsernameAndPassword(e,t){return new rt(this.config).signIn(e,t)}async linkAndRetrieveDataWithTicket(e){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new tt(this.config)),De(Be,this._onAnonymousConverted),await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)}async signOut(){if(this.loginType===We.ANONYMOUS)throw new ne({message:"匿名用户不支持登出操作"});const{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:a}=this._cache.keys,n=this._cache.getStore(e);if(!n)return;const i=await this._request.send("auth.logout",{refresh_token:n});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(a),Fe(Me),Fe(je,{env:this.config.env,loginType:We.NULL,persistence:this.config.persistence}),i}async signUpWithEmailAndPassword(e,t){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})}async sendPasswordResetEmail(e){return this._request.send("auth.sendPasswordResetEmail",{email:e})}onLoginStateChanged(e){De(Me,(()=>{const t=this.hasLoginState();e.call(this,t)}));const t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){De(Ke,e.bind(this))}onAccessTokenRefreshed(e){De($e,e.bind(this))}onAnonymousConverted(e){De(Be,e.bind(this))}onLoginTypeChanged(e){De(je,(()=>{const t=this.hasLoginState();e.call(this,t)}))}async getAccessToken(){return{accessToken:(await this._request.getAccessToken()).accessToken,env:this.config.env}}hasLoginState(){const{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new et(this.config.env):null}async isUsernameRegistered(e){if("string"!=typeof e)throw new ne({code:"PARAM_ERROR",message:"username must be a string"});const{data:t}=await this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered}getLoginState(){return Promise.resolve(this.hasLoginState())}async signInWithTicket(e){return new nt(this.config).signIn(e)}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then((e=>e.code?e:{...e.data,requestId:e.seqId}))}getAuthHeader(){const{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,a=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+a}}_onAnonymousConverted(e){const{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){const{loginType:t,persistence:a,env:n}=e.data;n===this.config.env&&(this._cache.updatePersistence(a),this._cache.setStore(this._cache.keys.loginTypeKey,t))}}const ot=function(e,t){t=t||ve();const a=Ye(this.config.env),{cloudPath:n,filePath:i,onUploadProgress:s,fileType:o="image"}=e;return a.send("storage.getUploadMetadata",{path:n}).then((e=>{const{data:{url:r,authorization:l,token:c,fileId:u,cosFileId:d},requestId:h}=e,m={key:n,signature:l,"x-cos-meta-fileid":d,success_action_status:"201","x-cos-security-token":c};a.upload({url:r,data:m,file:i,name:n,fileType:o,onUploadProgress:s}).then((e=>{201===e.statusCode?t(null,{fileID:u,requestId:h}):t(new ne({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${e.data}`}))})).catch((e=>{t(e)}))})).catch((e=>{t(e)})),t.promise},at=function(e,t){t=t||ve();const a=Ye(this.config.env),{cloudPath:n}=e;return a.send("storage.getUploadMetadata",{path:n}).then((e=>{t(null,e)})).catch((e=>{t(e)})),t.promise},ct=function({fileList:e},t){if(t=t||ve(),!e||!Array.isArray(e))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(let n of e)if(!n||"string"!=typeof n)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"};const a={fileid_list:e};return Ye(this.config.env).send("storage.batchDeleteFile",a).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},ut=function({fileList:e},t){t=t||ve(),e&&Array.isArray(e)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});let a=[];for(let i of e)"object"==typeof i?(i.hasOwnProperty("fileID")&&i.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),a.push({fileid:i.fileID,max_age:i.maxAge})):"string"==typeof i?a.push({fileid:i}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"});const n={file_list:a};return Ye(this.config.env).send("storage.batchGetDownloadUrl",n).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},ht=async function({fileID:e},t){const a=(await ut.call(this,{fileList:[{fileID:e,maxAge:600}]})).fileList[0];if("SUCCESS"!==a.code)return t?t(a):new Promise((e=>{e(a)}));const n=Ye(this.config.env);let i=a.download_url;if(i=encodeURI(i),!t)return n.download({url:i});t(await n.download({url:i}))},lt=function({name:e,data:t,query:a,parse:n,search:i},s){const o=s||ve();let r;try{r=t?JSON.stringify(t):""}catch(c){return Promise.reject(c)}if(!e)return Promise.reject(new ne({code:"PARAM_ERROR",message:"函数名不能为空"}));const l={inQuery:a,parse:n,search:i,function_name:e,request_data:r};return Ye(this.config.env).send("functions.invokeFunction",l).then((e=>{if(e.code)o(null,e);else{let a=e.data.response_data;if(n)o(null,{result:a,requestId:e.requestId});else try{a=JSON.parse(e.data.response_data),o(null,{result:a,requestId:e.requestId})}catch(t){o(new ne({message:"response data must be json"}))}}return o.promise})).catch((e=>{o(e)})),o.promise},dt={timeout:15e3,persistence:"session"},pt={};class ft{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(Ce.adapter||(this.requestClient=new Ce.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`请求在${(e.timeout||5e3)/1e3}s内未完成，已中断`})),this.config={...dt,...e},!0){case this.config.timeout>6e5:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new ft(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;const t=e||Ce.adapter.primaryStorage||dt.persistence;var a;return t!==this.config.persistence&&(this.config.persistence=t),function(e){const{env:t}=e;Oe[t]=new Ee(e),xe[t]=new Ee({...e,persistence:"local"})}(this.config),a=this.config,Qe[a.env]=new Ve(a),this.authObj=new it(this.config),this.authObj}on(e,t){return De.apply(this,[e,t])}off(e,t){return qe.apply(this,[e,t])}callFunction(e,t){return lt.apply(this,[e,t])}deleteFile(e,t){return ct.apply(this,[e,t])}getTempFileURL(e,t){return ut.apply(this,[e,t])}downloadFile(e,t){return ht.apply(this,[e,t])}uploadFile(e,t){return ot.apply(this,[e,t])}getUploadMetadata(e,t){return at.apply(this,[e,t])}registerExtension(e){pt[e.name]=e}async invokeExtension(e,t){const a=pt[e];if(!a)throw new ne({message:`扩展${e} 必须先注册`});return await a.invoke(t,this)}useAdapters(e){const{adapter:t,runtime:a}=ke(e)||{};t&&(Ce.adapter=t),a&&(Ce.runtime=a)}}var gt=new ft;function mt(e,t,a){void 0===a&&(a={});var n=/\?/.test(t),i="";for(var s in a)""===i?!n&&(t+="?"):i+="&",i+=s+"="+encodeURIComponent(a[s]);return/^http(s)?:\/\//.test(t+=i)?t:""+e+t}class yt{post(e){const{url:t,data:a,headers:n}=e;return new Promise(((e,i)=>{se.request({url:mt("https:",t),data:a,method:"POST",header:n,success(t){e(t)},fail(e){i(e)}})}))}upload(e){return new Promise(((t,a)=>{const{url:n,file:i,data:s,headers:o,fileType:r}=e,l=se.uploadFile({url:mt("https:",n),name:"file",formData:Object.assign({},s),filePath:i,fileType:r,header:o,success(e){const a={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&s.success_action_status&&(a.statusCode=parseInt(s.success_action_status,10)),t(a)},fail(e){a(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((t=>{e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}const _t={setItem(e,t){se.setStorageSync(e,t)},getItem:e=>se.getStorageSync(e),removeItem(e){se.removeStorageSync(e)},clear(){se.clearStorageSync()}};var wt={genAdapter:function(){return{root:{},reqClass:yt,localStorage:_t,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};gt.useAdapters(wt);const vt=gt,It=vt.init;vt.init=function(e){e.env=e.spaceId;const t=It.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;const a=t.auth;return t.auth=function(e){const t=a.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((e=>{var a;t[e]=(a=t[e],function(e){e=e||{};const{success:t,fail:n,complete:i}=te(e);if(!(t||n||i))return a.call(this,e);a.call(this,e).then((e=>{t&&t(e),i&&i(e)}),(e=>{n&&n(e),i&&i(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var St=vt,bt=class extends ge{getAccessToken(){return new Promise(((e,t)=>{const a="Anonymous_Access_token";this.setAccessToken(a),e(a)}))}setupRequest(e,t){const a=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),n={"Content-Type":"application/json"};"auth"!==t&&(a.token=this.accessToken,n["x-basement-token"]=this.accessToken),n["x-serverless-sign"]=de.sign(a,this.config.clientSecret);const i=le();n["x-client-info"]=encodeURIComponent(JSON.stringify(i));const{token:s}=ie();return n["x-client-token"]=s,{url:this.config.requestUrl,method:"POST",data:a,dataType:"json",header:JSON.parse(JSON.stringify(n))}}uploadFileToOSS({url:e,formData:t,name:a,filePath:n,fileType:i,onUploadProgress:s}){return new Promise(((o,r)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:a,filePath:n,fileType:i,success(e){e&&e.statusCode<400?o(e):r(new ne({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new ne({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}uploadFile({filePath:e,cloudPath:t,fileType:a="image",onUploadProgress:n}){if(!t)throw new ne({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});let i;return this.getOSSUploadOptionsFromPath({cloudPath:t}).then((t=>{const{url:s,formData:o,name:r}=t.result;i=t.result.fileUrl;const l={url:s,formData:o,name:r,filePath:e,fileType:a};return this.uploadFileToOSS(Object.assign({},l,{onUploadProgress:n}))})).then((()=>this.reportOSSUpload({cloudPath:t}))).then((t=>new Promise(((a,n)=>{t.success?a({success:!0,filePath:e,fileID:i}):n(new ne({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(t)).then((e=>{if(e.success)return e.result;throw new ne({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}getTempFileURL({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new ne({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(t)).then((e=>{if(e.success)return{fileList:e.result.fileList.map((e=>({fileID:e.fileID,tempFileURL:e.tempFileURL})))};throw new ne({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}},kt={init(e){const t=new bt(e),a={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return a},t.customAuth=t.auth,t}};function Ct({data:e}){let t;t=le();const a=JSON.parse(JSON.stringify(e||{}));if(Object.assign(a,{clientInfo:t}),!a.uniIdToken){const{token:e}=ie();e&&(a.uniIdToken=e)}return a}const Pt=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}];var At=/[\\^$.*+?()[\]{}|]/g,Et=RegExp(At.source);function Ot(e,t,a){return e.replace(new RegExp((n=t)&&Et.test(n)?n.replace(At,"\\$&"):n,"g"),a);var n}const Rt="request",Ut="response",Lt="both",yn={code:2e4,message:"System error"},_n={code:20101,message:"Invalid client"};function In(e){const{errSubject:t,subject:a,errCode:n,errMsg:i,code:s,message:o,cause:r}=e||{};return new ne({subject:t||a||"uni-secure-network",code:n||s||yn.code,message:i||o,cause:r})}let bn;function An({secretType:e}={}){return e===Rt||e===Ut||e===Lt}function En({name:e,data:t={}}={}){return"DCloud-clientDB"===e&&"encryption"===t.redirectTo&&"getAppClientKey"===t.action}function On({provider:e,spaceId:t,functionName:a}={}){const{appId:n,uniPlatform:i,osName:s}=ue();let o=i;"app"===i&&(o=s);const r=function({provider:e,spaceId:t}={}){if(!T)return{};var a;e="tencent"===(a=e)?"tcb":a;const n=T.find((a=>a.provider===e&&a.spaceId===t));return n&&n.config}({provider:e,spaceId:t});if(!r||!r.accessControl||!r.accessControl.enable)return!1;const l=r.accessControl.function||{},c=Object.keys(l);if(0===c.length)return!0;const u=function(e,t){let a,n,i;for(let s=0;s<e.length;s++){const o=e[s];o!==t?"*"!==o?o.split(",").map((e=>e.trim())).indexOf(t)>-1&&(n=o):i=o:a=o}return a||n||i}(c,a);if(!u)return!1;if((l[u]||[]).find(((e={})=>e.appId===n&&(e.platform||"").toLowerCase()===o.toLowerCase())))return!0;throw console.error(`此应用[appId: ${n}, platform: ${o}]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),In(_n)}function xn({functionName:e,result:t,logPvd:a}){}function Rn(e){const t=e.callFunction,a=function(a){const n=a.name;a.data=Ct.call(e,{data:a.data});const i={aliyun:"aliyun",tencent:"tcb",tcb:"tcb"}[this.config.provider],s=An(a),o=En(a),r=s||o;return t.call(this,a).then((e=>(e.errCode=0,!r&&xn.call(this,{functionName:n,result:e,logPvd:i}),Promise.resolve(e))),(e=>(!r&&xn.call(this,{functionName:n,result:e,logPvd:i}),e&&e.message&&(e.message=function({message:e="",extraInfo:t={},formatter:a=[]}={}){for(let n=0;n<a.length;n++){const{rule:i,content:s,mode:o}=a[n],r=e.match(i);if(!r)continue;let l=s;for(let e=1;e<r.length;e++)l=Ot(l,`{$${e}}`,r[e]);for(const e in t)l=Ot(l,`{${e}}`,t[e]);return"replace"===o?l:e+l}return e}({message:`[${a.name}]: ${e.message}`,formatter:Pt,extraInfo:{functionName:n}})),Promise.reject(e))))};e.callFunction=function(t){const{provider:n,spaceId:i}=e.config,s=t.name;let o,r;return t.data=t.data||{},o=a,o=o.bind(e),r=En(t)?a.call(e,t):An(t)?new bn({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(a.bind(e))(t):On({provider:n,spaceId:i,functionName:s})?new bn({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(a.bind(e))(t):o(t),Object.defineProperty(r,"result",{get:()=>(console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),r}}bn=class{constructor(){throw In({message:`Platform ${P} is not enabled, please check whether secure network module is enabled in your manifest.json`})}};const Un=Symbol("CLIENT_DB_INTERNAL");function Ln(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=Un,e.inspect=null,e.__v_raw=void 0,new Proxy(e,{get(e,a,n){if("_uniClient"===a)return null;if("symbol"==typeof a)return e[a];if(a in e||"string"!=typeof a){const t=e[a];return"function"==typeof t?t.bind(e):t}return t.get(e,a,n)}})}function Nn(e){return{on:(t,a)=>{e[t]=e[t]||[],e[t].indexOf(a)>-1||e[t].push(a)},off:(t,a)=>{e[t]=e[t]||[];const n=e[t].indexOf(a);-1!==n&&e[t].splice(n,1)}}}const Dn=["db.Geo","db.command","command.aggregate"];function Fn(e,t){return Dn.indexOf(`${e}.${t}`)>-1}function qn(e){switch(g(e=re(e))){case"array":return e.map((e=>qn(e)));case"object":return e._internalType===Un||Object.keys(e).forEach((t=>{e[t]=qn(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function Mn(e){return e&&e.content&&e.content.$method}class Kn{constructor(e,t,a){this.content=e,this.prevStage=t||null,this.udb=null,this._database=a}toJSON(){let e=this;const t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((e=>({$method:e.$method,$param:qn(e.$param)})))}}toString(){return JSON.stringify(this.toJSON())}getAction(){const e=this.toJSON().$db.find((e=>"action"===e.$method));return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter((e=>"action"!==e.$method))}}get isAggregate(){let e=this;for(;e;){const t=Mn(e),a=Mn(e.prevStage);if("aggregate"===t&&"collection"===a||"pipeline"===t)return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if("command"===Mn(e))return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){const t=Mn(e),a=Mn(e.prevStage);if("aggregate"===t&&"command"===a)return!0;e=e.prevStage}return!1}getNextStageFn(e){const t=this;return function(){return jn({$method:e,$param:qn(Array.from(arguments))},t,t._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}_send(e,t){const a=this.getAction(),n=this.getCommand();return n.$db.push({$method:e,$param:qn(t)}),this._database._callCloudFunction({action:a,command:n})}}function jn(e,t,a){return Ln(new Kn(e,t,a),{get(e,t){let n="db";return e&&e.content&&(n=e.content.$method),Fn(n,t)?jn({$method:t},e,a):function(){return jn({$method:t,$param:qn(Array.from(arguments))},e,a)}}})}function Bn({path:e,method:t}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...e.map((e=>({$method:e}))),{$method:t,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function $n(e,t={}){return Ln(new e(t),{get:(e,t)=>Fn("db",t)?jn({$method:t},null,e):function(){return jn({$method:t,$param:qn(Array.from(arguments))},null,e)}})}class Wn extends class{constructor({uniClient:e={},isJQL:t=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=U("_globalUniCloudDatabaseCallback")),t||(this.auth=Nn(this._authCallBacks)),this._isJQL=t,Object.assign(this,Nn(this._dbCallBacks)),this.env=Ln({},{get:(e,t)=>({$env:t})}),this.Geo=Ln({},{get:(e,t)=>Bn({path:["Geo"],method:t})}),this.serverDate=Bn({path:[],method:"serverDate"}),this.RegExp=Bn({path:[],method:"RegExp"})}getCloudEnv(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){const a=this._dbCallBacks;a[e]&&a[e].forEach((e=>{e(...t)}))}_callbackAuth(e,t){const a=this._authCallBacks;a[e]&&a[e].forEach((e=>{e(...t)}))}multiSend(){const e=Array.from(arguments),t=e.map((e=>{const t=e.getAction(),a=e.getCommand();if("getTemp"!==a.$db[a.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:a}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:t,multiCommand:a,queryList:n}){function i(e,t){if(a&&n)for(let a=0;a<n.length;a++){const i=n[a];i.udb&&"function"==typeof i.udb.setResult&&(t?i.udb.setResult(t):i.udb.setResult(e.result.dataList[a]))}}const s=this,o=this._isJQL?"databaseForJQL":"database";function r(e){return s._callback("error",[e]),q(M(o,"fail"),e).then((()=>q(M(o,"complete"),e))).then((()=>(i(null,e),Y(B,{type:z,content:e}),Promise.reject(e))))}const c=q(M(o,"invoke")),u=this._uniClient;return c.then((()=>u.callFunction({name:"DCloud-clientDB",type:l,data:{action:e,command:t,multiCommand:a}}))).then((e=>{const{code:t,message:a,token:n,tokenExpired:l,systemInfo:c=[]}=e.result;if(c)for(let i=0;i<c.length;i++){const{level:e,message:t,detail:a}=c[i];let n="[System Info]"+t;a&&(n=`${n}\n详细信息：${a}`),(console["warn"===e?"error":e]||console.log)(n)}if(t)return r(new ne({code:t,message:a,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,n&&l&&(oe({token:n,tokenExpired:l}),this._callbackAuth("refreshToken",[{token:n,tokenExpired:l}]),this._callback("refreshToken",[{token:n,tokenExpired:l}]),Y(W,{token:n,tokenExpired:l}));const u=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}];for(let i=0;i<u.length;i++){const{prop:t,tips:a}=u[i];if(t in e.result){const n=e.result[t];Object.defineProperty(e.result,t,{get:()=>(console.warn(a),n)})}}return d=e,q(M(o,"success"),d).then((()=>q(M(o,"complete"),d))).then((()=>{i(d,null);const e=s._parseResult(d);return Y(B,{type:z,content:e}),Promise.resolve(e)}));var d}),(e=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),r(new ne({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId})))))}}const zn="token无效，跳转登录页面",Jn="token过期，跳转登录页面",Hn={TOKEN_INVALID_TOKEN_EXPIRED:Jn,TOKEN_INVALID_INVALID_CLIENTID:zn,TOKEN_INVALID:zn,TOKEN_INVALID_WRONG_TOKEN:zn,TOKEN_INVALID_ANONYMOUS_USER:zn},Gn={"uni-id-token-expired":Jn,"uni-id-check-token-failed":zn,"uni-id-token-not-exist":zn,"uni-id-check-device-feature-failed":zn};function Vn(e,t){let a="";return a=e?`${e}/${t}`:t,a.replace(/^\//,"")}function Qn(e=[],t=""){const a=[],n=[];return e.forEach((e=>{!0===e.needLogin?a.push(Vn(t,e.path)):!1===e.needLogin&&n.push(Vn(t,e.path))})),{needLoginPage:a,notNeedLoginPage:n}}function Yn(e){return e.split("?")[0].replace(/^\//,"")}function Xn(){return function(e){let t=e&&e.$page&&e.$page.fullPath||"";return t?("/"!==t.charAt(0)&&(t="/"+t),t):t}(function(){const e=getCurrentPages();return e[e.length-1]}())}function Zn(){return Yn(Xn())}function es(e="",t={}){if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;const a=t.list,n=Yn(e);return a.some((e=>e.pagePath===n))}const ts=!!t.uniIdRouter,{loginPage:ns,routerNeedLogin:ss,resToLogin:rs,needLoginPage:is,notNeedLoginPage:os,loginPageInTabBar:as}=function({pages:e=[],subPackages:a=[],uniIdRouter:n={},tabBar:i={}}=t){const{loginPage:s,needLogin:o=[],resToLogin:r=!0}=n,{needLoginPage:l,notNeedLoginPage:c}=Qn(e),{needLoginPage:u,notNeedLoginPage:d}=function(e=[]){const t=[],a=[];return e.forEach((e=>{const{root:n,pages:i=[]}=e,{needLoginPage:s,notNeedLoginPage:o}=Qn(i,n);t.push(...s),a.push(...o)})),{needLoginPage:t,notNeedLoginPage:a}}(a);return{loginPage:s,routerNeedLogin:o,resToLogin:r,needLoginPage:[...l,...u],notNeedLoginPage:[...c,...d],loginPageInTabBar:es(s,i)}}();if(is.indexOf(ns)>-1)throw new Error(`Login page [${ns}] should not be "needLogin", please check your pages.json`);function cs(e){const t=Zn();if("/"===e.charAt(0))return e;const[a,n]=e.split("?"),i=a.replace(/^\//,"").split("/"),s=t.split("/");s.pop();for(let o=0;o<i.length;o++){const e=i[o];".."===e?s.pop():"."!==e&&s.push(e)}return""===s[0]&&s.shift(),"/"+s.join("/")+(n?"?"+n:"")}function us(e){const t=Yn(cs(e));return!(os.indexOf(t)>-1)&&(is.indexOf(t)>-1||ss.some((t=>{return a=e,new RegExp(t).test(a);var a})))}function hs({redirect:e}){const t=Yn(e),a=Yn(ns);return Zn()!==a&&t!==a}function ls({api:e,redirect:t}={}){if(!t||!hs({redirect:t}))return;const a=(i=t,"/"!==(n=ns).charAt(0)&&(n="/"+n),i?n.indexOf("?")>-1?n+`&uniIdRedirectUrl=${encodeURIComponent(i)}`:n+`?uniIdRedirectUrl=${encodeURIComponent(i)}`:n);var n,i;as?"navigateTo"!==e&&"redirectTo"!==e||(e="switchTab"):"switchTab"===e&&(e="navigateTo");const s={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout((()=>{s[e]({url:a})}))}function ds({url:e}={}){const t={abortLoginPageJump:!1,autoToLoginPage:!1},a=function(){const{token:e,tokenExpired:t}=ie();let a;if(e){if(t<Date.now()){const e="uni-id-token-expired";a={errCode:e,errMsg:Gn[e]}}}else{const e="uni-id-check-token-failed";a={errCode:e,errMsg:Gn[e]}}return a}();if(us(e)&&a){if(a.uniIdRedirectUrl=e,G($).length>0)return setTimeout((()=>{Y($,a)}),0),t.abortLoginPageJump=!0,t;t.autoToLoginPage=!0}return t}function ps(){!function(){const e=Xn(),{abortLoginPageJump:t,autoToLoginPage:a}=ds({url:e});t||a&&ls({api:"redirectTo",redirect:e})}();const e=["navigateTo","redirectTo","reLaunch","switchTab"];for(let t=0;t<e.length;t++){const a=e[t];uni.addInterceptor(a,{invoke(e){const{abortLoginPageJump:t,autoToLoginPage:n}=ds({url:e.url});return t?e:n?(ls({api:a,redirect:cs(e.url)}),!1):e}})}}function fs(){this.onResponse((e=>{const{type:t,content:a}=e;let n=!1;switch(t){case"cloudobject":n=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in Gn}(a);break;case"clientdb":n=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in Hn}(a)}n&&function(e={}){const t=G($);ee().then((()=>{const a=Xn();if(a&&hs({redirect:a}))return t.length>0?Y($,Object.assign({uniIdRedirectUrl:a},e)):void(ns&&ls({api:"navigateTo",redirect:a}))}))}(a)}))}function gs(e){var t;(t=e).onResponse=function(e){V(B,e)},t.offResponse=function(e){Q(B,e)},function(e){e.onNeedLogin=function(e){V($,e)},e.offNeedLogin=function(e){Q($,e)},ts&&(U("_globalUniCloudStatus").needLoginInit||(U("_globalUniCloudStatus").needLoginInit=!0,ee().then((()=>{ps.call(e)})),rs&&fs.call(e)))}(e),function(e){e.onRefreshToken=function(e){V(W,e)},e.offRefreshToken=function(e){Q(W,e)}}(e)}let ms;const ys="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_s=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function ws(){const e=ie().token||"",t=e.split(".");if(!e||3!==t.length)return{uid:null,role:[],permission:[],tokenExpired:0};let a;try{a=JSON.parse((n=t[1],decodeURIComponent(ms(n).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(i){throw new Error("获取当前用户信息出错，详细错误信息为："+i.message)}var n;return a.tokenExpired=1e3*a.exp,delete a.exp,delete a.iat,a}ms="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!_s.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var a,n,i="",s=0;s<e.length;)t=ys.indexOf(e.charAt(s++))<<18|ys.indexOf(e.charAt(s++))<<12|(a=ys.indexOf(e.charAt(s++)))<<6|(n=ys.indexOf(e.charAt(s++))),i+=64===a?String.fromCharCode(t>>16&255):64===n?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return i}:atob;var vs=s((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const a="chooseAndUploadFile:ok",n="chooseAndUploadFile:fail";function i(e,t){return e.tempFiles.forEach(((e,a)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+a+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function s(e,t,{onChooseFile:n,onUploadProgress:i}){return t.then((e=>{if(n){const t=n(e);if(void 0!==t)return Promise.resolve(t).then((t=>void 0===t?e:t))}return e})).then((t=>!1===t?{errMsg:a,tempFilePaths:[],tempFiles:[]}:function(e,t,n=5,i){(t=Object.assign({},t)).errMsg=a;const s=t.tempFiles,o=s.length;let r=0;return new Promise((a=>{for(;r<n;)l();function l(){const n=r++;if(n>=o)return void(!s.find((e=>!e.url&&!e.errMsg))&&a(t));const c=s[n];e.uploadFile({filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,onUploadProgress(e){e.index=n,e.tempFile=c,e.tempFilePath=c.path,i&&i(e)}}).then((e=>{c.url=e.fileID,n<o&&l()})).catch((e=>{c.errMsg=e.errMsg||e.message,n<o&&l()}))}}))}(e,t,5,i)))}t.initChooseAndUploadFile=function(e){return function(t={type:"all"}){return"image"===t.type?s(e,function(e){const{count:t,sizeType:a,sourceType:s=["album","camera"],extension:o}=e;return new Promise(((e,r)=>{uni.chooseImage({count:t,sizeType:a,sourceType:s,extension:o,success(t){e(i(t,"image"))},fail(e){r({errMsg:e.errMsg.replace("chooseImage:fail",n)})}})}))}(t),t):"video"===t.type?s(e,function(e){const{camera:t,compressed:a,maxDuration:s,sourceType:o=["album","camera"],extension:r}=e;return new Promise(((e,l)=>{uni.chooseVideo({camera:t,compressed:a,maxDuration:s,sourceType:o,extension:r,success(t){const{tempFilePath:a,duration:n,size:s,height:o,width:r}=t;e(i({errMsg:"chooseVideo:ok",tempFilePaths:[a],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:a,size:s,type:t.tempFile&&t.tempFile.type||"",width:r,height:o,duration:n,fileType:"video",cloudPath:""}]},"video"))},fail(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",n)})}})}))}(t),t):s(e,function(e){const{count:t,extension:a}=e;return new Promise(((e,s)=>{let o=uni.chooseFile;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(o=wx.chooseMessageFile),"function"!=typeof o)return s({errMsg:n+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});o({type:"all",count:t,extension:a,success(t){e(i(t))},fail(e){s({errMsg:e.errMsg.replace("chooseFile:fail",n)})}})}))}(t),t)}}})),Is=n(vs);const Ss="manual";function bs(e){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{}}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{if(this.loadtime===Ss)return;let a=!1;const n=[];for(let i=2;i<e.length;i++)e[i]!==t[i]&&(n.push(e[i]),a=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(a,n)}))},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:a}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomGet().then((a=>{this.mixinDatacomLoading=!1;const{data:n,count:i}=a.result;this.getcount&&(this.mixinDatacomPage.count=i),this.mixinDatacomHasMore=n.length<this.pageSize;const s=e?n.length?n[0]:void 0:n;this.mixinDatacomResData=s,t&&t(s)})).catch((e=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e,a&&a(e)})))},mixinDatacomGet(t={}){let a=e.database(this.spaceInfo);const n=t.action||this.action;n&&(a=a.action(n));const i=t.collection||this.collection;a=Array.isArray(i)?a.collection(...i):a.collection(i);const s=t.where||this.where;s&&Object.keys(s).length&&(a=a.where(s));const o=t.field||this.field;o&&(a=a.field(o));const r=t.foreignKey||this.foreignKey;r&&(a=a.foreignKey(r));const l=t.groupby||this.groupby;l&&(a=a.groupBy(l));const c=t.groupField||this.groupField;c&&(a=a.groupField(c)),!0===(void 0!==t.distinct?t.distinct:this.distinct)&&(a=a.distinct());const u=t.orderby||this.orderby;u&&(a=a.orderBy(u));const d=void 0!==t.pageCurrent?t.pageCurrent:this.mixinDatacomPage.current,h=void 0!==t.pageSize?t.pageSize:this.mixinDatacomPage.size,m=void 0!==t.getcount?t.getcount:this.getcount,p=void 0!==t.gettree?t.gettree:this.gettree,f=void 0!==t.gettreepath?t.gettreepath:this.gettreepath,v={getCount:m},g={limitLevel:void 0!==t.limitlevel?t.limitlevel:this.limitlevel,startWith:void 0!==t.startwith?t.startwith:this.startwith};return p&&(v.getTree=g),f&&(v.getTreePath=g),a=a.skip(h*(d-1)).limit(h).get(v),a}}}}function ks(e){return function(t,a={}){a=function(e,t={}){return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==typeof t.secretMethods&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},a);const{customUI:n,loadingOptions:i,errorOptions:s,parseSystemError:o}=a,r=!n;return new Proxy({},{get:(n,l)=>function({fn:e,interceptorName:t,getCallbackArgs:a}={}){return async function(...n){const i=a?a({params:n}):{};let s,o;try{return await q(M(t,"invoke"),{...i}),s=await e(...n),await q(M(t,"success"),{...i,result:s}),s}catch(r){throw o=r,await q(M(t,"fail"),{...i,error:o}),o}finally{await q(M(t,"complete"),o?{...i,error:o}:{...i,result:s})}}}({fn:async function n(...c){let u;r&&uni.showLoading({title:i.title,mask:i.mask});const d={name:t,type:h,data:{method:l,params:c}};"object"==typeof a.secretMethods&&function(e,t){const a=t.data.method,n=e.secretMethods||{},i=n[a]||n["*"];i&&(t.secretType=i)}(a,d);let m=!1;try{u=await e.callFunction(d)}catch(y){m=!0,u={result:new ne(y)}}const{errSubject:p,errCode:f,errMsg:v,newToken:g}=u.result||{};if(r&&uni.hideLoading(),g&&g.token&&g.tokenExpired&&(oe(g),Y(W,{...g})),f){let e=v;if(m&&o&&(e=(await o({objectName:t,methodName:l,params:c,errSubject:p,errCode:f,errMsg:v})).errMsg||v),r)if("toast"===s.type)uni.showToast({title:e,icon:"none"});else{if("modal"!==s.type)throw new Error(`Invalid errorOptions.type: ${s.type}`);{const{confirm:t}=await async function({title:e,content:t,showCancel:a,cancelText:n,confirmText:i}={}){return new Promise(((s,o)=>{uni.showModal({title:e,content:t,showCancel:a,cancelText:n,confirmText:i,success(e){s(e)},fail(){s({confirm:!1,cancel:!0})}})}))}({title:"提示",content:e,showCancel:s.retry,cancelText:"取消",confirmText:s.retry?"重试":"确定"});if(s.retry&&t)return n(...c)}}const a=new ne({subject:p,code:f,message:v,requestId:u.requestId});throw a.detail=u.result,Y(B,{type:H,content:a}),a}return Y(B,{type:H,content:u.result}),u.result},interceptorName:"callObject",getCallbackArgs:function({params:e}={}){return{objectName:t,methodName:l,params:e}}})})}}function Cs(e){return U("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",e.config.spaceId))}async function Ts({openid:e,callLoginByWeixin:t=!1}={}){throw Cs(this),new Error(`[SecureNetwork] API \`initSecureNetworkByWeixin\` is not supported on platform \`${P}\``)}async function Ps(e){const t=Cs(this);return t.initPromise||(t.initPromise=Ts.call(this,e)),t.initPromise}function As(e){return function({openid:t,callLoginByWeixin:a=!1}={}){return Ps.call(e,{openid:t,callLoginByWeixin:a})}}function Es(e){const t={getSystemInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(a){return new Promise(((n,i)=>{t[e]({...a,success(e){n(e)},fail(e){i(e)}})}))}}class Os extends class{constructor(){this._callback={}}addListener(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}on(e,t){return this.addListener(e,t)}removeListener(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');const a=this._callback[e];if(!a)return;const n=function(e,t){for(let a=e.length-1;a>=0;a--)if(e[a]===t)return a;return-1}(a,t);a.splice(n,1)}off(e,t){return this.removeListener(e,t)}removeAllListener(e){delete this._callback[e]}emit(e,...t){const a=this._callback[e];if(a)for(let n=0;n<a.length;n++)a[n](...t)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([Es("getSystemInfo")(),Es("getPushClientId")()]).then((([{appId:e}={},{cid:t}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!t)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=t,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()}),(e=>{throw this.emit("error",e),this.close(),e}))}async open(){return this.init()}_isUniCloudSSE(e){if("receive"!==e.type)return!1;const t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;const t=e&&e.data&&e.data.payload,{action:a,messageId:n,message:i}=t;this._payloadQueue.push({action:a,messageId:n,message:i}),this._consumMessage()}_consumMessage(){for(;;){const e=this._payloadQueue.find((e=>e.messageId===this._currentMessageId+1));if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){const{action:t,messageId:a,message:n}=e;"end"===t?this._end({messageId:a,message:n}):"message"===t&&this._appendMessage({messageId:a,message:n})}_appendMessage({messageId:e,message:t}={}){this.emit("message",t)}_end({messageId:e,message:t}={}){this.emit("end",t),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}}function Us(e){e._initPromiseHub||(e._initPromiseHub=new I({createPromise:function(){let t=Promise.resolve();t=new Promise((e=>{setTimeout((()=>{e()}),1)}));const a=e.auth();return t.then((()=>a.getLoginState())).then((e=>e?Promise.resolve():a.signInAnonymously()))}}))}const Ls={tcb:St,tencent:St,aliyun:me,private:kt};let Ns=new class{init(e){let t={};const a=Ls[e.provider];if(!a)throw new Error("未提供正确的provider参数");var n;return t=a.init(e),Us(t),Rn(t),function(e){const t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),(n=t).database=function(e){if(e&&Object.keys(e).length>0)return n.init(e).database();if(this._database)return this._database;const t=$n(Wn,{uniClient:n});return this._database=t,t},n.databaseForJQL=function(e){if(e&&Object.keys(e).length>0)return n.init(e).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;const t=$n(Wn,{uniClient:n,isJQL:!0});return this._databaseForJQL=t,t},function(e){e.getCurrentUserInfo=ws,e.chooseAndUploadFile=Is.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return bs(e)}}),e.SSEChannel=Os,e.initSecureNetworkByWeixin=As(e),e.importObject=ks(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((e=>{if(!t[e])return;const a=t[e];var n,i;t[e]=function(){return a.apply(t,Array.from(arguments))},t[e]=(n=t[e],i=e,function(e){let t=!1;if("callFunction"===i){const a=e&&e.type||u;t=a!==u}const a="callFunction"===i&&!t,s=this._initPromiseHub.exec();e=e||{};const{success:o,fail:r,complete:l}=te(e),c=s.then((()=>t?Promise.resolve():q(M(i,"invoke"),e))).then((()=>n.call(this,e))).then((e=>t?Promise.resolve(e):q(M(i,"success"),e).then((()=>q(M(i,"complete"),e))).then((()=>(a&&Y(B,{type:J,content:e}),Promise.resolve(e))))),(e=>t?Promise.reject(e):q(M(i,"fail"),e).then((()=>q(M(i,"complete"),e))).then((()=>(Y(B,{type:J,content:e}),Promise.reject(e))))));if(!(o||r||l))return c;c.then((e=>{o&&o(e),l&&l(e),a&&Y(B,{type:J,content:e})}),(e=>{r&&r(e),l&&l(e),a&&Y(B,{type:J,content:e})}))}).bind(t)})),t.init=this.init,t}};(()=>{const e=E;let t={};if(e&&1===e.length)t=e[0],Ns=Ns.init(t),Ns._isDefault=!0;else{const t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"];let a;a=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"uni-app cli项目内使用uniCloud需要使用HBuilderX的运行菜单运行项目，且需要在uniCloud目录关联服务空间",t.forEach((e=>{Ns[e]=function(){return console.error(a),Promise.reject(new ne({code:"SYS_ERR",message:a}))}}))}Object.assign(Ns,{get mixinDatacom(){return bs(Ns)}}),gs(Ns),Ns.addInterceptor=D,Ns.removeInterceptor=F,Ns.interceptObject=K})();var Ds=Ns;const dataPicker={props:{localdata:{type:[Array,Object],default:()=>[]},spaceInfo:{type:Object,default:()=>({})},collection:{type:String,default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},getone:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},manual:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>[]},modelValue:{type:[Array,String,Number],default:()=>[]},preload:{type:Boolean,default:!1},stepSearh:{type:Boolean,default:!0},selfField:{type:String,default:""},parentField:{type:String,default:""},multiple:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},data(){return{loading:!1,errorMessage:"",loadMore:{contentdown:"",contentrefresh:"",contentnomore:""},dataList:[],selected:[],selectedIndex:0,page:{current:this.pageCurrent,size:this.pageSize,count:0}}},computed:{isLocaldata(){return!this.collection.length},postField(){let e=[this.field];return this.parentField&&e.push(`${this.parentField} as parent_value`),e.join(",")},dataValue(){return(Array.isArray(this.modelValue)?this.modelValue.length>0:null!==this.modelValue||void 0!==this.modelValue)?this.modelValue:this.value},hasValue(){return"number"==typeof this.dataValue||null!=this.dataValue&&this.dataValue.length>0}},created(){this.$watch((()=>{var e=[];return["pageCurrent","pageSize","spaceInfo","value","modelValue","localdata","collection","action","field","orderby","where","getont","getcount","gettree"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{for(let a=2;a<e.length&&e[a]==t[a];a++);e[0]!=t[0]&&(this.page.current=this.pageCurrent),this.page.size=this.pageSize,this.onPropsChange()})),this._treeData=[]},methods:{onPropsChange(){this._treeData=[]},getCommand(e={}){let t=Ds.database(this.spaceInfo);const a=e.action||this.action;a&&(t=t.action(a));const n=e.collection||this.collection;t=t.collection(n);const i=e.where||this.where;i&&Object.keys(i).length&&(t=t.where(i));const s=e.field||this.field;s&&(t=t.field(s));const o=e.orderby||this.orderby;o&&(t=t.orderBy(o));const r=void 0!==e.pageCurrent?e.pageCurrent:this.page.current,l=void 0!==e.pageSize?e.pageSize:this.page.size,c={getCount:void 0!==e.getcount?e.getcount:this.getcount,getTree:void 0!==e.gettree?e.gettree:this.gettree};return e.getTreePath&&(c.getTreePath=e.getTreePath),t=t.skip(l*(r-1)).limit(l).get(c),t},getNodeData(e){this.loading||(this.loading=!0,this.getCommand({field:this.postField,where:this._pathWhere()}).then((t=>{this.loading=!1,this.selected=t.result.data,e&&e()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},getTreePath(e){this.loading||(this.loading=!0,this.getCommand({field:this.postField,getTreePath:{startWith:`${this.selfField}=='${this.dataValue}'`}}).then((t=>{this.loading=!1;let a=[];this._extractTreePath(t.result.data,a),this.selected=a,e&&e()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},loadData(){this.isLocaldata?this._processLocalData():null==this.dataValue?this.stepSearh?this._loadNodeData((e=>{this._treeData=e,this._updateBindData()})):this._loadAllData((e=>{this._treeData=[],this._extractTree(e,this._treeData,null),this._updateBindData()})):this._loadNodeData((e=>{this._treeData=e,this._updateBindData(),this._updateSelected()}))},_loadAllData(e){this.loading||(this.loading=!0,this.getCommand({field:this.postField,gettree:!0,startwith:`${this.selfField}=='${this.dataValue}'`}).then((t=>{this.loading=!1,e(t.result.data),this.onDataChange()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},_loadNodeData(e,t){this.loading||(this.loading=!0,this.getCommand({field:this.postField,where:t||this._postWhere(),pageSize:500}).then((t=>{this.loading=!1,e(t.result.data),this.onDataChange()})).catch((e=>{this.loading=!1,this.errorMessage=e})))},_pathWhere(){let e=[],t=this._getParentNameByField();return t&&e.push(`${t} == '${this.dataValue}'`),this.where?`(${this.where}) && (${e.join(" || ")})`:e.join(" || ")},_postWhere(){let e=[],t=this.selected,a=this.parentField;if(a&&e.push(`${a} == null || ${a} == ""`),t.length)for(var n=0;n<t.length-1;n++)e.push(`${a} == '${t[n].value}'`);let i=[];return this.where&&i.push(`(${this.where})`),e.length&&i.push(`(${e.join(" || ")})`),i.join(" && ")},_nodeWhere(){let e=[],t=this.selected;return t.length&&e.push(`${this.parentField} == '${t[t.length-1].value}'`),this.where?`(${this.where}) && (${e.join(" || ")})`:e.join(" || ")},_getParentNameByField(){const e=this.field.split(",");let t=null;for(let a=0;a<e.length;a++){const n=e[a].split("as");if(!(n.length<2)&&"value"===n[1].trim()){t=n[0].trim();break}}return t},_isTreeView(){return this.parentField&&this.selfField},_updateSelected(){var e=this.dataList,t=this.selected;let a=this.map.text,n=this.map.value;for(var i=0;i<t.length;i++)for(var s=t[i].value,o=e[i],r=0;r<o.length;r++){var l=o[r];if(l[n]===s){t[i].text=l[a];break}}},_updateBindData(e){const{dataList:t,hasNodes:a}=this._filterData(this._treeData,this.selected);let n=!1===this._stepSearh&&!a;return e&&(e.isleaf=n),this.dataList=t,this.selectedIndex=t.length-1,!n&&this.selected.length<t.length&&this.selected.push({value:null,text:"请选择"}),{isleaf:n,hasNodes:a}},_filterData(e,t){let a=[],n=!0;a.push(e.filter((e=>null===e.parent_value||void 0===e.parent_value||""===e.parent_value)));for(let o=0;o<t.length;o++){var i=t[o].value,s=e.filter((e=>e.parent_value===i));s.length?a.push(s):n=!1}return{dataList:a,hasNodes:n}},_extractTree(e,t,a){let n=this.map.value;for(let i=0;i<e.length;i++){let s=e[i],o={};for(let e in s)"children"!==e&&(o[e]=s[e]);null!=a&&""!==a&&(o.parent_value=a),t.push(o);let r=s.children;r&&this._extractTree(r,t,s[n])}},_extractTreePath(e,t){for(let a=0;a<e.length;a++){let n=e[a],i={};for(let e in n)"children"!==e&&(i[e]=n[e]);t.push(i);let s=n.children;s&&this._extractTreePath(s,t)}},_findNodePath(e,t,a=[]){let n=this.map.text,i=this.map.value;for(let s=0;s<t.length;s++){let o=t[s],r=o.children,l=o[n],c=o[i];if(a.push({value:c,text:l}),c===e)return a;if(r){const t=this._findNodePath(e,r,a);if(t.length)return t}a.pop()}return[]},_processLocalData(){this._treeData=[],this._extractTree(this.localdata,this._treeData);var e=this.dataValue;void 0!==e&&(Array.isArray(e)&&"object"==typeof(e=e[e.length-1])&&e[this.map.value]&&(e=e[this.map.value]),this.selected=this._findNodePath(e,this.localdata))}}},_sfc_main$6={name:"UniDataPickerView",emits:["nodeclick","change","datachange","update:modelValue"],mixins:[dataPicker],props:{managedMode:{type:Boolean,default:!1},ellipsis:{type:Boolean,default:!0}},data:()=>({}),created(){this.managedMode||this.$nextTick((()=>{this.load()}))},methods:{onPropsChange(){this._treeData=[],this.selectedIndex=0,this.load()},load(){this.isLocaldata?this.loadData():this.dataValue.length&&this.getTreePath((e=>{this.loadData()}))},handleSelect(e){this.selectedIndex=e},handleNodeClick(e,t,a){if(e.disable)return;const n=this.dataList[t][a],i=n[this.map.text],s=n[this.map.value];if(t<this.selected.length-1?(this.selected.splice(t,this.selected.length-t),this.selected.push({text:i,value:s})):t===this.selected.length-1&&this.selected.splice(t,1,{text:i,value:s}),n.isleaf)return void this.onSelectedChange(n,n.isleaf);const{isleaf:o,hasNodes:r}=this._updateBindData();(this._isTreeView()||r)&&(!this.isLocaldata||r&&!o)?o||r?this.onSelectedChange(n,!1):this._loadNodeData((e=>{e.length?(this._treeData.push(...e),this._updateBindData(n)):n.isleaf=!0,this.onSelectedChange(n,n.isleaf)}),this._nodeWhere()):this.onSelectedChange(n,!0)},updateData(e){this._treeData=e.treeData,this.selected=e.selected,this._treeData.length?this._updateBindData():this.loadData()},onDataChange(){this.$emit("datachange")},onSelectedChange(e,t){t&&this._dispatchEvent(),e&&this.$emit("nodeclick",e)},_dispatchEvent(){this.$emit("change",this.selected.slice(0))}}};function _sfc_render$2(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_0);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-data-pickerview"},[vue.createElementVNode("scroll-view",{class:"selected-area","scroll-x":"true","scroll-y":"false","show-scrollbar":!1},[vue.createElementVNode("view",{class:"selected-list"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.selected,((t,n)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[t.text?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:vue.normalizeClass(["selected-item",{"selected-item-active":n==e.selectedIndex,"selected-item-text-overflow":a.ellipsis}]),onClick:e=>s.handleSelect(n)},[vue.createElementVNode("text",{class:""},vue.toDisplayString(t.text),1)],10,["onClick"])):vue.createCommentVNode("v-if",!0)],64)))),256))])]),vue.createElementVNode("view",{class:"tab-c"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.dataList,((t,a)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[a==e.selectedIndex?(vue.openBlock(),vue.createElementBlock("scroll-view",{class:"list",key:a,"scroll-y":!0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,((t,n)=>(vue.openBlock(),vue.createElementBlock("view",{class:vue.normalizeClass(["item",{"is-disabled":!!t.disable}]),onClick:e=>s.handleNodeClick(t,a,n)},[vue.createElementVNode("text",{class:"item-text item-text-overflow"},vue.toDisplayString(t[e.map.text]),1),e.selected.length>a&&t[e.map.value]==e.selected[a].value?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"check"})):vue.createCommentVNode("v-if",!0)],10,["onClick"])))),256))])):vue.createCommentVNode("v-if",!0)],64)))),256)),e.loading?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"loading-cover"},[vue.createVNode(o,{class:"load-more",contentText:e.loadMore,status:"loading"},null,8,["contentText"])])):vue.createCommentVNode("v-if",!0),e.errorMessage?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"error-message"},[vue.createElementVNode("text",{class:"error-text"},vue.toDisplayString(e.errorMessage),1)])):vue.createCommentVNode("v-if",!0)])])}const DataPickerView=_export_sfc(_sfc_main$6,[["render",_sfc_render$2],["__scopeId","data-v-76b376ce"]]),_sfc_main$5={name:"UniDataPicker",emits:["popupopened","popupclosed","nodeclick","input","change","update:modelValue"],mixins:[dataPicker],components:{DataPickerView:DataPickerView},props:{options:{type:[Object,Array],default:()=>({})},popupTitle:{type:String,default:"请选择"},placeholder:{type:String,default:"请选择"},heightMobile:{type:String,default:""},readonly:{type:Boolean,default:!1},clearIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!0},split:{type:String,default:"/"},ellipsis:{type:Boolean,default:!0}},data:()=>({isOpened:!1,inputSelected:[]}),created(){this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem"),this.formItem&&this.formItem.name&&(this.rename=this.formItem.name,this.form.inputChildrens.push(this)),this.$nextTick((()=>{this.load()}))},methods:{clear(){this.inputSelected.splice(0),this._dispatchEvent([])},onPropsChange(){this._treeData=[],this.selectedIndex=0,this.load()},load(){this.readonly?this._processReadonly(this.localdata,this.dataValue):this.isLocaldata?(this.loadData(),this.inputSelected=this.selected.slice(0)):this.parentField||this.selfField||!this.hasValue?this.hasValue&&this.getTreePath((()=>{this.inputSelected=this.selected.slice(0)})):this.getNodeData((()=>{this.inputSelected=this.selected.slice(0)}))},getForm(e="uniForms"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t},show(){this.isOpened=!0,setTimeout((()=>{this.$refs.pickerView.updateData({treeData:this._treeData,selected:this.selected,selectedIndex:this.selectedIndex})}),200),this.$emit("popupopened")},hide(){this.isOpened=!1,this.$emit("popupclosed")},handleInput(){this.readonly||this.show()},handleClose(e){this.hide()},onnodeclick(e){this.$emit("nodeclick",e)},ondatachange(e){this._treeData=this.$refs.pickerView._treeData},onchange(e){this.hide(),this.$nextTick((()=>{this.inputSelected=e})),this._dispatchEvent(e)},_processReadonly(e,t){if(e.findIndex((e=>e.children))>-1){let e;return Array.isArray(t)?(e=t[t.length-1],"object"==typeof e&&e.value&&(e=e.value)):e=t,void(this.inputSelected=this._findNodePath(e,this.localdata))}if(!this.hasValue)return void(this.inputSelected=[]);let a=[];for(let s=0;s<t.length;s++){var n=t[s],i=e.find((e=>e.value==n));i&&a.push(i)}a.length&&(this.inputSelected=a)},_filterForArray(e,t){var a=[];for(let s=0;s<t.length;s++){var n=t[s],i=e.find((e=>e.value==n));i&&a.push(i)}return a},_dispatchEvent(e){let t={};if(e.length){for(var a=new Array(e.length),n=0;n<e.length;n++)a[n]=e[n].value;t=e[e.length-1]}else t.value="";this.formItem&&this.formItem.setValue(t.value),this.$emit("input",t.value),this.$emit("update:modelValue",t.value),this.$emit("change",{detail:{value:e}})}}};function _sfc_render$1(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_0),r=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),l=vue.resolveComponent("data-picker-view");return vue.openBlock(),vue.createElementBlock("view",{class:"uni-data-tree"},[vue.createElementVNode("view",{class:"uni-data-tree-input",onClick:t[1]||(t[1]=(...e)=>s.handleInput&&s.handleInput(...e))},[vue.renderSlot(e.$slots,"default",{options:a.options,data:i.inputSelected,error:e.errorMessage},(()=>[vue.createElementVNode("view",{class:vue.normalizeClass(["input-value",{"input-value-border":a.border}])},[e.errorMessage?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"selected-area error-text"},vue.toDisplayString(e.errorMessage),1)):e.loading&&!i.isOpened?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"selected-area"},[vue.createVNode(o,{class:"load-more",contentText:e.loadMore,status:"loading"},null,8,["contentText"])])):i.inputSelected.length?(vue.openBlock(),vue.createElementBlock("scroll-view",{key:2,class:"selected-area","scroll-x":"true"},[vue.createElementVNode("view",{class:"selected-list"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.inputSelected,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{class:"selected-item",key:t},[vue.createElementVNode("text",{class:"text-color"},vue.toDisplayString(e.text),1),t<i.inputSelected.length-1?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"input-split-line"},vue.toDisplayString(a.split),1)):vue.createCommentVNode("v-if",!0)])))),128))])])):(vue.openBlock(),vue.createElementBlock("text",{key:3,class:"selected-area placeholder"},vue.toDisplayString(a.placeholder),1)),a.clearIcon&&!a.readonly&&i.inputSelected.length?(vue.openBlock(),vue.createElementBlock("view",{key:4,class:"icon-clear",onClick:t[0]||(t[0]=vue.withModifiers(((...e)=>s.clear&&s.clear(...e)),["stop"]))},[vue.createVNode(r,{type:"clear",color:"#c0c4cc",size:"24"})])):vue.createCommentVNode("v-if",!0),a.clearIcon&&i.inputSelected.length||a.readonly?vue.createCommentVNode("v-if",!0):(vue.openBlock(),vue.createElementBlock("view",{key:5,class:"arrow-area"},[vue.createElementVNode("view",{class:"input-arrow"})]))],2)]),!0)]),i.isOpened?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-data-tree-cover",onClick:t[2]||(t[2]=(...e)=>s.handleClose&&s.handleClose(...e))})):vue.createCommentVNode("v-if",!0),i.isOpened?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"uni-data-tree-dialog"},[vue.createElementVNode("view",{class:"uni-popper__arrow"}),vue.createElementVNode("view",{class:"dialog-caption"},[vue.createElementVNode("view",{class:"title-area"},[vue.createElementVNode("text",{class:"dialog-title"},vue.toDisplayString(a.popupTitle),1)]),vue.createElementVNode("view",{class:"dialog-close",onClick:t[3]||(t[3]=(...e)=>s.handleClose&&s.handleClose(...e))},[vue.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),vue.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})])]),vue.createVNode(l,{class:"picker-view",ref:"pickerView",modelValue:e.dataValue,"onUpdate:modelValue":t[4]||(t[4]=t=>e.dataValue=t),localdata:e.localdata,preload:e.preload,collection:e.collection,field:e.field,orderby:e.orderby,where:e.where,"step-searh":e.stepSearh,"self-field":e.selfField,"parent-field":e.parentField,"managed-mode":!0,map:e.map,ellipsis:a.ellipsis,onChange:s.onchange,onDatachange:s.ondatachange,onNodeclick:s.onnodeclick},null,8,["modelValue","localdata","preload","collection","field","orderby","where","step-searh","self-field","parent-field","map","ellipsis","onChange","onDatachange","onNodeclick"])])):vue.createCommentVNode("v-if",!0)])}const __easycom_2=_export_sfc(_sfc_main$5,[["render",_sfc_render$1],["__scopeId","data-v-dc21d015"]]),_sfc_main$4={name:"uniDataChecklist",mixins:[Ds.mixinDatacom||{}],emits:["input","update:modelValue","change"],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>""},modelValue:{type:[Array,String,Number],default:()=>""},localdata:{type:Array,default:()=>[]},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!1},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},watch:{localdata:{handler(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},deep:!0},mixinDatacomResData(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},value(e){this.dataList=this.getDataList(e)},modelValue(e){this.dataList=this.getDataList(e)}},data:()=>({dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isLocal:!0,styles:{selectedColor:"#2979ff",selectedTextColor:"#666"},isTop:0}),computed:{dataValue(){return""===this.value?this.modelValue:(this.modelValue,this.value)}},created(){this.localdata&&0!==this.localdata.length?(this.isLocal=!0,this.range=this.localdata,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.isLocal=!1,this.loadData())},methods:{loadData(){this.mixinDatacomGet().then((e=>{this.mixinDatacomResData=e.result.data,0===this.mixinDatacomResData.length?(this.isLocal=!1,this.mixinDatacomErrorMessage=this.emptyText):this.isLocal=!0})).catch((e=>{this.mixinDatacomErrorMessage=e.message}))},getForm(e="uniForms"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t},chagne(e){const t=e.detail.value;let a={value:[],data:[]};if(this.multiple)this.range.forEach((e=>{t.includes(e[this.map.value]+"")&&(a.value.push(e[this.map.value]),a.data.push(e))}));else{const e=this.range.find((e=>e[this.map.value]+""===t));e&&(a={value:e[this.map.value],data:e})}this.$emit("input",a.value),this.$emit("update:modelValue",a.value),this.$emit("change",{detail:a}),this.multiple?this.dataList=this.getDataList(a.value,!0):this.dataList=this.getDataList(a.value)},getDataList(e){let t=JSON.parse(JSON.stringify(this.range)),a=[];return this.multiple&&(Array.isArray(e)||(e=[])),t.forEach(((t,n)=>{if(t.disabled=t.disable||t.disabled||!1,this.multiple)if(e.length>0){let a=e.find((e=>e===t[this.map.value]));t.selected=void 0!==a}else t.selected=!1;else t.selected=e===t[this.map.value];a.push(t)})),this.setRange(a)},setRange(e){let t=e.filter((e=>e.selected)),a=Number(this.min)||0,n=Number(this.max)||"";return e.forEach(((i,s)=>{if(this.multiple){if(t.length<=a){void 0!==t.find((e=>e[this.map.value]===i[this.map.value]))&&(i.disabled=!0)}if(t.length>=n&&""!==n){void 0===t.find((e=>e[this.map.value]===i[this.map.value]))&&(i.disabled=!0)}}this.setStyles(i,s),e[s]=i})),e},setStyles(e,t){e.styleBackgroud=this.setStyleBackgroud(e),e.styleIcon=this.setStyleIcon(e),e.styleIconText=this.setStyleIconText(e),e.styleRightIcon=this.setStyleRightIcon(e)},getSelectedValue(e){if(!this.multiple)return this.dataValue;let t=[];return e.forEach((e=>{e.selected&&t.push(e[this.map.value])})),this.dataValue.length>0?this.dataValue:t},setStyleBackgroud(e){let t={},a=this.selectedColor?this.selectedColor:"#2979ff";this.selectedColor&&("list"!==this.mode&&(t["border-color"]=e.selected?a:"#DCDFE6"),"tag"===this.mode&&(t["background-color"]=e.selected?a:"#f5f5f5"));let n="";for(let i in t)n+=`${i}:${t[i]};`;return n},setStyleIcon(e){let t={},a="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#2979ff";t["background-color"]=e.selected?a:"#fff",t["border-color"]=e.selected?a:"#DCDFE6",!e.selected&&e.disabled&&(t["background-color"]="#F2F6FC",t["border-color"]=e.selected?a:"#DCDFE6")}for(let n in t)a+=`${n}:${t[n]};`;return a},setStyleIconText(e){let t={},a="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#2979ff";"tag"===this.mode?t.color=e.selected?this.selectedTextColor?this.selectedTextColor:"#fff":"#666":t.color=e.selected?this.selectedTextColor?this.selectedTextColor:a:"#666",!e.selected&&e.disabled&&(t.color="#999")}for(let n in t)a+=`${n}:${t[n]};`;return a},setStyleRightIcon(e){let t={},a="";"list"===this.mode&&(t["border-color"]=e.selected?this.styles.selectedColor:"#DCDFE6");for(let n in t)a+=`${n}:${t[n]};`;return a}}};function _sfc_render(e,t,a,n,i,s){const o=resolveEasycom(vue.resolveDynamicComponent("uni-load-more"),__easycom_0);return vue.openBlock(),vue.createElementBlock("view",{class:"uni-data-checklist",style:vue.normalizeStyle({"margin-top":i.isTop+"px"})},[i.isLocal?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[a.multiple?(vue.openBlock(),vue.createElementBlock("checkbox-group",{key:0,class:vue.normalizeClass(["checklist-group",{"is-list":"list"===a.mode||a.wrap}]),onChange:t[0]||(t[0]=(...e)=>s.chagne&&s.chagne(...e))},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.dataList,((e,t)=>(vue.openBlock(),vue.createElementBlock("label",{class:vue.normalizeClass(["checklist-box",["is--"+a.mode,e.selected?"is-checked":"",a.disabled||e.disabled?"is-disable":"",0!==t&&"list"===a.mode?"is-list-border":""]]),style:vue.normalizeStyle(e.styleBackgroud),key:t},[vue.createElementVNode("checkbox",{class:"hidden",hidden:"",disabled:a.disabled||!!e.disabled,value:e[a.map.value]+"",checked:e.selected},null,8,["disabled","value","checked"]),"tag"!==a.mode&&"list"!==a.mode||"list"===a.mode&&"left"===a.icon?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"checkbox__inner",style:vue.normalizeStyle(e.styleIcon)},[vue.createElementVNode("view",{class:"checkbox__inner-icon"})],4)):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:vue.normalizeClass(["checklist-content",{"list-content":"list"===a.mode&&"left"===a.icon}])},[vue.createElementVNode("text",{class:"checklist-text",style:vue.normalizeStyle(e.styleIconText)},vue.toDisplayString(e[a.map.text]),5),"list"===a.mode&&"right"===a.icon?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"checkobx__list",style:vue.normalizeStyle(e.styleBackgroud)},null,4)):vue.createCommentVNode("v-if",!0)],2)],6)))),128))],34)):(vue.openBlock(),vue.createElementBlock("radio-group",{key:1,class:vue.normalizeClass(["checklist-group",{"is-list":"list"===a.mode,"is-wrap":a.wrap}]),onChange:t[1]||(t[1]=(...e)=>s.chagne&&s.chagne(...e))},[vue.createCommentVNode(" "),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.dataList,((e,t)=>(vue.openBlock(),vue.createElementBlock("label",{class:vue.normalizeClass(["checklist-box",["is--"+a.mode,e.selected?"is-checked":"",a.disabled||e.disabled?"is-disable":"",0!==t&&"list"===a.mode?"is-list-border":""]]),style:vue.normalizeStyle(e.styleBackgroud),key:t},[vue.createElementVNode("radio",{class:"hidden",hidden:"",disabled:a.disabled||e.disabled,value:e[a.map.value]+"",checked:e.selected},null,8,["disabled","value","checked"]),"tag"!==a.mode&&"list"!==a.mode||"list"===a.mode&&"left"===a.icon?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"radio__inner",style:vue.normalizeStyle(e.styleBackgroud)},[vue.createElementVNode("view",{class:"radio__inner-icon",style:vue.normalizeStyle(e.styleIcon)},null,4)],4)):vue.createCommentVNode("v-if",!0),vue.createElementVNode("view",{class:vue.normalizeClass(["checklist-content",{"list-content":"list"===a.mode&&"left"===a.icon}])},[vue.createElementVNode("text",{class:"checklist-text",style:vue.normalizeStyle(e.styleIconText)},vue.toDisplayString(e[a.map.text]),5),"list"===a.mode&&"right"===a.icon?(vue.openBlock(),vue.createElementBlock("view",{key:0,style:vue.normalizeStyle(e.styleRightIcon),class:"checkobx__list"},null,4)):vue.createCommentVNode("v-if",!0)],2)],6)))),128))],34))],64)):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"uni-data-loading"},[e.mixinDatacomErrorMessage?(vue.openBlock(),vue.createElementBlock("text",{key:1},vue.toDisplayString(e.mixinDatacomErrorMessage),1)):(vue.openBlock(),vue.createBlock(o,{key:0,status:"loading",iconType:"snow",iconSize:18,"content-text":i.contentText},null,8,["content-text"]))]))],4)}const __easycom_6=_export_sfc(_sfc_main$4,[["render",_sfc_render],["__scopeId","data-v-0de1a7d3"]]),_sfc_main$3={__name:"verificationCode",setup(e){const t=vue.ref(null),a=vue.ref([]),n=vue.ref([]),i=vue.ref(0),s=vue.ref({}),o=vue.ref(!1),r=vue.ref(null),l=vue.ref(null),c=vue.ref({}),u=vue.ref("扫码或者输入核销码搜索"),d=vue.ref({VALID:"已生效",USED:"已使用",EXPIRED:"已失效",GRANTED:"已发放"}),h=vue.ref({DISCOUNT:"折扣卷",DEDUCT:"满减卷",GIFT:"礼品劵",CHANGE:"兑换券",SERVICE:"服务劵"}),m=()=>{o.value=!1,s.value={},c.value={},u.value="扫码或者输入核销码搜索"},p=({value:e})=>{i.value=/^[A-Z]{2}\d+/g.test(e)?1:0,vaildWebsite(e)?(async()=>{try{const{couponCode:e,projectId:a,memberId:n,instanceId:i}=lib.parse(t.value.split("?")[1]),{code:s,data:r}=await getCardDetail({couponCode:e,projectId:a,memberId:n,instanceId:i});if(0!=s||0==Object.keys(r.cardVolume).length)return void(u.value="该核销码不存在,请重新输入或者扫码");const l=r.cardVolume.data[0];c.value={...l,...r.userModel,shopName:r.shopRecord.shopName,shopNumber:r.shopRecord.shopNumber,offerInfoType:l.customizedProperties.offerInfoType},o.value=!0}catch(e){m()}})():(async e=>{try{const{code:t,data:a}=await getGoodsVerification({writeOffCode:e});if(0!=t||!a)return void(u.value="该核销码不存在,请重新输入或者扫码");if(!(0==i.value||a.detail&&isJSON(a.detail)))return void(u.value="该核销码异常,请重新输入或者扫码");const n=0==i.value?[{name:a.body,count:a.quantity,price:a.totalPrice}]:JSON.parse(a.detail).map((e=>({...e,name:e.productName,price:e.priceActivity}))),r=0==a.status?"未核销":1==a.status?"已核销":"已过期";s.value={...a,goodsList:n,verStatusName:r},o.value=!0}catch(t){formatAppLog("log","at pages/work/verificationCode.vue:75",t),m()}})(e)},f=()=>{uni.scanCode({success:function(e){formatAppLog("log","at pages/work/verificationCode.vue:119","条码类型："+e.scanType),formatAppLog("log","at pages/work/verificationCode.vue:120","条码内容："+e.result),t.value=e.result,p({value:e.result})}})},v=async({detail:e})=>{const{useUserInfoSync:t}=userStore(),{userId:n,username:i}=await t();formatAppLog("log","at pages/work/verificationCode.vue:130","onShopColumnsChange",e);const[o,r]=e.value,l=a.value.find((e=>e.value==o.value)),c=l.children.find((e=>e.value==r.value));s.value={...s.value,shopId:l.value,consumeDealer:l.consumeDealer,consumeShop:l.text,buyerId:c.id,buyerName:c.text,sellerId:c.salePartyNum||"",sellerName:c.salePartyName||"",updateBy:n,consumeBy:i}},g=()=>{const e=n.value.find((e=>e.value==c.value.shopId));formatAppLog("log","at pages/work/verificationCode.vue:150","shopItem",e),l.value.close(),c.value={...c.value,shopName:e.text,shopNumber:e.shopNumber}},y=async()=>{const{shopId:e,consumeDealer:t,consumeShop:a,buyerId:n,buyerName:i,sellerId:o,sellerName:r,updateBy:l,consumeBy:c,writeOffCode:u}=s.value;if(!e||""==e)return void showModal("请选择核销门店");const{code:d}=await writeOff({writeOffCode:u,shopId:e,consumeDealer:t,consumeShop:a,buyerId:n,buyerName:i,sellerId:o,sellerName:r,updateBy:l,consumeBy:c});0==d&&(s.value={...s.value,status:1})},_=async()=>{const{shopId:e,shopName:t,shopNumber:a,couponCode:n,memberType:i,ruleText:s,id:o,memberNickName:r,mobile:l,offerInfoType:u,channelType:d}=c.value;if(!e||""==e)return void showModal("请选择核销门店");const{useUserInfoSync:h}=userStore(),{username:m,userId:p}=await h(),{code:f}=await writeOffCard({cardVolumeRules:s,memberId:o,memberName:r,memberPhone:l,couponsType:u,operators:m,operatorsId:p,shopId:e,shopName:t,shopNumber:a,writeOffCode:n,writeOffsTime:dayjs().format("YYYY-MM-DD HH:mm:ss"),memberType:i,channelType:d});0==f&&(c.value={...c.value,status:"USED"})};(async()=>{const{useUserInfoSync:e}=userStore(),{userId:t}=await e(),{code:i,data:s}=await getShopList({userId:t});if(0!=i)return;n.value=s.map((e=>({text:e.shopName,value:e.id,consumeDealer:e.consumeDealer,shopNumber:e.shopNo,children:[]})));const o=await Promise.all(n.value.map((async e=>{const{code:t,data:a=[]}=await getShopSideList({shopId:e.value});return{...e,children:0!=t?[]:a.map((e=>({...e,text:e.shopName,value:e.id})))}})));a.value=o.filter((e=>e.children.length>0))})();const w=()=>navigatorToH5({path:"/verificationList"});return(e,k)=>{const b=resolveEasycom(vue.resolveDynamicComponent("uni-icons"),__easycom_0$3),S=resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"),__easycom_1),x=resolveEasycom(vue.resolveDynamicComponent("uni-data-picker"),__easycom_2),E=resolveEasycom(vue.resolveDynamicComponent("m-button"),__easycom_3$1),C=resolveEasycom(vue.resolveDynamicComponent("uni-tag"),__easycom_4$2),N=resolveEasycom(vue.resolveDynamicComponent("m-empty"),__easycom_5$1),D=resolveEasycom(vue.resolveDynamicComponent("uni-data-checkbox"),__easycom_6),T=resolveEasycom(vue.resolveDynamicComponent("uni-popup"),__easycom_7);return vue.openBlock(),vue.createElementBlock("view",{class:"min-h-screen bg-gray-100"},[vue.createElementVNode("view",{class:"flex items-center bg-white px-4"},[vue.createVNode(b,{type:"scan",size:"30",onClick:f}),vue.createVNode(S,{modelValue:t.value,"onUpdate:modelValue":k[0]||(k[0]=e=>t.value=e),class:"flex-1","cancel-button":"none",placeholder:"请输入核销码搜索",maxlength:"999",onConfirm:p,onClear:m,onInput:k[1]||(k[1]=e=>o.value=!1)},null,8,["modelValue"])]),o.value?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"p-4"},[vue.unref(vaildWebsite)(t.value)?(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"w-full rounded bg-white p-4 ring-4 ring-gray-300 ring-opacity-10"},[vue.createElementVNode("view",{class:"flex justify-between"},[vue.createElementVNode("text",null,"会员卡卷状态"),vue.createVNode(C,{type:"VALID"==c.value.status?"primary":"default",text:d.value[c.value.status],circle:!0},null,8,["type","text"])]),vue.createElementVNode("view",{class:"my-2 border border-l-0 border-r-0 border-dotted border-gray-400 py-2 text-gray-500"},[vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"会员卡卷名称："),vue.createElementVNode("text",null,vue.toDisplayString(c.value.projectName),1)]),vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"会员卡卷类型："),vue.createElementVNode("text",null,vue.toDisplayString(h.value[c.value.offerInfoType]),1)]),vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"会员卡卷规则："),vue.createElementVNode("text",null,vue.toDisplayString(c.value.ruleText),1)]),vue.createElementVNode("view",{class:"mb-2 flex items-center justify-between break-words text-sm",onClick:k[2]||(k[2]=e=>l.value.open())},[vue.createElementVNode("view",{class:"flex items-center"},[vue.createElementVNode("text",{class:"flex-shrink-0"},"卡卷核销门店："),c.value.shopName?(vue.openBlock(),vue.createElementBlock("text",{key:0,class:"break-all"},vue.toDisplayString(c.value.shopName),1)):(vue.openBlock(),vue.createElementBlock("text",{key:1,class:"text-gray-400"},"请选择"))]),vue.createVNode(b,{color:"#999",type:"forward",size:"20"})])]),vue.createElementVNode("view",{class:"flex justify-end"},[vue.createVNode(E,{type:"primary",disabled:["EXPIRED","USED"].includes(c.value.status),size:"small",onClick:_},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(["EXPIRED","USED"].includes(c.value.status)?d.value[c.value.status]:"核销"),1)])),_:1},8,["disabled"])])])):(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"w-full rounded bg-white p-4 ring-4 ring-gray-300 ring-opacity-10"},[vue.createElementVNode("view",{class:"flex justify-between"},[vue.createElementVNode("text",null,"核销码"+vue.toDisplayString(t.value),1),vue.createElementVNode("text",null,vue.toDisplayString(s.value.verStatusName),1)]),vue.createElementVNode("view",{class:"my-2 border border-l-0 border-r-0 border-dotted border-gray-400 py-2 text-gray-500"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.value.goodsList,((e,t)=>(vue.openBlock(),vue.createElementBlock("view",{key:t},[vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"产品名称："),vue.createElementVNode("text",null,vue.toDisplayString(e.name),1)]),0==i.value?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"产品数量："),vue.createElementVNode("text",null,vue.toDisplayString(e.count),1)])):(vue.openBlock(),vue.createElementBlock("view",{key:1,class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"规格数量："),vue.createElementVNode("text",{class:"rounded border border-solid border-gray-400 px-2 py-1"},vue.toDisplayString(e.spec),1),vue.createElementVNode("text",null," x"+vue.toDisplayString(e.count),1)])),vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"订单总价："),vue.createElementVNode("text",null,"￥"+vue.toDisplayString(e.price)+"元",1)])])))),128)),vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"核销截止日期："),vue.createElementVNode("text",null,vue.toDisplayString(s.value.endTime),1)]),s.value.updateTime?(vue.openBlock(),vue.createElementBlock("view",{key:0,class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"核销日期："),vue.createElementVNode("text",null,vue.toDisplayString(s.value.updateTime),1)])):vue.createCommentVNode("v-if",!0),vue.withDirectives(vue.createElementVNode("p",{class:"mb-2 max-h-24 truncate break-words text-sm"},[vue.createElementVNode("text",null,"使用规则："),vue.createElementVNode("text",null,vue.toDisplayString(s.value.remark),1)],512),[[vue.vShow,""!=s.value.remark&&"null"!=s.value.remark]]),vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("view",null,[vue.createElementVNode("text",null,"核销门店："),vue.createElementVNode("text",null,vue.toDisplayString(s.value.shopName),1)]),0==s.value.status?(vue.openBlock(),vue.createBlock(x,{key:0,ref_key:"pickerRef",ref:r,localdata:a.value,"clear-icon":!1,"popup-title":"请选择核销门店",onChange:v},null,8,["localdata"])):vue.createCommentVNode("v-if",!0)]),vue.createElementVNode("view",{class:"mb-2 break-words text-sm"},[vue.createElementVNode("text",null,"操作人："),vue.createElementVNode("text",null,vue.toDisplayString(s.value.consumeBy),1)])]),vue.createElementVNode("view",{class:"flex justify-end"},[vue.createVNode(E,{type:"primary",disabled:0!=s.value.status,size:"small",onClick:y},{default:vue.withCtx((()=>[vue.createTextVNode(" 核销 ")])),_:1},8,["disabled"])])]))])):(vue.openBlock(),vue.createBlock(N,{key:1,image:"search",description:u.value},null,8,["description"])),vue.createVNode(T,{ref_key:"shopListRef",ref:l,type:"bottom","safe-area":!1},{default:vue.withCtx((()=>[vue.createElementVNode("view",{class:"rounded-t-2xl bg-white py-3 text-center text-gray-300"},[vue.createElementVNode("text",null,"请选择门店")]),vue.createElementVNode("scroll-view",{class:"h-80 bg-white","scroll-y":"true"},[vue.createElementVNode("view",{class:"p-3"},[vue.createVNode(D,{modelValue:c.value.shopId,"onUpdate:modelValue":k[3]||(k[3]=e=>c.value.shopId=e),localdata:n.value,mode:"tag",onChange:g},null,8,["modelValue","localdata"])])]),vue.createElementVNode("view",{class:"h-10"})])),_:1},512),vue.createElementVNode("view",{class:"fixed right-6 bottom-10",onClick:w},[vue.createElementVNode("view",{class:"rounded-full bg-blue-500 px-3 py-1 text-sm text-white"},"核销记录")])])}}},_sfc_main$2={__name:"study",setup(e){const t=vue.ref(""),a=vue.ref({path:"/pages/tab/workPage",title:"高效门店管理，精准运营数据"});onLoad((async e=>{let{path:a=null,code:n}=e;const i=decodeURIComponent(e.scene);if(i){const e=i.split("="),a="https://chandao.derucci.com:6443/web/marketing_h5/";formatAppLog("log","at pages/study/study.vue:29","webUrl",a),t.value=`${a}#/login?liveId=${e[0]}&paymentFlag=${e[1]}&liveFlag=${e[2]}`}a&&(t.value=decodeURIComponent(a))}));const n=e=>{const{detail:t}=e,{data:n}=t,{shareUrl:i=null,title:s=""}=n[n.length-1]||{};formatAppLog("log","at pages/study/study.vue:39","shareUrl",i),a.value=i?{path:"/pages/common/webviewPage?url="+encodeURIComponent(i),title:s}:{path:"/pages/tab/workPage",title:"高效门店管理，精准运营数据"}};return onShareAppMessage((e=>a.value)),onShareTimeline((()=>({title:"title",query:"id=123",imageUrl:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20230224/Y29kZS4xNjc3MjIyNTQ5Nzcy.jpg"}))),(e,a)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("web-view",{src:t.value,onMessage:n},null,40,["src"]),vue.createElementVNode("image",{class:"img",src:"https://derucci-app-obs.iderucci.com/cloud-derucci-system/20230224/cGFnZS4xNjc3MjIyNTM4Njk3.png"})],64))}},_sfc_main$1={__name:"index",setup(e){const t=vue.ref(null),a=vue.ref({path:"/pages/tabbar/workPage",title:"高效门店管理，精准运营数据"});return onLoad((e=>{formatAppLog("log","at pages/webview/index.vue:13","小程序 onLoad",decodeURIComponent(e.url)),t.value=e.url&&decodeURIComponent(e.url)})),onShareAppMessage((()=>a)),(e,a)=>t.value?(vue.openBlock(),vue.createElementBlock("web-view",{key:0,src:t.value},null,8,["src"])):vue.createCommentVNode("v-if",!0)}};__definePage("pages/tabbar/workPage",_sfc_main$v),__definePage("pages/tabbar/studyPage",PagesTabbarStudyPage),__definePage("pages/tabbar/discoveryPage",PagesTabbarDiscoveryPage),__definePage("pages/tabbar/mePage",PagesTabbarMePage),__definePage("pages/login/loginPage",PagesLoginLoginPage),__definePage("pages/login/forgetPassword",_sfc_main$e),__definePage("pages/login/phoneLogin",PagesLoginPhoneLogin),__definePage("pages/login/phoneMergeAccount",_sfc_main$c),__definePage("pages/common/webviewPage",_sfc_main$b),__definePage("pages/common/payPage",_sfc_main$a),__definePage("pages/common/downloadFile",_sfc_main$9),__definePage("pages/common/toMiniProgram",_sfc_main$8),__definePage("pages/work/verificationCode",_sfc_main$3),__definePage("pages/study/study",_sfc_main$2),__definePage("pages/webview/index",_sfc_main$1);const store=createPinia();function setupStore(e){e.use(store)}const _sfc_main={__name:"App",setup(e){const t=uni.getUpdateManager();return t.onCheckForUpdate((function(e){formatAppLog("log","at App.vue:6",e.hasUpdate)})),t.onUpdateReady((function(e){uni.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success(e){e.confirm&&t.applyUpdate()}})})),t.onUpdateFailed((function(e){})),()=>{}}};function createApp(){const e=vue.createVueApp(_sfc_main);return setupStore(e),{app:e}}const{app:__app__,Vuex:__Vuex__,Pinia:__Pinia__}=createApp();uni.Vuex=__Vuex__,uni.Pinia=__Pinia__,__app__.provide("__globalStyles",__uniConfig.styles),__app__._component.mpType="app",__app__._component.render=()=>{},__app__.mount("#app")}(Vue,uni.VueShared);
